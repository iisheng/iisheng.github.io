<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>èˆªç­é¢„è®¢ç»Ÿè®¡ï¼Œå¬è¯´è¿™é¢˜æœ‰çš„äººçœ‹äº†é¢˜è§£è¿˜æ²¡æ‡‚ï¼Ÿ</title>
      <link href="/2020/04/09/corporate-flight-bookings/"/>
      <url>/2020/04/09/corporate-flight-bookings/</url>
      
        <content type="html"><![CDATA[<blockquote class="blockquote-center"><p><strong>ä»¥æ¸…æ™°ï¼Œæ˜“äºç†è§£çš„æ€ç»´ï¼Œè®²è§£<a href="https://leetcode-cn.com/problems/corporate-flight-bookings/" target="_blank" rel="noopener">èˆªç­é¢„è®¢ç»Ÿè®¡</a>å’Œ<a href="https://leetcode-cn.com/problems/car-pooling/" target="_blank" rel="noopener">æ‹¼è½¦</a>ï¼Œè¿™ä¸¤é“é¢˜ã€‚æ¬¢è¿å¤§å®¶ä¸€èµ·æ¥åˆ·é¢˜ã€‚</strong></p></blockquote><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰å‡ å¤©ï¼Œæœ‰ä¸€å“¥ä»¬å‘æˆ‘ä¸€ä¸ªLeetCodeé¢˜ç›®é“¾æ¥ï¼Œç´§è·Ÿç€é™„ä¸Šäº†è‡ªå·±çš„æäº¤è®°å½•ï¼Œä¸€ä¸ª<code>2ms</code>ï¼Œå¦ä¸€ä¸ª<code>1451ms</code>â€¦</p><p><img src="https://img.iisheng.cn/wechat-screenshot.png" alt></p><p>æˆ‘ä¸€çœ‹ï¼Œè¿™é¢˜æœ‰ç‚¹æ„æ€å•Šï¼Œä¸åŒçš„æ€è·¯ç«Ÿç„¶æ—¶é—´å·®è¿™ä¹ˆå¤šã€‚æå®ƒã€‚</p><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>è¿™é‡Œæœ‰<code>n</code>ä¸ªèˆªç­ï¼Œå®ƒä»¬åˆ†åˆ«ä»<code>1</code>åˆ°<code>n</code>è¿›è¡Œç¼–å·ã€‚</p><p>æˆ‘ä»¬è¿™å„¿æœ‰ä¸€ä»½èˆªç­é¢„è®¢è¡¨ï¼Œè¡¨ä¸­ç¬¬<code>i</code>æ¡é¢„è®¢è®°å½•<code>bookings[i] = [i, j, k]</code>æ„å‘³ç€æˆ‘ä»¬åœ¨ä»<code>i</code>åˆ°<code>j</code>çš„æ¯ä¸ªèˆªç­ä¸Šé¢„è®¢äº†<code>k</code>ä¸ªåº§ä½ã€‚</p><p>è¯·ä½ è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º<code>n</code>çš„æ•°ç»„<code>answer</code>ï¼ŒæŒ‰èˆªç­ç¼–å·é¡ºåºè¿”å›æ¯ä¸ªèˆªç­ä¸Šé¢„è®¢çš„åº§ä½æ•°ã€‚</p><p>ç¤ºä¾‹ï¼š</p><blockquote><p>è¾“å…¥ï¼šbookings = [ [1,2,10], [2,3,20], [2,5,25] ], n = 5</p><p>è¾“å‡ºï¼š[10,55,45,25,25]</p></blockquote><h2 id="O-m-n-è§£æ³•"><a href="#O-m-n-è§£æ³•" class="headerlink" title="O(m*n)è§£æ³•"></a>O(m*n)è§£æ³•</h2><p>æ ¹æ®é¢˜æ„åˆå§‹åŒ–é•¿åº¦ä¸º<code>n</code>çš„<code>answer</code>æ•°ç»„ï¼Œä»£è¡¨<code>1</code>åˆ°<code>n</code>å·èˆªç­é¢„è®¢çš„åº§ä½æ•°é‡ï¼Œå¤–å±‚éå† <code>bookings</code>ï¼Œå†…å±‚éå†<code>bookings[i] = [i, j, k]</code>ï¼Œè®¡ç®—èˆªç­å·<code>i</code>åˆ°<code>j</code>çš„åº§ä½æ•°é‡ï¼Œå³å½“å‰åº§ä½æ•°é‡åŠ <code>k</code>ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] corpFlightBookings(</span><br><span class="line">        <span class="keyword">int</span>[][] bookings, <span class="keyword">int</span> n) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†æ•´ä¸ªbookingsæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] b : bookings) &#123;</span><br><span class="line">        <span class="comment">// å†…å±‚å¾ªç¯æŠŠæ¯ä¸ªèˆªç­é¢„è®¢æ•°åŠ ä¸Š</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = b[<span class="number">0</span>] - <span class="number">1</span>;</span><br><span class="line">             i &lt;= b[<span class="number">1</span>] - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            answer[i] += b[<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="O-n-è§£æ³•"><a href="#O-n-è§£æ³•" class="headerlink" title="O(n)è§£æ³•"></a>O(n)è§£æ³•</h2><h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><p><code>O(m*n)</code>è§£æ³•ä¸­å…³é”®ä¸€ç‚¹ï¼Œå†…å±‚å¾ªç¯æˆ‘ä»¬ä¸€ç›´é‡å¤çš„åœ¨<code>[i, j]</code>ä¹‹é—´åŠ ä¸Š<code>k</code>ï¼Œæ€ä¹ˆå°†è¿™å¾ªç¯å˜æˆ<code>O(1)</code>ï¼Œæˆä¸ºé—®é¢˜çš„å…³é”®ï¼</p><p><code>[i, j]</code>ä¹‹é—´åŠ ä¸Š<code>k</code>ï¼Œè¿™è®©æˆ‘æƒ³åˆ°äº†ç­‰å·®æ•°åˆ—ï¼Œè¿™ä¸å°±æ˜¯å…¬å·®ä¸º<code>k</code>çš„ç­‰å·®æ•°åˆ—å—ï¼Ÿç„¶åå‘¢ï¼Ÿ</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è®¾<code>answer[i]</code>è¡¨ç¤ºç¬¬<code>i</code>ä¸ªèˆªç­é¢„è®¢çš„åº§ä½æ•°ã€‚å®šä¹‰ä¸€ä¸ªå·®åˆ†æ•°ç»„<code>d[]</code>ï¼Œ<code>d[i]</code>è¡¨ç¤ºç¬¬<code>i</code>ä¸ªèˆªç­ä¸ç¬¬<code>i-1</code>ä¸ªèˆªç­é¢„è®¢åº§ä½çš„å·®å€¼ï¼Œå³<code>d[i] = answer[i] - answer[i - 1]</code>ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬æ¯æ¬¡éå†åˆ°<code>bookings[i] = [i, j, k]</code>ï¼Œå°±åªéœ€è¦å°†<code>d[i]</code>å¢åŠ <code>k</code>ï¼Œ<code>d[j + 1]</code>å‡å°‘<code>k</code>å³å¯ï¼Œå› ä¸º<code>i</code>åˆ°<code>j</code>ä¹‹é—´ï¼Œèˆªç­é¢„è®¢æ•°é‡æ˜¯æ²¡æœ‰å˜åŒ–çš„ã€‚</p><p>æœ€åï¼Œè®¡ç®—<code>answer[i] = answer[i - 1] + d[i]</code>ï¼Œè¿”å›<code>answer</code>å³å¯ã€‚</p><h3 id="æ¨æ¼”"><a href="#æ¨æ¼”" class="headerlink" title="æ¨æ¼”"></a>æ¨æ¼”</h3><p>å¥½å§ï¼Œè¿™æ ·è¯´å¯èƒ½æœ‰äººæ²¡æ‡‚ï¼Œæˆ‘ä»¬æŒ‰ç…§é¢˜ç›®çš„ä¾‹å­æ¨æ¼”ä¸€æ¬¡ï¼š</p><ul><li>åˆå§‹èˆªç­é¢„è®¢æ•°é‡æ•°ç»„ <code>answer = [0,0,0,0,0]</code>ï¼Œå·®åˆ†æ•°ç»„<code>d = [0,0,0,0,0]</code></li><li>å½“éå†åˆ°<code>bookings[0] = [1,2,10]</code>çš„æ—¶å€™ï¼Œå·®åˆ†æ•°ç»„ç¬¬1ä½åŠ 10ï¼Œç¬¬3ä½å‡10ï¼Œå˜æˆ<code>d = [10,0,-10,0,0]</code></li><li>åŒç†ï¼Œå½“éå†åˆ°<code>bookings[1] = [2,3,20]</code>çš„æ—¶å€™ï¼Œå·®åˆ†æ•°ç»„å˜æˆ<code>d = [10,20,-10,-20,0]</code></li><li>å½“éå†åˆ°<code>bookings[2] = [2,5,25]</code>çš„æ—¶å€™ï¼Œå·®åˆ†æ•°ç»„å˜æˆ<code>d = [10,45,-10,-20,0]</code>ï¼Œç¬¬6ä½è¦å‡25ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦äº†</li><li>æœ€åè®¡ç®—<code>answer</code>æ•°ç»„çš„å€¼ï¼Œ<code>answer[0] = d[0] = 10</code>ï¼Œ<code>answer[1] = d[1] + answer[0] = 45 + 10 = 55</code>ï¼Œ<code>answer[2] = d[2] + answer[1] = -10 + 55 = 45</code>â€¦</li><li>æœ€æœ€åå‘ç°ï¼Œåªç”³è¯·ä¸€ä¸ªæ•°ç»„è¡¨ç¤º<code>d[]</code>å’Œ<code>answer[]</code>å°±å¯ä»¥äº†ï¼Œoverï¼</li></ul><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] corpFlightBookings(</span><br><span class="line">        <span class="keyword">int</span>[][] bookings, <span class="keyword">int</span> n) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†bookings è®¡ç®—èˆªç­i+1 å¯¹èˆªç­i å˜åŒ–çš„é¢„è®¢æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] b : bookings) &#123;</span><br><span class="line">        <span class="comment">// å¢åŠ çš„é¢„è®¢æ•°</span></span><br><span class="line">        answer[b[<span class="number">0</span>] - <span class="number">1</span>] += b[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// é˜²æ­¢æ•°ç»„è¶Šç•Œ</span></span><br><span class="line">        <span class="keyword">if</span> (b[<span class="number">1</span>] &lt; n) &#123;</span><br><span class="line">            <span class="comment">// å‡å°‘çš„é¢„è®¢æ•°é‡</span></span><br><span class="line">            answer[b[<span class="number">1</span>]] -= b[<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èˆªç­içš„é¢„è®¢æ•°ç­‰äº,i-1çš„é¢„è®¢æ•°ï¼ŒåŠ iæ—¶åˆ»å˜åŒ–çš„é¢„å®šæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        answer[i] += answer[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‹¼è½¦"><a href="#æ‹¼è½¦" class="headerlink" title="æ‹¼è½¦"></a>æ‹¼è½¦</h2><blockquote><p>ä½ ä»¥ä¸ºè¿™å°±å®Œäº†å—ï¼Ÿä¸è¦å¤ªå¤©çœŸã€‚å†æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªé¢˜ï¼Œæˆ–è®¸ä¼šç»™ä½ å¸¦æ¥æ–°æ€è·¯ã€‚</p></blockquote><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>å‡è®¾ä½ æ˜¯ä¸€ä½é¡ºé£è½¦å¸æœºï¼Œè½¦ä¸Šæœ€åˆæœ‰ <code>capacity</code> ä¸ªç©ºåº§ä½å¯ä»¥ç”¨æ¥è½½å®¢ã€‚ç”±äºé“è·¯çš„é™åˆ¶ï¼Œè½¦ åªèƒ½ å‘ä¸€ä¸ªæ–¹å‘è¡Œé©¶ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å…è®¸æ‰å¤´æˆ–æ”¹å˜æ–¹å‘ï¼Œä½ å¯ä»¥å°†å…¶æƒ³è±¡ä¸ºä¸€ä¸ªå‘é‡ï¼‰ã€‚</p><p>è¿™å„¿æœ‰ä¸€ä»½è¡Œç¨‹è®¡åˆ’è¡¨ <code>trips[][]</code>ï¼Œå…¶ä¸­ <code>trips[i] = [num_passengers, start_location, end_location]</code> åŒ…å«äº†ä½ çš„ç¬¬ <code>i</code> æ¬¡è¡Œç¨‹ä¿¡æ¯ï¼š</p><p>å¿…é¡»æ¥é€çš„ä¹˜å®¢æ•°é‡ï¼›<br>ä¹˜å®¢çš„ä¸Šè½¦åœ°ç‚¹ï¼›<br>ä»¥åŠä¹˜å®¢çš„ä¸‹è½¦åœ°ç‚¹ã€‚<br>è¿™äº›ç»™å‡ºçš„åœ°ç‚¹ä½ç½®æ˜¯ä»ä½ çš„ åˆå§‹ å‡ºå‘ä½ç½®å‘å‰è¡Œé©¶åˆ°è¿™äº›åœ°ç‚¹æ‰€éœ€çš„è·ç¦»ï¼ˆå®ƒä»¬ä¸€å®šåœ¨ä½ çš„è¡Œé©¶æ–¹å‘ä¸Šï¼‰ã€‚</p><p>è¯·ä½ æ ¹æ®ç»™å‡ºçš„è¡Œç¨‹è®¡åˆ’è¡¨å’Œè½¦å­çš„åº§ä½æ•°ï¼Œæ¥åˆ¤æ–­ä½ çš„è½¦æ˜¯å¦å¯ä»¥é¡ºåˆ©å®Œæˆæ¥é€æ‰€ç”¨ä¹˜å®¢çš„ä»»åŠ¡ï¼ˆå½“ä¸”ä»…å½“ä½ å¯ä»¥åœ¨æ‰€æœ‰ç»™å®šçš„è¡Œç¨‹ä¸­æ¥é€æ‰€æœ‰ä¹˜å®¢æ—¶ï¼Œè¿”å› <code>true</code>ï¼Œå¦åˆ™è¯·è¿”å› <code>false</code>ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><blockquote><p>è¾“å…¥ï¼štrips = [[2,1,5],[3,3,7]], capacity = 4</p><p>è¾“å‡ºï¼šfalse</p></blockquote><p>ç¤ºä¾‹ 2ï¼š</p><blockquote><p>è¾“å…¥ï¼štrips = [[2,1,5],[3,3,7]], capacity = 5</p><p>è¾“å‡ºï¼štrue</p></blockquote><p>æç¤ºï¼š</p><ul><li>ä½ å¯ä»¥å‡è®¾ä¹˜å®¢ä¼šè‡ªè§‰éµå®ˆ â€œå…ˆä¸‹åä¸Šâ€ çš„è‰¯å¥½ç´ è´¨</li><li><code>trips.length &lt;= 1000</code></li><li><code>1 &lt;= trips[i][0] &lt;= 100</code></li></ul><h3 id="é¢˜ç›®åˆ†æ"><a href="#é¢˜ç›®åˆ†æ" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h3><p>è¿™é“é¢˜å®é™…ä¸Šå°±æ˜¯é—®ï¼Œè½¦çš„åº§ä½æ•°é‡æ˜¯å¦èƒ½æ»¡è¶³æ¯ä¸ªè¡Œç¨‹<code>i</code>çš„ä¹˜å®¢ï¼Œå³æ¯ä¸ªä¹˜å®¢éƒ½åä¸Šåº§ä½ï¼Œèƒ½åˆ™è¿”å›<code>true</code>ï¼Œå¦åˆ™è¿”å›<code>false</code>ã€‚</p><p>å¦‚æœæˆ‘ä»¬èƒ½è®¡ç®—å‡ºï¼Œè¡Œç¨‹<code>i</code>ï¼Œè¦ä¹˜è½¦çš„ä¹˜å®¢çš„æ•°é‡ï¼Œç„¶åè·Ÿ<code>capacity</code>å¯¹æ¯”ä¸€ä¸‹ï¼Œå°±èƒ½å¾—åˆ°ç­”æ¡ˆäº†ã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œ<strong>è¦ä¹˜è½¦çš„ä¹˜å®¢çš„æ•°é‡ = è½¦ä¸ŠåŸæ¥ä¹˜å®¢çš„æ•°é‡ - ä¸‹è½¦ä¹˜å®¢æ•°é‡ + ä¸Šè½¦ä¹˜å®¢æ•°é‡</strong>ã€‚</p><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„æˆ–è€…Mapè®°å½•ï¼Œè¡Œç¨‹<code>i</code>ï¼Œä¸‹è½¦ä¹˜å®¢çš„æ•°é‡å’Œä¸Šè½¦ä¹˜å®¢çš„æ•°é‡ï¼Œç„¶åè¡Œç¨‹å¼€å§‹åˆ°ç»“æŸï¼Œè®¡ç®—è¦ä¹˜è½¦çš„ä¹˜å®¢æ•°é‡ï¼Œå¹¶ä¸<code>capacity</code>æ¯”è¾ƒã€‚</p><h3 id="ä»£ç å®ç°Mapç‰ˆ"><a href="#ä»£ç å®ç°Mapç‰ˆ" class="headerlink" title="ä»£ç å®ç°Mapç‰ˆ"></a>ä»£ç å®ç°Mapç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">carPooling</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">int</span>[][] trips, <span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨TreeMap æ˜¯ä¸ºäº†è®©å…ƒç´ æ ¹æ®keyæ’åº</span></span><br><span class="line">    TreeMap&lt;Integer, Integer&gt; map =</span><br><span class="line">            <span class="keyword">new</span> TreeMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] t : trips) &#123;</span><br><span class="line">        <span class="keyword">int</span> v = map.getOrDefault(t[<span class="number">1</span>], <span class="number">0</span>) + t[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// ä¸Šè½¦ä¹˜å®¢æ•°é‡</span></span><br><span class="line">        map.put(t[<span class="number">1</span>], v);</span><br><span class="line">        v = map.getOrDefault(t[<span class="number">2</span>], <span class="number">0</span>) - t[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// ä¸‹è½¦ä¹˜å®¢æ•°é‡</span></span><br><span class="line">        map.put(t[<span class="number">2</span>], v);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry</span><br><span class="line">            : map.entrySet()) &#123;</span><br><span class="line">        Integer value = entry.getValue();</span><br><span class="line">        <span class="comment">// å½“å‰æ•°é‡=ä¹‹å‰æ•°é‡+å˜åŒ–çš„æ•°é‡</span></span><br><span class="line">        cur += value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cur &gt; capacity) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç å®ç°æ•°ç»„ç‰ˆ"><a href="#ä»£ç å®ç°æ•°ç»„ç‰ˆ" class="headerlink" title="ä»£ç å®ç°æ•°ç»„ç‰ˆ"></a>ä»£ç å®ç°æ•°ç»„ç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">carPooling</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">int</span>[][] trips, <span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€è¿œè¡Œç¨‹ æ•°ç»„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] t : trips) &#123;</span><br><span class="line">        max = Math.max(max, t[<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰€æœ‰è¦ä¹˜è½¦çš„ä¹˜å®¢æ•°é‡</span></span><br><span class="line">    <span class="keyword">int</span>[] passengers = <span class="keyword">new</span> <span class="keyword">int</span>[max + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] t : trips) &#123;</span><br><span class="line">        passengers[t[<span class="number">1</span>]] += t[<span class="number">0</span>];</span><br><span class="line">        passengers[t[<span class="number">2</span>]] -= t[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> passenger : passengers) &#123;</span><br><span class="line">        <span class="comment">// å½“å‰æ•°é‡ = ä¹‹å‰æ•°é‡ + å˜åŒ–çš„æ•°é‡</span></span><br><span class="line">        cur += passenger;</span><br><span class="line">        <span class="keyword">if</span> (cur &gt; capacity) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å›å¤´"><a href="#å›å¤´" class="headerlink" title="å›å¤´"></a>å›å¤´</h3><p><strong>æ‹¼è½¦</strong>çš„ä»£ç ä¸åœºæ™¯æ„Ÿè§‰å¥½ç†è§£ä¸€äº›ï¼Œå› ä¸ºç”Ÿæ´»ä¸­æˆ‘ä»¬å°±æ˜¯è¿™æ ·ï¼Œå…ˆä¸‹åä¸Šï¼Œèƒ½ä¸èƒ½åä¸Šåº§ï¼Œå°±çœ‹è½¦ä¸ŠåŸæ¥æœ‰å¤šå°‘äººï¼Œè¿˜æœ‰ä¸‹è½¦å¤šå°‘äººã€‚</p><p>æˆ‘ä»¬å†å›æ¥æ¥çœ‹<strong>èˆªç­é¢„è®¢ç»Ÿè®¡</strong>è¿™é¢˜ï¼Œå®é™…ä¸Šè·Ÿ<strong>æ‹¼è½¦</strong>æ˜¯å®Œå…¨ä¸€æ ·çš„é¢˜ç›®ã€‚</p><p>æˆ‘çœ‹åˆ°æœ‰äººé—®ï¼Œè®¡ç®—<code>bookings[i] = [i, j, k]</code>é¢„è®¢å˜åŒ–æ•°é‡çš„æ—¶å€™ï¼Œä¸ºå•¥æ˜¯ç¬¬<code>j + 1</code>çš„ä½ç½®è¦å‡<code>k</code>ï¼Œè€Œä¸æ˜¯<code>j</code>çš„ä½ç½®å‘¢ï¼Ÿå› ä¸ºï¼Œ<code>j - 1</code>çš„ä½ç½®ï¼Œèˆªç­é¢„è®¢åº§ä½æ•°é‡åº”è¯¥åŠ <code>k</code>ï¼Œè€Œ<code>j</code>çš„ä½ç½®ï¼Œèˆªç­é¢„è®¢åº§ä½æ•°é‡ä¹ŸåŠ <code>k</code>ï¼Œæ‰€ä»¥<code>j</code>å’Œ<code>j - 1</code>ä¹‹é—´æ•°é‡æ˜¯æ²¡æœ‰å˜åŒ–çš„ã€‚ä½†æ˜¯ï¼Œ<code>j + 1</code>çš„ä½ç½®èˆªç­æ•°é‡ä¸å†åŠ <code>k</code>äº†ï¼Œæ‰€ä»¥<code>j + 1</code>ç›¸å¯¹äº<code>j</code>ä½ç½®èˆªç­é¢„è®¢æ•°é‡æ˜¯å‡å°‘<code>k</code>çš„ã€‚</p><p>è€Œ<strong>æ‹¼è½¦</strong>è¿™é“é¢˜ï¼Œ<code>trips[i][j]</code>ï¼Œåœ¨<code>j</code>ä½ç½®ï¼Œè½¦åˆ°ç«™äº†ï¼Œä¹˜å®¢å°±ä¸‹è½¦äº†ï¼Œå†åä¸€ç«™å°±è¿‡ç«™äº†â€¦</p><p>æ€»ä¹‹ï¼Œä¸¤é“é¢˜æœ¬è´¨æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç•¥å¾®æœ‰äº›ç»†èŠ‚ä¸åŒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜’ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArrayListæºç è§£æï¼Œè€å“¥ï¼Œæ¥ä¸€èµ·å¤ä¹ ä¸€å“ˆï¼Ÿ</title>
      <link href="/2020/04/03/arraylist/"/>
      <url>/2020/04/03/arraylist/</url>
      
        <content type="html"><![CDATA[<blockquote class="blockquote-center"><p><strong>å¸¦ç€é—®é¢˜ï¼Œæ¥é˜…è¯»æºç ï¼Œç»“åˆä½¿ç”¨æ¡ˆä¾‹ï¼Œç›¸ä¿¡ä½ ï¼Œçœ‹å®Œå¯ä»¥å¯¹ArrayListè®°å¿†æ·±åˆ»äº†ã€‚</strong></p></blockquote><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>JDKæºç è§£æç³»åˆ—æ–‡ç« ï¼Œéƒ½æ˜¯åŸºäºJDK8åˆ†æçš„ï¼Œè™½ç„¶JDK14å·²ç»å‡ºæ¥ï¼Œä½†æ˜¯JDK8æˆ‘è¿˜ä¸ä¼šï¼Œæˆ‘â€¦</p><h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h2><p><img src="https://img.iisheng.cn/array-list-diagram.png" alt></p><ul><li>å®ç°äº†<code>RandomAccess</code>æ¥å£ï¼Œå¯ä»¥éšæœºè®¿é—®</li><li>å®ç°äº†<code>Cloneable</code>æ¥å£ï¼Œå¯ä»¥å…‹éš†</li><li>å®ç°äº†<code>Serializable</code>æ¥å£ï¼Œå¯ä»¥åºåˆ—åŒ–ã€ååºåˆ—åŒ–</li><li>å®ç°äº†<code>List</code>æ¥å£ï¼Œæ˜¯<code>List</code>çš„å®ç°ç±»ä¹‹ä¸€</li><li>å®ç°äº†<code>Collection</code>æ¥å£ï¼Œæ˜¯<code>Java Collections Framework</code>æˆå‘˜ä¹‹ä¸€</li><li>å®ç°äº†<code>Iterable</code>æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨<code>for-each</code>è¿­ä»£</li></ul><h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åºåˆ—åŒ–ç‰ˆæœ¬UID</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span></span><br><span class="line">        serialVersionUID = <span class="number">8683452581122892189L</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤çš„åˆå§‹å®¹é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span></span><br><span class="line">        DEFAULT_CAPACITY = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨äºç©ºå®ä¾‹çš„å…±äº«ç©ºæ•°ç»„å®ä¾‹</span></span><br><span class="line"><span class="comment"> * new ArrayList(0);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[]</span><br><span class="line">        EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨äºæä¾›é»˜è®¤å¤§å°çš„å®ä¾‹çš„å…±äº«ç©ºæ•°ç»„å®ä¾‹</span></span><br><span class="line"><span class="comment"> * new ArrayList();</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[]</span><br><span class="line">        DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨ArrayListå…ƒç´ çš„æ•°ç»„ç¼“å†²åŒº</span></span><br><span class="line"><span class="comment"> * ArrayListçš„å®¹é‡ï¼Œæ˜¯æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * non-private to simplify nested class access</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Object[] elementData;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ArrayListä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> size;</span><br></pre></td></tr></table></figure><blockquote><p>å°æœ‹å‹ï¼Œä½ å››å¦æœ‰å¾ˆå¤šé—®å·ï¼Ÿ</p></blockquote><ol><li>ä¸ºä»€ä¹ˆç©ºå®ä¾‹é»˜è®¤æ•°ç»„æœ‰çš„æ—¶å€™æ˜¯<code>EMPTY_ELEMENTDATA</code>ï¼Œè€Œåˆæœ‰çš„æ—¶å€™æ˜¯<code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code></li><li>ä¸ºä»€ä¹ˆ<code>elementData</code>è¦è¢«<code>transient</code>ä¿®é¥°</li><li>ä¸ºä»€ä¹ˆ<code>elementData</code>æ²¡æœ‰è¢«<code>private</code>ä¿®é¥°ï¼Ÿéš¾é“æ­£å¦‚æ³¨é‡Šæ‰€å†™çš„<strong>non-private to simplify nested class access</strong></li></ol><blockquote><p>å¸¦ç€é—®é¢˜ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p></blockquote><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><h3 id="å¸¦åˆå§‹å®¹é‡çš„æ„é€ æ–¹æ³•"><a href="#å¸¦åˆå§‹å®¹é‡çš„æ„é€ æ–¹æ³•" class="headerlink" title="å¸¦åˆå§‹å®¹é‡çš„æ„é€ æ–¹æ³•"></a>å¸¦åˆå§‹å®¹é‡çš„æ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸¦ä¸€ä¸ªåˆå§‹å®¹é‡å‚æ•°çš„æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  initialCapacity  åˆå§‹å®¹é‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span>  å¦‚æœåˆå§‹å®¹é‡éæ³•å°±æŠ›å‡º</span></span><br><span class="line"><span class="comment"> *          IllegalArgumentException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.elementData =</span><br><span class="line">                <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                <span class="string">"Illegal Capacity: "</span>+ initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ<code>initialCapacity &gt; 0</code>ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„é•¿åº¦æ˜¯<code>initialCapacity</code>çš„æ•°ç»„</li><li>å¦‚æœ<code>initialCapacity == 0</code>ï¼Œå°±ä½¿ç”¨EMPTY_ELEMENTDATA</li><li>å…¶ä»–æƒ…å†µï¼Œ<code>initialCapacity</code>ä¸åˆæ³•ï¼ŒæŠ›å‡ºå¼‚å¸¸</li></ul><h3 id="æ— å‚æ„é€ æ–¹æ³•"><a href="#æ— å‚æ„é€ æ–¹æ³•" class="headerlink" title="æ— å‚æ„é€ æ–¹æ³•"></a>æ— å‚æ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ— å‚æ„é€ æ–¹æ³• å°†elementData èµ‹å€¼ä¸º</span></span><br><span class="line"><span class="comment"> *   DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.elementData =</span><br><span class="line">            DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸¦ä¸€ä¸ªé›†åˆå‚æ•°çš„æ„é€ æ–¹æ³•"><a href="#å¸¦ä¸€ä¸ªé›†åˆå‚æ•°çš„æ„é€ æ–¹æ³•" class="headerlink" title="å¸¦ä¸€ä¸ªé›†åˆå‚æ•°çš„æ„é€ æ–¹æ³•"></a>å¸¦ä¸€ä¸ªé›†åˆå‚æ•°çš„æ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸¦ä¸€ä¸ªé›†åˆå‚æ•°çš„æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> c é›†åˆï¼Œä»£è¡¨é›†åˆä¸­çš„å…ƒç´ ä¼šè¢«æ”¾åˆ°listä¸­</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> å¦‚æœé›†åˆä¸ºç©ºï¼ŒæŠ›å‡ºNullPointerException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    elementData = c.toArray();</span><br><span class="line">    <span class="comment">// å¦‚æœ size != 0</span></span><br><span class="line">    <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// c.toArray å¯èƒ½ä¸æ­£ç¡®çš„ï¼Œä¸è¿”å› Object[]</span></span><br><span class="line">        <span class="comment">// https://bugs.openjdk.java.net/browse/JDK-6260652</span></span><br><span class="line">        <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">            elementData = Arrays.copyOf(</span><br><span class="line">                    elementData, size, Object[].class);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// size == 0</span></span><br><span class="line">        <span class="comment">// å°†EMPTY_ELEMENTDATA èµ‹å€¼ç»™ elementData</span></span><br><span class="line">        <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å°†é›†åˆè½¬æ¢ä¸ºæ•°ç»„çš„æ–¹æ³•</li><li>ä¸ºäº†é˜²æ­¢<code>c.toArray()</code>æ–¹æ³•ä¸æ­£ç¡®çš„æ‰§è¡Œï¼Œå¯¼è‡´æ²¡æœ‰è¿”å›<code>Object[]</code>ï¼Œç‰¹æ®Šåšäº†å¤„ç†</li><li>å¦‚æœæ•°ç»„å¤§å°ç­‰äº<code>0</code>ï¼Œåˆ™ä½¿ç”¨ <code>EMPTY_ELEMENTDATA</code></li></ul><blockquote><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæƒ…å†µä¸‹<code>c.toArray()</code>ä¼šä¸è¿”å›<code>Object[]</code>å‘¢ï¼Ÿ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(<span class="string">"list"</span>));</span><br><span class="line">    <span class="comment">// class java.util.ArrayList</span></span><br><span class="line">    System.out.println(list.getClass());</span><br><span class="line"></span><br><span class="line">    Object[] listArray = list.toArray();</span><br><span class="line">    <span class="comment">// class [Ljava.lang.Object;</span></span><br><span class="line">    System.out.println(listArray.getClass());</span><br><span class="line">    listArray[<span class="number">0</span>] = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    System.out.println();</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; asList = Arrays.asList(<span class="string">"asList"</span>);</span><br><span class="line">    <span class="comment">// class java.util.Arrays$ArrayList</span></span><br><span class="line">    System.out.println(asList.getClass());</span><br><span class="line"></span><br><span class="line">    Object[] asListArray = asList.toArray();</span><br><span class="line">    <span class="comment">// class [Ljava.lang.String;</span></span><br><span class="line">    System.out.println(asListArray.getClass());</span><br><span class="line">    <span class="comment">// java.lang.ArrayStoreException</span></span><br><span class="line">    asListArray[<span class="number">0</span>] = <span class="keyword">new</span> Object();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œ<code>java.util.ArrayList.toArray()</code>æ–¹æ³•ä¼šè¿”å›<code>Object[]</code>æ²¡æœ‰é—®é¢˜ã€‚è€Œ<code>java.util.Arrays</code>çš„ç§æœ‰å†…éƒ¨ç±»ArrayListçš„<code>toArray()</code>æ–¹æ³•å¯èƒ½ä¸è¿”å›<code>Object[]</code>ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</p></blockquote><p>æˆ‘ä»¬çœ‹ArrayListçš„<code>toArray()</code>æ–¹æ³•æºç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object[] toArray() &#123;</span><br><span class="line">    <span class="comment">// ArrayLisyä¸­ elementDataæ˜¯è¿™æ ·å®šä¹‰çš„</span></span><br><span class="line">    <span class="comment">// transient Object[] elementData;</span></span><br><span class="line">    <span class="keyword">return</span> Arrays.copyOf(elementData, size);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨äº†<code>Arrays.copyOf()</code>æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T[] copyOf(T[] original, <span class="keyword">int</span> newLength) &#123;</span><br><span class="line">    <span class="comment">// original.getClass() æ˜¯ class [Ljava.lang.Object</span></span><br><span class="line">    <span class="keyword">return</span> (T[]) copyOf(original, newLength, original.getClass());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>copyOf()</code>çš„å…·ä½“å®ç°ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T,U&gt; T[] copyOf(U[] original, </span><br><span class="line">          <span class="keyword">int</span> newLength, Class&lt;? extends T[]&gt; newType) &#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœnewTypeæ˜¯Object[] copy æ•°ç»„ ç±»å‹å°±æ˜¯ Object </span></span><br><span class="line"><span class="comment">     * å¦åˆ™å°±æ˜¯ newType ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    T[] copy = ((Object)newType == (Object)Object[].class)</span><br><span class="line">        ? (T[]) <span class="keyword">new</span> Object[newLength]</span><br><span class="line">        : (T[]) Array.newInstance(newType.getComponentType(), newLength);</span><br><span class="line">    System.arraycopy(original, <span class="number">0</span>, copy, <span class="number">0</span>,</span><br><span class="line">                     Math.min(original.length, newLength));</span><br><span class="line">    <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬çŸ¥é“ArrayListä¸­<code>elementData</code>å°±æ˜¯<code>Object[]</code>ç±»å‹ï¼Œæ‰€ä»¥ArrayListçš„<code>toArray()</code>æ–¹æ³•å¿…ç„¶ä¼šè¿”å›<code>Object[]</code>ã€‚</p><p>æˆ‘ä»¬å†çœ‹ä¸€ä¸‹<code>java.util.Arrays</code>çš„å†…éƒ¨ArrayListæºç ï¼ˆæˆªå–çš„éƒ¨åˆ†æºç ï¼‰ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">RandomAccess</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// å­˜å‚¨å…ƒç´ çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] a;</span><br><span class="line"></span><br><span class="line">    ArrayList(E[] array) &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥æŠŠæ¥æ”¶çš„æ•°ç»„ èµ‹å€¼ ç»™ a</span></span><br><span class="line">        a = Objects.requireNonNull(array);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * obj ä¸ºç©ºæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * ä¸ä¸ºç©º è¿”å› obj</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">requireNonNull</span><span class="params">(T obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object[] toArray() &#123;</span><br><span class="line">        <span class="comment">// è¿”å› a çš„å…‹éš†å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> a.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ˜¯<code>Arrays.asList()</code>æ–¹æ³•æºç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">asList</span><span class="params">(T... a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸éš¾çœ‹å‡ºæ¥<code>java.util.Arrays</code>çš„å†…éƒ¨ArrayListçš„<code>toArray()</code>æ–¹æ³•ï¼Œæ˜¯æ„é€ æ–¹æ³•æ¥æ”¶ä»€ä¹ˆç±»å‹çš„æ•°ç»„ï¼Œå°±è¿”å›ä»€ä¹ˆç±»å‹çš„æ•°ç»„ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå®é™…ä¸Šè¿”å›çš„æ˜¯Stringç±»å‹çš„æ•°ç»„ï¼Œå†å°†å…¶ä¸­çš„å…ƒç´ èµ‹å€¼æˆ<code>Object</code>ç±»å‹çš„ï¼Œè‡ªç„¶æŠ¥é”™ã€‚</p><p>æˆ‘ä»¬è¿˜æ˜¯ç»§ç»­çœ‹ArrayListå§â€¦</p><h2 id="æ’å…¥æ–¹æ³•"><a href="#æ’å…¥æ–¹æ³•" class="headerlink" title="æ’å…¥æ–¹æ³•"></a>æ’å…¥æ–¹æ³•</h2><h3 id="åœ¨åˆ—è¡¨æœ€åæ·»åŠ æŒ‡å®šå…ƒç´ "><a href="#åœ¨åˆ—è¡¨æœ€åæ·»åŠ æŒ‡å®šå…ƒç´ " class="headerlink" title="åœ¨åˆ—è¡¨æœ€åæ·»åŠ æŒ‡å®šå…ƒç´ "></a>åœ¨åˆ—è¡¨æœ€åæ·»åŠ æŒ‡å®šå…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨åˆ—è¡¨æœ€åæ·»åŠ æŒ‡å®šå…ƒç´ </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e è¦æ·»åŠ çš„æŒ‡å®šå…ƒç´ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¢åŠ  modCount ï¼ï¼</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>); </span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨çˆ¶ç±»<code>AbstractList</code>ä¸Šï¼Œå®šä¹‰äº†<code>modCount</code> å±æ€§ï¼Œç”¨äºè®°å½•æ•°ç»„ä¿®æ”¹çš„æ¬¡æ•°ã€‚</li></ul><h3 id="åœ¨æŒ‡å®šä½ç½®æ·»åŠ æŒ‡å®šå…ƒç´ "><a href="#åœ¨æŒ‡å®šä½ç½®æ·»åŠ æŒ‡å®šå…ƒç´ " class="headerlink" title="åœ¨æŒ‡å®šä½ç½®æ·»åŠ æŒ‡å®šå…ƒç´ "></a>åœ¨æŒ‡å®šä½ç½®æ·»åŠ æŒ‡å®šå…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨æŒ‡å®šä½ç½®æ·»åŠ æŒ‡å®šå…ƒç´ </span></span><br><span class="line"><span class="comment"> * å¦‚æœæŒ‡å®šä½ç½®å·²ç»æœ‰å…ƒç´ ï¼Œå°±å°†è¯¥å…ƒç´ å’Œéšåçš„å…ƒç´ ç§»åŠ¨åˆ°å³é¢ä¸€ä½</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index å¾…æ’å…¥å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element å¾…æ’å…¥çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> å¯èƒ½æŠ›å‡º IndexOutOfBoundsException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    rangeCheckForAdd(index);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¢åŠ  modCount ï¼ï¼</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);</span><br><span class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</span><br><span class="line">                     size - index);</span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥æ–¹æ³•è°ƒç”¨çš„å…¶ä»–ç§æœ‰æ–¹æ³•"><a href="#æ’å…¥æ–¹æ³•è°ƒç”¨çš„å…¶ä»–ç§æœ‰æ–¹æ³•" class="headerlink" title="æ’å…¥æ–¹æ³•è°ƒç”¨çš„å…¶ä»–ç§æœ‰æ–¹æ³•"></a>æ’å…¥æ–¹æ³•è°ƒç”¨çš„å…¶ä»–ç§æœ‰æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—å®¹é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (elementData ==</span><br><span class="line">            DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    ensureExplicitCapacity(</span><br><span class="line">            calculateCapacity(elementData, minCapacity)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å®¹æ–¹æ³•"><a href="#æ‰©å®¹æ–¹æ³•" class="headerlink" title="æ‰©å®¹æ–¹æ³•"></a>æ‰©å®¹æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°ç»„å¯ä»¥åˆ†é…çš„æœ€å¤§size</span></span><br><span class="line"><span class="comment"> * ä¸€äº›è™šæ‹Ÿæœºåœ¨æ•°ç»„ä¸­é¢„ç•™ä¸€äº›header words</span></span><br><span class="line"><span class="comment"> * å¦‚æœå°è¯•åˆ†é…æ›´å¤§çš„sizeï¼Œå¯èƒ½å¯¼è‡´OutOfMemoryError</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¢åŠ å®¹é‡ï¼Œè‡³å°‘ä¿è¯æ¯”minCapacityå¤§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> minCapacity æœŸæœ›çš„æœ€å°å®¹é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æœ‰å¯èƒ½æº¢å‡ºçš„ä»£ç </span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœ€å¤§å®¹é‡è¿”å› Integer.MAX_VALUE</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hugeCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">        Integer.MAX_VALUE :</span><br><span class="line">        MAX_ARRAY_SIZE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é€šå¸¸æƒ…å†µæ–°å®¹é‡æ˜¯åŸæ¥å®¹é‡çš„1.5å€</li><li>å¦‚æœåŸå®¹é‡çš„1.5å€æ¯”<code>minCapacity</code>å°ï¼Œé‚£ä¹ˆå°±æ‰©å®¹åˆ°<code>minCapacity</code></li><li>ç‰¹æ®Šæƒ…å†µæ‰©å®¹åˆ°<code>Integer.MAX_VALUE</code></li></ul><blockquote><p>çœ‹å®Œæ„é€ æ–¹æ³•ã€æ·»åŠ æ–¹æ³•ã€æ‰©å®¹æ–¹æ³•ä¹‹åï¼Œä¸Šæ–‡ç¬¬1ä¸ªé—®é¢˜ç»ˆäºæœ‰äº†ç­”æ¡ˆã€‚åŸæ¥ï¼Œ<code>new ArrayList()</code>ä¼šå°†<code>elementData</code> èµ‹å€¼ä¸º DEFAULTCAPACITY_EMPTY_ELEMENTDATAï¼Œ<code>new ArrayList(0)</code>ä¼šå°†<code>elementData</code> èµ‹å€¼ä¸º EMPTY_ELEMENTDATAï¼ŒEMPTY_ELEMENTDATAæ·»åŠ å…ƒç´ ä¼šæ‰©å®¹åˆ°å®¹é‡ä¸º<code>1</code>ï¼Œè€ŒDEFAULTCAPACITY_EMPTY_ELEMENTDATAæ‰©å®¹ä¹‹åå®¹é‡ä¸º<code>10</code>ã€‚</p></blockquote><p>é€šè¿‡åå°„æˆ‘ä»¬å¯ä»¥éªŒè¯è¿™ä¸€æƒ³æ³•ã€‚å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    printDefaultCapacityList();</span><br><span class="line">    printEmptyCapacityList();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printDefaultCapacityList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ArrayList defaultCapacity = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    System.out.println(</span><br><span class="line">            <span class="string">"default åˆå§‹åŒ–é•¿åº¦ï¼š"</span> + getCapacity(defaultCapacity));</span><br><span class="line"></span><br><span class="line">    defaultCapacity.add(<span class="number">1</span>);</span><br><span class="line">    System.out.println(</span><br><span class="line">            <span class="string">"default add ä¹‹å é•¿åº¦ï¼š"</span> + getCapacity(defaultCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printEmptyCapacityList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ArrayList emptyCapacity = <span class="keyword">new</span> ArrayList(<span class="number">0</span>);</span><br><span class="line">    System.out.println(</span><br><span class="line">            <span class="string">"empty åˆå§‹åŒ–é•¿åº¦ï¼š"</span> + getCapacity(emptyCapacity));</span><br><span class="line"></span><br><span class="line">    emptyCapacity.add(<span class="number">1</span>);</span><br><span class="line">    System.out.println(</span><br><span class="line">            <span class="string">"empty add ä¹‹å é•¿åº¦ï¼š"</span> + getCapacity(emptyCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getCapacity</span><span class="params">(ArrayList&lt;?&gt; arrayList)</span> </span>&#123;</span><br><span class="line">    Class&lt;ArrayList&gt; arrayListClass = ArrayList.class;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è·å– elementData å­—æ®µ</span></span><br><span class="line">        Field field = arrayListClass.getDeclaredField(<span class="string">"elementData"</span>);</span><br><span class="line">        <span class="comment">// å¼€å¯è®¿é—®æƒé™</span></span><br><span class="line">        field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// æŠŠç¤ºä¾‹ä¼ å…¥getï¼Œè·å–å®ä¾‹å­—æ®µelementDataçš„å€¼</span></span><br><span class="line">        Object[] objects = (Object[]) field.get(arrayList);</span><br><span class="line">        <span class="comment">//è¿”å›å½“å‰ArrayListå®ä¾‹çš„å®¹é‡å€¼</span></span><br><span class="line">        <span class="keyword">return</span> objects.length;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="ç§»é™¤æ–¹æ³•"><a href="#ç§»é™¤æ–¹æ³•" class="headerlink" title="ç§»é™¤æ–¹æ³•"></a>ç§»é™¤æ–¹æ³•</h2><h3 id="ç§»é™¤æŒ‡å®šä¸‹æ ‡å…ƒç´ æ–¹æ³•"><a href="#ç§»é™¤æŒ‡å®šä¸‹æ ‡å…ƒç´ æ–¹æ³•" class="headerlink" title="ç§»é™¤æŒ‡å®šä¸‹æ ‡å…ƒç´ æ–¹æ³•"></a>ç§»é™¤æŒ‡å®šä¸‹æ ‡å…ƒç´ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šä¸‹æ ‡ä½ç½®çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * å°†æ‰€æœ‰çš„åç»­å…ƒç´ ï¼Œå‘å·¦ç§»åŠ¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> è¦ç§»é™¤çš„æŒ‡å®šä¸‹æ ‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¿”å›è¢«ç§»é™¤çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ä¸‹æ ‡è¶Šç•Œä¼šæŠ›å‡ºIndexOutOfBoundsException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index);</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    E oldValue = elementData(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">            System.arraycopy(elementData, </span><br><span class="line">                    index+<span class="number">1</span>, elementData, index,  numMoved);</span><br><span class="line">    <span class="comment">// å°†å¼•ç”¨ç½®ç©ºï¼Œè®©GCå›æ”¶</span></span><br><span class="line">    elementData[--size] = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç§»é™¤æŒ‡å®šå…ƒç´ æ–¹æ³•"><a href="#ç§»é™¤æŒ‡å®šå…ƒç´ æ–¹æ³•" class="headerlink" title="ç§»é™¤æŒ‡å®šå…ƒç´ æ–¹æ³•"></a>ç§»é™¤æŒ‡å®šå…ƒç´ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç§»é™¤ç¬¬ä¸€ä¸ªåœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æŒ‡å®šå…ƒç´ </span></span><br><span class="line"><span class="comment"> * å¦‚æœå­˜åœ¨ï¼Œç§»é™¤è¿”å›true</span></span><br><span class="line"><span class="comment"> * å¦åˆ™ï¼Œè¿”å›false</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> o æŒ‡å®šå…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[index] == <span class="keyword">null</span>) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[index])) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç§»é™¤æ–¹æ³•åå­—ã€å‚æ•°çš„ä¸ªæ•°éƒ½ä¸€æ ·ï¼Œä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„ã€‚</p></blockquote><h3 id="ç§æœ‰ç§»é™¤æ–¹æ³•"><a href="#ç§æœ‰ç§»é™¤æ–¹æ³•" class="headerlink" title="ç§æœ‰ç§»é™¤æ–¹æ³•"></a>ç§æœ‰ç§»é™¤æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ç§æœ‰çš„ ç§»é™¤ æ–¹æ³• è·³è¿‡è¾¹ç•Œæ£€æŸ¥ä¸”ä¸è¿”å›ç§»é™¤çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fastRemove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                         numMoved);</span><br><span class="line">    <span class="comment">// å°†å¼•ç”¨ç½®ç©ºï¼Œè®©GCå›æ”¶</span></span><br><span class="line">    elementData[--size] = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŸ¥æ‰¾æ–¹æ³•"><a href="#æŸ¥æ‰¾æ–¹æ³•" class="headerlink" title="æŸ¥æ‰¾æ–¹æ³•"></a>æŸ¥æ‰¾æ–¹æ³•</h2><h3 id="æŸ¥æ‰¾æŒ‡å®šå…ƒç´ çš„æ‰€åœ¨ä½ç½®"><a href="#æŸ¥æ‰¾æŒ‡å®šå…ƒç´ çš„æ‰€åœ¨ä½ç½®" class="headerlink" title="æŸ¥æ‰¾æŒ‡å®šå…ƒç´ çš„æ‰€åœ¨ä½ç½®"></a>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ çš„æ‰€åœ¨ä½ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›æŒ‡å®šå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment"> * å¦‚æœä¸å­˜åœ¨è¯¥å…ƒç´ ï¼Œè¿”å› -1</span></span><br><span class="line"><span class="comment"> * å¦‚æœ o ==null ä¼šç‰¹æ®Šå¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i]==<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥æ‰¾æŒ‡å®šä½ç½®çš„å…ƒç´ "><a href="#æŸ¥æ‰¾æŒ‡å®šä½ç½®çš„å…ƒç´ " class="headerlink" title="æŸ¥æ‰¾æŒ‡å®šä½ç½®çš„å…ƒç´ "></a>æŸ¥æ‰¾æŒ‡å®šä½ç½®çš„å…ƒç´ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  index æŒ‡å®šå…ƒç´ çš„ä½ç½® </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> indexè¶Šç•Œä¼šæŠ›å‡ºIndexOutOfBoundsException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> elementData(index);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¯¥æ–¹æ³•ç›´æ¥è¿”å›<code>elementData</code>æ•°ç»„æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ ï¼Œæ•ˆç‡è¿˜æ˜¯å¾ˆé«˜çš„ã€‚æ‰€ä»¥ArrayListï¼Œ<code>for</code>å¾ªç¯éå†æ•ˆç‡ä¹Ÿæ˜¯å¾ˆé«˜çš„ã€‚</p></blockquote><h2 id="åºåˆ—åŒ–æ–¹æ³•"><a href="#åºåˆ—åŒ–æ–¹æ³•" class="headerlink" title="åºåˆ—åŒ–æ–¹æ³•"></a>åºåˆ—åŒ–æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†ArrayLisyå®ä¾‹çš„çŠ¶æ€ä¿å­˜åˆ°ä¸€ä¸ªæµé‡Œé¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException</span>&#123;</span><br><span class="line">    <span class="comment">// Write out element count, and any hidden stuff</span></span><br><span class="line">    <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">    s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Write out size as capacity for behavioural compatibility with clone()</span></span><br><span class="line">    s.writeInt(size);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰ç…§é¡ºåºå†™å…¥æ‰€æœ‰çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">        s.writeObject(elementData[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ååºåˆ—åŒ–æ–¹æ³•"><a href="#ååºåˆ—åŒ–æ–¹æ³•" class="headerlink" title="ååºåˆ—åŒ–æ–¹æ³•"></a>ååºåˆ—åŒ–æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®ä¸€ä¸ªæµ(å‚æ•°)é‡æ–°ç”Ÿæˆä¸€ä¸ªArrayList</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">    elementData = EMPTY_ELEMENTDATA;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read in size, and any hidden stuff</span></span><br><span class="line">    s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read in capacity</span></span><br><span class="line">    s.readInt();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// be like clone(), allocate array based upon size not capacity</span></span><br><span class="line">        ensureCapacityInternal(size);</span><br><span class="line"></span><br><span class="line">        Object[] a = elementData;</span><br><span class="line">        <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">            a[i] = s.readObject();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>çœ‹å®Œåºåˆ—åŒ–ï¼Œååºåˆ—åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬ç»ˆäºåˆèƒ½å›ç­”å¼€ç¯‡çš„ç¬¬äºŒä¸ªé—®é¢˜äº†ã€‚<code>elementData</code>ä¹‹æ‰€ä»¥ç”¨<code>transient</code>ä¿®é¥°ï¼Œæ˜¯å› ä¸ºJDKä¸æƒ³å°†æ•´ä¸ª<code>elementData</code>éƒ½åºåˆ—åŒ–æˆ–è€…ååºåˆ—åŒ–ï¼Œè€Œåªæ˜¯å°†<code>size</code>å’Œå®é™…å­˜å‚¨çš„å…ƒç´ åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ï¼Œä»è€ŒèŠ‚çœç©ºé—´å’Œæ—¶é—´ã€‚</p></blockquote><h2 id="åˆ›å»ºå­æ•°ç»„"><a href="#åˆ›å»ºå­æ•°ç»„" class="headerlink" title="åˆ›å»ºå­æ•°ç»„"></a>åˆ›å»ºå­æ•°ç»„</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;E&gt; <span class="title">subList</span><span class="params">(<span class="keyword">int</span> fromIndex, <span class="keyword">int</span> toIndex)</span> </span>&#123;</span><br><span class="line">    subListRangeCheck(fromIndex, toIndex, size);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SubList(<span class="keyword">this</span>, <span class="number">0</span>, fromIndex, toIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ç®€çŸ­ç‰ˆçš„<code>SubList</code>ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">SubList</span> <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">RandomAccess</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AbstractList&lt;E&gt; parent;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> parentOffset;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> offset;</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    SubList(AbstractList&lt;E&gt; parent,</span><br><span class="line">            <span class="keyword">int</span> offset, <span class="keyword">int</span> fromIndex, <span class="keyword">int</span> toIndex) &#123;</span><br><span class="line">        <span class="keyword">this</span>.parent = parent;</span><br><span class="line">        <span class="keyword">this</span>.parentOffset = fromIndex;</span><br><span class="line">        <span class="keyword">this</span>.offset = offset + fromIndex;</span><br><span class="line">        <span class="keyword">this</span>.size = toIndex - fromIndex;</span><br><span class="line">        <span class="keyword">this</span>.modCount = ArrayList.<span class="keyword">this</span>.modCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E e)</span> </span>&#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line">        checkForComodification();</span><br><span class="line">        E oldValue = ArrayList.<span class="keyword">this</span>.elementData(offset + index);</span><br><span class="line">        ArrayList.<span class="keyword">this</span>.elementData[offset + index] = e;</span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çœç•¥ä»£ç ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>SubListçš„set()æ–¹æ³•ï¼Œ<strong>æ˜¯ç›´æ¥ä¿®æ”¹ArrayList</strong>ä¸­<code>elementData</code>æ•°ç»„çš„ï¼Œä½¿ç”¨ä¸­åº”è¯¥æ³¨æ„</li><li>SubListæ˜¯æ²¡æœ‰å®ç°<code>Serializable</code>æ¥å£çš„ï¼Œ<strong>æ˜¯ä¸èƒ½åºåˆ—åŒ–çš„</strong></li></ul><h2 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h2><h3 id="åˆ›å»ºè¿­ä»£å™¨æ–¹æ³•"><a href="#åˆ›å»ºè¿­ä»£å™¨æ–¹æ³•" class="headerlink" title="åˆ›å»ºè¿­ä»£å™¨æ–¹æ³•"></a>åˆ›å»ºè¿­ä»£å™¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Itr();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Itrå±æ€§"><a href="#Itrå±æ€§" class="headerlink" title="Itrå±æ€§"></a>Itrå±æ€§</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‹ä¸€ä¸ªè¦è¿”å›çš„å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="keyword">int</span> cursor;</span><br><span class="line"><span class="comment">// æœ€åä¸€ä¸ªè¦è¿”å›å…ƒç´ çš„ä¸‹æ ‡ æ²¡æœ‰å…ƒç´ è¿”å› -1</span></span><br><span class="line"><span class="keyword">int</span> lastRet = -<span class="number">1</span>;</span><br><span class="line"><span class="comment">// æœŸæœ›çš„ modCount</span></span><br><span class="line"><span class="keyword">int</span> expectedModCount = modCount;</span><br></pre></td></tr></table></figure><h3 id="Itrçš„hasNext-æ–¹æ³•"><a href="#Itrçš„hasNext-æ–¹æ³•" class="headerlink" title="Itrçš„hasNext() æ–¹æ³•"></a>Itrçš„hasNext() æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cursor != size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Itrçš„next-æ–¹æ³•"><a href="#Itrçš„next-æ–¹æ³•" class="headerlink" title="Itrçš„next()æ–¹æ³•"></a>Itrçš„next()æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    checkForComodification();</span><br><span class="line">    <span class="keyword">int</span> i = cursor;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= size)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">    Object[] elementData = ArrayList.<span class="keyword">this</span>.elementData;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= elementData.length)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    cursor = i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (E) elementData[lastRet = i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨è¿­ä»£çš„æ—¶å€™ï¼Œä¼šæ ¡éªŒ<code>modCount</code>æ˜¯å¦ç­‰äº<code>expectedModCount</code>ï¼Œä¸ç­‰äºå°±ä¼šæŠ›å‡ºè‘—åçš„<code>ConcurrentModificationException</code>å¼‚å¸¸ã€‚ä»€ä¹ˆæ—¶å€™ä¼šæŠ›å‡º<code>ConcurrentModificationException</code>ï¼Ÿ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ArrayList arrayList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        arrayList.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">    remove(arrayList);</span><br><span class="line">    System.out.println(arrayList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line">    Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        Integer number = iterator.next();</span><br><span class="line">        <span class="keyword">if</span> (number % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æŠ›å‡ºConcurrentModificationExceptionå¼‚å¸¸</span></span><br><span class="line">            list.remove(number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é‚£æ€ä¹ˆå†™æ‰èƒ½ä¸æŠ›å‡º<code>ConcurrentModificationException</code>ï¼Ÿå¾ˆç®€å•ï¼Œå°†<code>list.remove(number);</code>æ¢æˆ<code>iterator.remove();</code>å³å¯ã€‚whyï¼Ÿè¯·çœ‹Itrçš„<code>remove()</code>æºç â€¦</p></blockquote><h3 id="Itrçš„remove-æ–¹æ³•"><a href="#Itrçš„remove-æ–¹æ³•" class="headerlink" title="Itrçš„remove()æ–¹æ³•"></a>Itrçš„remove()æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</span><br><span class="line">    checkForComodification();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ArrayList.<span class="keyword">this</span>.remove(lastRet);</span><br><span class="line">        cursor = lastRet;</span><br><span class="line">        lastRet = -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// ç§»é™¤ä¹‹åå°†modCount é‡æ–°èµ‹å€¼ç»™ expectedModCount</span></span><br><span class="line">        expectedModCount = modCount;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸå› å°±æ˜¯å› ä¸ºItrçš„<code>remove()</code>æ–¹æ³•ï¼Œç§»é™¤ä¹‹åå°†<code>modCount</code>é‡æ–°èµ‹å€¼ç»™ <code>expectedModCount</code>ã€‚è¿™å°±æ˜¯æºç ï¼Œä¸ç®¡å•çº¿ç¨‹è¿˜æ˜¯å¤šçº¿ç¨‹ï¼Œåªè¦è¿åäº†è§„åˆ™ï¼Œå°±ä¼šæŠ›å¼‚å¸¸ã€‚</p><blockquote><p>æºç çœ‹çš„å·®ä¸å¤šäº†ï¼Œå¼€ç¯‡çš„é—®é¢˜å´è¿˜å‰©ä¸€ä¸ªï¼åˆ°åº•ä¸ºä»€ä¹ˆ<code>elementData</code>æ²¡æœ‰ç”¨<code>private</code>ä¿®é¥°å‘¢ï¼Ÿ</p></blockquote><p>æˆ‘ä»¬çŸ¥é“çš„ï¼Œ<code>private</code>ä¿®é¥°çš„å˜é‡ï¼Œå†…éƒ¨ç±»ä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°çš„ã€‚éš¾é“æ³¨é‡Šä¸­<code>non-private to simplify nested class access</code>çš„è¿™å¥è¯æœ‰æ¯›ç—…ï¼Ÿ</p><p>å½“æˆ‘ä»¬çœ‹è¡¨é¢çœ‹ä¸åˆ°ä»€ä¹ˆä¸œè¥¿çš„æ—¶å€™ï¼Œä¸å¦¨çœ‹ä¸€ä¸‹åº•å±‚ã€‚</p><p>æµ‹è¯•ç±»ä»£ç ï¼š<br><img src="https://img.iisheng.cn/origin-code.png" alt></p><p>ä¸€é¡¿<code>javac</code>ã€<code>javap</code>ä¹‹åï¼ˆä½¿ç”¨JDK8ï¼‰ï¼š<br><img src="https://img.iisheng.cn/javap-class.png" alt></p><p>å†ä¸€é¡¿<code>javac</code>ã€<code>javap</code>ä¹‹åï¼ˆä½¿ç”¨JDK11ï¼‰ï¼š<br><img src="https://img.iisheng.cn/javap-jdk11-class.png" alt></p><p>è™½ç„¶å­—èŠ‚ç æŒ‡ä»¤æˆ‘è¿˜çœ‹ä¸å¤ªæ‡‚ï¼Œä½†æ˜¯æˆ‘èƒ½å“å‡ºæ¥ï¼Œæ³¨é‡Šæ˜¯æ²¡æ¯›ç—…çš„ï¼Œ<code>private</code>ä¿®é¥°çš„ç¡®ä¼šå½±å“å†…éƒ¨ç±»çš„è®¿é—®ã€‚</p><h2 id="ArrayListç±»æ³¨é‡Šç¿»è¯‘"><a href="#ArrayListç±»æ³¨é‡Šç¿»è¯‘" class="headerlink" title="ArrayListç±»æ³¨é‡Šç¿»è¯‘"></a>ArrayListç±»æ³¨é‡Šç¿»è¯‘</h2><p>ç±»æ³¨é‡Šè¿˜æ˜¯è¦çœ‹çš„ï¼Œèƒ½ç»™æˆ‘ä»¬ä¸€ä¸ªæ•´ä½“çš„äº†è§£è¿™ä¸ªç±»ã€‚æˆ‘å°†ArrayListçš„ç±»æ³¨é‡Šå¤§æ¦‚ç¿»è¯‘æ•´ç†äº†ä¸€ä¸‹ï¼š</p><ul><li>ArrayListæ˜¯å®ç°<code>List</code>æ¥å£çš„å¯è‡ªåŠ¨æ‰©å®¹çš„æ•°ç»„ã€‚å®ç°äº†æ‰€æœ‰çš„<code>List</code>æ“ä½œï¼Œå…è®¸æ‰€æœ‰çš„å…ƒç´ ï¼ŒåŒ…æ‹¬<code>null</code>å€¼ã€‚</li><li>ArrayListå¤§è‡´å’ŒVectorç›¸åŒï¼Œé™¤äº†ArrayListæ˜¯éåŒæ­¥çš„ã€‚</li><li><code>size</code> <code>isEmpty</code> <code>get</code> <code>set</code> <code>iterator</code> å’Œ <code>listIterator</code> æ–¹æ³•æ—¶é—´å¤æ‚åº¦æ˜¯<code>O(1)</code>ï¼Œå¸¸é‡æ—¶é—´ã€‚å…¶ä»–æ–¹æ³•æ˜¯<code>O(n)</code>ï¼Œçº¿æ€§æ—¶é—´ã€‚</li><li>æ¯ä¸€ä¸ªArrayListå®ä¾‹éƒ½æœ‰ä¸€ä¸ª<code>capacity</code>ï¼ˆå®¹é‡ï¼‰ã€‚<code>capacity</code>æ˜¯ç”¨äºå­˜å‚¨åˆ—è¡¨ä¸­å…ƒç´ çš„æ•°ç»„çš„å¤§å°ã€‚<code>capacity</code>è‡³å°‘å’Œåˆ—è¡¨çš„å¤§å°ä¸€æ ·å¤§ã€‚</li><li>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ArrayListçš„å®ä¾‹ï¼Œå¹¶ä¸”è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ä¼šä¿®æ”¹ï¼Œå¿…é¡»åœ¨å¤–éƒ¨ä¿è¯ArrayListçš„åŒæ­¥ã€‚ä¿®æ”¹åŒ…æ‹¬æ·»åŠ åˆ é™¤æ‰©å®¹ç­‰æ“ä½œï¼Œä»…ä»…è®¾ç½®å€¼ä¸åŒ…æ‹¬ã€‚è¿™ç§åœºæ™¯å¯ä»¥ç”¨å…¶ä»–çš„ä¸€äº›å°è£…å¥½çš„åŒæ­¥çš„<code>list</code>ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„<code>Object</code>ï¼ŒArrayListåº”è¯¥ç”¨<code>Collections.synchronizedList</code>åŒ…è£…èµ·æ¥æœ€å¥½åœ¨åˆ›å»ºçš„æ—¶å€™å°±åŒ…è£…èµ·æ¥ï¼Œæ¥ä¿è¯åŒæ­¥è®¿é—®ã€‚</li><li><code>iterator()</code>å’Œ<code>listIterator(int)</code>æ–¹æ³•æ˜¯<code>fail-fast</code>çš„ï¼Œå¦‚æœåœ¨è¿­ä»£å™¨åˆ›å»ºä¹‹åï¼Œåˆ—è¡¨è¿›è¡Œç»“æ„åŒ–ä¿®æ”¹ï¼Œè¿­ä»£å™¨ä¼šæŠ›å‡º<code>ConcurrentModificationException</code>ã€‚</li><li>é¢å¯¹å¹¶å‘ä¿®æ”¹ï¼Œè¿­ä»£å™¨å¿«é€Ÿå¤±è´¥ã€æ¸…ç†ï¼Œè€Œä¸æ˜¯åœ¨æœªçŸ¥çš„æ—¶é—´ä¸ç¡®å®šçš„æƒ…å†µä¸‹å†’é™©ã€‚è¯·æ³¨æ„ï¼Œå¿«é€Ÿå¤±è´¥è¡Œä¸ºä¸èƒ½è¢«ä¿è¯ã€‚é€šå¸¸æ¥è®²ï¼Œä¸èƒ½åŒæ­¥è¿›è¡Œçš„å¹¶å‘ä¿®æ”¹å‡ ä¹ä¸å¯èƒ½åšä»»ä½•ä¿è¯ã€‚å› æ­¤ï¼Œå†™ä¾èµ–è¿™ä¸ªå¼‚å¸¸çš„ç¨‹åºçš„ä»£ç æ˜¯é”™è¯¯çš„ï¼Œå¿«é€Ÿå¤±è´¥è¡Œä¸ºåº”è¯¥ä»…ä»…ç”¨äºé˜²æ­¢<code>bug</code>ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>ArrayListåº•å±‚çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„</li><li>ArrayListå¯ä»¥è‡ªåŠ¨æ‰©å®¹ï¼Œä¸ä¼ åˆå§‹å®¹é‡æˆ–è€…åˆå§‹å®¹é‡æ˜¯<code>0</code>ï¼Œéƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºæ•°ç»„ï¼Œä½†æ˜¯å¦‚æœæ·»åŠ å…ƒç´ ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å®¹ï¼Œæ‰€ä»¥ï¼Œåˆ›å»ºArrayListçš„æ—¶å€™ï¼Œç»™åˆå§‹å®¹é‡æ˜¯å¿…è¦çš„</li><li><code>Arrays.asList()</code>æ–¹æ³•è¿”å›çš„æ˜¯çš„<code>Arrays</code>å†…éƒ¨çš„ArrayListï¼Œç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„</li><li><code>subList()</code>è¿”å›å†…éƒ¨ç±»ï¼Œä¸èƒ½åºåˆ—åŒ–ï¼Œå’ŒArrayListå…±ç”¨åŒä¸€ä¸ªæ•°ç»„</li><li>è¿­ä»£åˆ é™¤è¦ç”¨ï¼Œè¿­ä»£å™¨çš„<code>remove</code>æ–¹æ³•ï¼Œæˆ–è€…å¯ä»¥ç”¨å€’åºçš„<code>for</code>å¾ªç¯</li><li>ArrayListé‡å†™äº†åºåˆ—åŒ–ã€ååºåˆ—åŒ–æ–¹æ³•ï¼Œé¿å…åºåˆ—åŒ–ã€ååºåˆ—åŒ–å…¨éƒ¨æ•°ç»„ï¼Œæµªè´¹æ—¶é—´å’Œç©ºé—´</li><li><code>elementData</code>ä¸ä½¿ç”¨<code>private</code>ä¿®é¥°ï¼Œå¯ä»¥ç®€åŒ–å†…éƒ¨ç±»çš„è®¿é—®</li></ul><p>æºç ç³»åˆ—ç¬¬ä¸€ç¯‡ï¼Œä¸€ä¸å°å¿ƒå°±å†™çš„æœ‰ç‚¹é•¿ã€‚ä½†æ˜¯æ‡µæ‡‚åˆ°æ·±åˆ»çš„è¿‡ç¨‹è¿˜æ˜¯æŒºè€äººå¯»å‘³çš„ã€‚æ–‡ç« ä¸­æ²¡æœ‰å±•å¼€çš„ç‚¹ï¼Œæˆ–è€…ä½ æœ‰ä»€ä¹ˆå…¶ä»–å¥½å¥‡çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚æˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« å†è§â€¦</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜¤æºç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ArrayList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç¯‡æ–‡ç« æŒæ¡Git</title>
      <link href="/2020/02/28/git/"/>
      <url>/2020/02/28/git/</url>
      
        <content type="html"><![CDATA[<h3 id="Gitç®€å•ä»‹ç»"><a href="#Gitç®€å•ä»‹ç»" class="headerlink" title="Gitç®€å•ä»‹ç»"></a>Gitç®€å•ä»‹ç»</h3><p>Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œæœ€åˆç”±Linus Torvaldsåˆ›ä½œï¼Œäº2005å¹´ä»¥GPLå‘å¸ƒã€‚æœ€åˆç›®çš„æ˜¯ä¸ºæ›´å¥½åœ°ç®¡ç†Linuxå†…æ ¸å¼€å‘è€Œè®¾è®¡ã€‚</p><a id="more"></a><h3 id="Gitæ–‡ä»¶çŠ¶æ€å˜åŒ–å›¾è§£"><a href="#Gitæ–‡ä»¶çŠ¶æ€å˜åŒ–å›¾è§£" class="headerlink" title="Gitæ–‡ä»¶çŠ¶æ€å˜åŒ–å›¾è§£"></a>Gitæ–‡ä»¶çŠ¶æ€å˜åŒ–å›¾è§£</h3><p><img src="https://img.iisheng.cn/lifecycle.png" alt></p><h3 id="Gitå„ä¸ªåŒºåŸŸæµç¨‹å›¾è§£"><a href="#Gitå„ä¸ªåŒºåŸŸæµç¨‹å›¾è§£" class="headerlink" title="Gitå„ä¸ªåŒºåŸŸæµç¨‹å›¾è§£"></a>Gitå„ä¸ªåŒºåŸŸæµç¨‹å›¾è§£</h3><p><img src="https://img.iisheng.cn/git-area.png" alt></p><ul><li>Workspaceï¼šå·¥ä½œåŒº</li><li>Stagingï¼šæš‚å­˜åŒº</li><li>Local Repositoryï¼šæœ¬åœ°ä»“åº“ï¼ˆå¯ä¿®æ”¹ï¼‰</li><li>Local Remote Repositoryï¼šæœ¬åœ°è¿œç¨‹ä»“åº“ï¼ˆæœ¬åœ°çš„è¿œç¨‹ä»“åº“çš„é•œåƒï¼Œä¸å¯ä¿®æ”¹ï¼‰</li><li>Remoteï¼šè¿œç¨‹ä»“åº“</li></ul><h3 id="Gitç®€å•å‘½ä»¤"><a href="#Gitç®€å•å‘½ä»¤" class="headerlink" title="Gitç®€å•å‘½ä»¤"></a>Gitç®€å•å‘½ä»¤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªgitä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å¼€gitä»“åº“å›¾å½¢ç•Œé¢</span></span><br><span class="line">gitk</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºæ‰€æœ‰å˜æ›´ä¿¡æ¯</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ‰€æœ‰Untracked files</span></span><br><span class="line">git clean -fd</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰æ›´æ–°</span></span><br><span class="line">git fetch remote</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰æ›´æ–°ï¼Œå¹¶ä¸”Merge</span></span><br><span class="line">git pull romote branch-name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹ä¸Šæ¬¡commit id</span></span><br><span class="line">git rev-parse HEAD </span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">git merge branch-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æœ€è¿‘çš„ä¸€æ¬¡commitæ‰“åŒ…åˆ°patchæ–‡ä»¶ä¸­</span></span><br><span class="line">git format-patch HEAD^ </span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†patchæ–‡ä»¶ æ·»åŠ åˆ°æœ¬åœ°ä»“åº“</span></span><br><span class="line">git am  patch-file</span><br></pre></td></tr></table></figure><h3 id="Gitå¸¸ç”¨å‘½ä»¤"><a href="#Gitå¸¸ç”¨å‘½ä»¤" class="headerlink" title="Gitå¸¸ç”¨å‘½ä»¤"></a>Gitå¸¸ç”¨å‘½ä»¤</h3><h4 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†è¿œç¨‹gitä»“åº“å…‹éš†åˆ°æœ¬åœ°</span></span><br><span class="line">git clone url</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†è¿œç¨‹gitä»“åº“å…‹éš†åˆ°æœ¬åœ°</span></span><br><span class="line">git clone -b branch url</span><br></pre></td></tr></table></figure><h4 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†ä¿®æ”¹è¿‡ï¼Œæœªaddåˆ°StagingåŒºçš„æ–‡ä»¶ï¼Œæš‚æ—¶å­˜å‚¨èµ·æ¥</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¢å¤ä¹‹å‰stashå­˜å‚¨çš„å†…å®¹</span></span><br><span class="line">git stash apply</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿å­˜stash å¹¶å†™message</span></span><br><span class="line">git stash save <span class="string">"stash test"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹stashäº†å“ªäº›å­˜å‚¨</span></span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†stash@&#123;1&#125;å­˜å‚¨çš„å†…å®¹è¿˜åŸåˆ°å·¥ä½œåŒº</span></span><br><span class="line">git stash apply stash@&#123;<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤stash@&#123;1&#125;å­˜å‚¨çš„å†…å®¹</span></span><br><span class="line">git stash drop stash@&#123;<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„stash</span></span><br><span class="line">git stash clear</span><br></pre></td></tr></table></figure><h4 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®gitå›¾å½¢ç•Œé¢ç¼–ç ä¸ºutf-8</span></span><br><span class="line">git config --global gui.encoding=utf-<span class="number">8</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å…¨å±€æäº¤ä»£ç çš„ç”¨æˆ·å </span></span><br><span class="line">git config --global user.name name  </span><br><span class="line"><span class="comment">// è®¾ç½®å…¨å±€æäº¤ä»£ç æ—¶çš„é‚®ç®±</span></span><br><span class="line">git config --global user.email email</span><br><span class="line"><span class="comment">// è®¾ç½®å½“å‰é¡¹ç›®æäº¤ä»£ç çš„ç”¨æˆ·å </span></span><br><span class="line">git config user.name name</span><br></pre></td></tr></table></figure><h4 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote -v  </span><br><span class="line"></span><br><span class="line"><span class="comment">//  å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote add name url</span><br></pre></td></tr></table></figure><h4 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ æ‰€æœ‰çš„ä¿®æ”¹åˆ°StagingåŒº</span></span><br><span class="line">git add .</span><br><span class="line">git add --all  </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°StagingåŒº</span></span><br><span class="line">git add file   </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å¤šä¸ªä¿®æ”¹çš„æ–‡ä»¶åˆ°StagingåŒº</span></span><br><span class="line">git add file1 file2   </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ä¿®æ”¹çš„ç›®å½•åˆ°StagingåŒº</span></span><br><span class="line">git add dir</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æ‰€æœ‰srcç›®å½•ä¸‹mainå¼€å¤´çš„æ‰€æœ‰æ–‡ä»¶åˆ°StagingåŒº    </span></span><br><span class="line">git add src/main*</span><br></pre></td></tr></table></figure><h4 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æäº¤StagingåŒºçš„ä»£ç åˆ°æœ¬åœ°ä»“åº“åŒº</span></span><br><span class="line">git commit -m <span class="string">"message"</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment">// æäº¤Stagingä¸­åœ¨æŒ‡å®šæ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“åŒº</span></span><br><span class="line">git commit file1 file2 -m <span class="string">"message"</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–°çš„ä¸€æ¬¡commitï¼Œæ¥è¦†ç›–ä¸Šä¸€æ¬¡commit</span></span><br><span class="line">git commit --amend -m <span class="string">"message"</span></span><br></pre></td></tr></table></figure><h4 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ—å‡ºæœ¬åœ°æ‰€æœ‰åˆ†æ”¯</span></span><br><span class="line">git branch   </span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ—å‡ºæœ¬åœ°æ‰€æœ‰åˆ†æ”¯ å¹¶æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤çš„å“ˆå¸Œå€¼</span></span><br><span class="line">git branch -v</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨-v çš„åŸºç¡€ä¸Š å¹¶ä¸”æ˜¾ç¤ºä¸Šæ¸¸åˆ†æ”¯çš„åå­—</span></span><br><span class="line">git branch -vv</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ—å‡ºä¸Šæ¸¸æ‰€æœ‰åˆ†æ”¯</span></span><br><span class="line">git branch -r  </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch branch-name  </span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤åˆ†æ”¯</span></span><br><span class="line">git branch -d branch-name   </span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®åˆ†æ”¯ä¸Šæ¸¸</span></span><br><span class="line">git branch --set-upstream-to origin/master</span><br></pre></td></tr></table></figure><h4 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæœ¬åœ°åˆ†æ”¯å¹¶å…³è”è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git checkout -b local-branch origin/remote-branch</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸”åˆ‡æ¢åˆ°æ–°åˆ†æ”¯</span></span><br><span class="line">git checkout -b branch-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯</span></span><br><span class="line">git checkout branch-name  </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’¤é”€å·¥ä½œåŒºæ–‡ä»¶çš„ä¿®æ”¹ï¼Œè·Ÿä¸Šæ¬¡Commitä¸€æ ·</span></span><br><span class="line">git checkout commit-file</span><br></pre></td></tr></table></figure><h4 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå¸¦æœ‰è¯´æ˜çš„æ ‡ç­¾</span></span><br><span class="line">git tag -a v1.4 -m <span class="string">'my version 1.4'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  æ‰“æ ‡ç­¾</span></span><br><span class="line">git tag tag-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾</span></span><br><span class="line">git tag </span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™æŒ‡å®šcommitæ‰“æ ‡ç­¾</span></span><br><span class="line">git tag tag-name commit-id</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ ‡ç­¾</span></span><br><span class="line">git tag -d tag-name</span><br></pre></td></tr></table></figure><h4 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git push origin :master   </span><br><span class="line"></span><br><span class="line"><span class="comment">//  åˆ é™¤è¿œç¨‹æ ‡ç­¾</span></span><br><span class="line">git push origin --delete tag tag-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šä¼ æœ¬åœ°ä»“åº“åˆ°è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git push remote branch-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git push remote branch-name --force</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">git push remote --all  </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨é€æ‰€æœ‰æ ‡ç­¾</span></span><br><span class="line">git push --tags</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨é€æŒ‡å®šæ ‡ç­¾</span></span><br><span class="line">git push origin tag-name</span><br><span class="line"></span><br><span class="line"><span class="comment">//  åˆ é™¤è¿œç¨‹æ ‡ç­¾ï¼ˆéœ€è¦å…ˆåˆ é™¤æœ¬åœ°æ ‡ç­¾ï¼‰</span></span><br><span class="line">git push origin :refs/tags/tag-name</span><br></pre></td></tr></table></figure><h4 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†æœªcommitçš„æ–‡ä»¶ç§»å‡ºStagingåŒº</span></span><br><span class="line">git reset HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡ç½®StagingåŒºä¸ä¸Šæ¬¡commitçš„ä¸€æ ·</span></span><br><span class="line">git reset --hard  </span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡ç½®Commitä»£ç å’Œè¿œç¨‹åˆ†æ”¯ä»£ç ä¸€æ ·</span></span><br><span class="line">git reset --hard origin/master</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›é€€åˆ°ä¸Šä¸ªcommit</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›é€€åˆ°å‰3æ¬¡æäº¤ä¹‹å‰ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå›é€€åˆ°næ¬¡æäº¤ä¹‹å‰</span></span><br><span class="line">git reset --hard HEAD~<span class="number">3</span></span><br><span class="line"></span><br><span class="line">å›é€€åˆ°æŒ‡å®šcommit</span><br><span class="line">git reset --hard commit-id</span><br></pre></td></tr></table></figure><h4 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æ–‡ä»¶åœ¨å·¥ä½œåŒºå’Œæš‚å­˜åŒºåŒºåˆ«</span></span><br><span class="line">git diff file-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“åŒºåˆ«</span></span><br><span class="line">git diff --cached  file-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æ–‡ä»¶å’Œå¦ä¸€ä¸ªåˆ†æ”¯çš„åŒºåˆ«</span></span><br><span class="line">git diff branch-name file-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹ä¸¤æ¬¡æäº¤çš„åŒºåˆ«</span></span><br><span class="line">git diff commit-id commit-id</span><br></pre></td></tr></table></figure><h4 id="git-show"><a href="#git-show" class="headerlink" title="git show"></a>git show</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æŒ‡å®šæ ‡ç­¾çš„æäº¤ä¿¡æ¯</span></span><br><span class="line">git show tag-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹å…·ä½“çš„æŸæ¬¡æ”¹åŠ¨</span></span><br><span class="line">git show commit-id</span><br></pre></td></tr></table></figure><h4 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹è¯¥æ–‡ä»¶çš„æ”¹åŠ¨å†å²</span></span><br><span class="line">git log --pretty=oneline file</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›¾å½¢åŒ–æŸ¥çœ‹å†å²æäº¤</span></span><br><span class="line">git log --graph --pretty=oneline --abbrev-commit</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»Ÿè®¡ä»“åº“æäº¤æ’åå‰5</span></span><br><span class="line">git log --pretty=<span class="string">'%aN'</span> | sort | uniq -c | sort -k1 -n -r | head -n <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æŒ‡å®šç”¨æˆ·æ·»åŠ ä»£ç è¡Œæ•°ï¼Œå’Œåˆ é™¤ä»£ç è¡Œæ•°</span></span><br><span class="line">git log --author=<span class="string">"iisheng"</span> --pretty=tformat: --numstat | awk <span class="string">'&#123; add += $1 ; subs += $2 &#125; END &#123; printf "added lines: %s removed lines : %s \n",add,subs &#125;'</span></span><br></pre></td></tr></table></figure><h4 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†æŒ‡å®šåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">git rebase branch-name</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œcommit id å°†rebase åœç•™åœ¨æŒ‡å®šcommit å¤„</span></span><br><span class="line">git rebase -i commit-id</span><br></pre></td></tr></table></figure><h4 id="git-restore"><a href="#git-restore" class="headerlink" title="git restore"></a>git restore</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¢å¤ç¬¬ä¸€æ¬¡add çš„æ–‡ä»¶ï¼ŒåŒ git rm --cached</span></span><br><span class="line">git restore --staged file</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤stagingåŒºçš„æ–‡ä»¶ï¼ŒåŒ git checkout</span></span><br><span class="line">git restore file</span><br></pre></td></tr></table></figure><h4 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’¤é”€å‰ä¸€æ¬¡commit</span></span><br><span class="line">git revert HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’¤é”€å‰å‰ä¸€æ¬¡commit</span></span><br><span class="line">git revert HEAD^</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’¤é”€æŒ‡å®šæŸæ¬¡commit</span></span><br><span class="line">git revert commit-id</span><br></pre></td></tr></table></figure><h3 id="Gitå°æŠ€å·§"><a href="#Gitå°æŠ€å·§" class="headerlink" title="Gitå°æŠ€å·§"></a>Gitå°æŠ€å·§</h3><h4 id="Gitå‘½ä»¤ä¸èƒ½è‡ªåŠ¨è¡¥å…¨ï¼Ÿï¼ˆMacç‰ˆï¼‰"><a href="#Gitå‘½ä»¤ä¸èƒ½è‡ªåŠ¨è¡¥å…¨ï¼Ÿï¼ˆMacç‰ˆï¼‰" class="headerlink" title="Gitå‘½ä»¤ä¸èƒ½è‡ªåŠ¨è¡¥å…¨ï¼Ÿï¼ˆMacç‰ˆï¼‰"></a>Gitå‘½ä»¤ä¸èƒ½è‡ªåŠ¨è¡¥å…¨ï¼Ÿï¼ˆMacç‰ˆï¼‰</h4><p>å®‰è£…<code>bash-completion</code></p><p><code>brew install bash-completion</code></p><p>æ·»åŠ  bash-completion åˆ°<code>~/.bash_profile</code>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f $(brew --prefix)/etc/bash_completion ]; then</span><br><span class="line">   . $(brew --prefix)/etc/bash_completion</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h4 id="ä»£ç æ²¡å†™å®Œï¼Œçªç„¶è¦åˆ‡æ¢åˆ°åˆ«çš„åˆ†æ”¯æ€ä¹ˆåŠï¼Ÿ"><a href="#ä»£ç æ²¡å†™å®Œï¼Œçªç„¶è¦åˆ‡æ¢åˆ°åˆ«çš„åˆ†æ”¯æ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="ä»£ç æ²¡å†™å®Œï¼Œçªç„¶è¦åˆ‡æ¢åˆ°åˆ«çš„åˆ†æ”¯æ€ä¹ˆåŠï¼Ÿ"></a>ä»£ç æ²¡å†™å®Œï¼Œçªç„¶è¦åˆ‡æ¢åˆ°åˆ«çš„åˆ†æ”¯æ€ä¹ˆåŠï¼Ÿ</h4><p>æš‚å­˜æœªæäº¤çš„ä»£ç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure></p><p>è¿˜åŸæš‚å­˜çš„ä»£ç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure></p><h4 id="æ€ä¹ˆåˆå¹¶å…¶ä»–åˆ†æ”¯çš„æŒ‡å®šCommitï¼Ÿ"><a href="#æ€ä¹ˆåˆå¹¶å…¶ä»–åˆ†æ”¯çš„æŒ‡å®šCommitï¼Ÿ" class="headerlink" title="æ€ä¹ˆåˆå¹¶å…¶ä»–åˆ†æ”¯çš„æŒ‡å®šCommitï¼Ÿ"></a>æ€ä¹ˆåˆå¹¶å…¶ä»–åˆ†æ”¯çš„æŒ‡å®šCommitï¼Ÿ</h4><p>ä½¿ç”¨<code>cherry-pick</code>å‘½ä»¤<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick æŒ‡å®šcommit-id</span><br></pre></td></tr></table></figure></p><h4 id="æœ¬åœ°ä¸´æ—¶ä»£ç ä¸æƒ³æäº¤ï¼Œæ€ä¹ˆä¸€æ¬¡æ€§æ¸…ç©ºï¼Ÿ"><a href="#æœ¬åœ°ä¸´æ—¶ä»£ç ä¸æƒ³æäº¤ï¼Œæ€ä¹ˆä¸€æ¬¡æ€§æ¸…ç©ºï¼Ÿ" class="headerlink" title="æœ¬åœ°ä¸´æ—¶ä»£ç ä¸æƒ³æäº¤ï¼Œæ€ä¹ˆä¸€æ¬¡æ€§æ¸…ç©ºï¼Ÿ"></a>æœ¬åœ°ä¸´æ—¶ä»£ç ä¸æƒ³æäº¤ï¼Œæ€ä¹ˆä¸€æ¬¡æ€§æ¸…ç©ºï¼Ÿ</h4><p>è¿˜åŸ æœªcommit æœ¬åœ°æ›´æ”¹çš„ä»£ç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard</span><br></pre></td></tr></table></figure></p><p>è¿˜åŸåŒ…å«commitçš„ä»£ç ï¼Œåˆ°è·Ÿè¿œç¨‹åˆ†æ”¯ç›¸åŒ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard origin/master</span><br></pre></td></tr></table></figure></p><h4 id="å·²ç»æäº¤çš„ä»£ç ï¼Œä¸éœ€è¦äº†ï¼Œæ€ä¹ˆå½“åšæ²¡æäº¤è¿‡ï¼Ÿ"><a href="#å·²ç»æäº¤çš„ä»£ç ï¼Œä¸éœ€è¦äº†ï¼Œæ€ä¹ˆå½“åšæ²¡æäº¤è¿‡ï¼Ÿ" class="headerlink" title="å·²ç»æäº¤çš„ä»£ç ï¼Œä¸éœ€è¦äº†ï¼Œæ€ä¹ˆå½“åšæ²¡æäº¤è¿‡ï¼Ÿ"></a>å·²ç»æäº¤çš„ä»£ç ï¼Œä¸éœ€è¦äº†ï¼Œæ€ä¹ˆå½“åšæ²¡æäº¤è¿‡ï¼Ÿ</h4><p>è¿˜åŸåˆ°ä¸Šæ¬¡commit<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard ~HEAD</span><br></pre></td></tr></table></figure></p><p>è¿˜åŸåˆ°å½“å‰ä¹‹å‰çš„å‡ æ¬¡commit<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard ^<span class="number">3</span></span><br></pre></td></tr></table></figure></p><p>å¼ºåˆ¶æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ï¼Œç¡®ä¿æ²¡æœ‰å…¶ä»–äººåœ¨pushï¼Œä¸ç„¶å¯èƒ½ä¼šä¸¢å¤±ä»£ç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin develop --force</span><br></pre></td></tr></table></figure></p><h4 id="æ€ä¹ˆä¿è¯å›¢é˜Ÿæˆå‘˜æäº¤çš„ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼Ÿ"><a href="#æ€ä¹ˆä¿è¯å›¢é˜Ÿæˆå‘˜æäº¤çš„ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼Ÿ" class="headerlink" title="æ€ä¹ˆä¿è¯å›¢é˜Ÿæˆå‘˜æäº¤çš„ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼Ÿ"></a>æ€ä¹ˆä¿è¯å›¢é˜Ÿæˆå‘˜æäº¤çš„ä»£ç éƒ½æ˜¯å¯è¿è¡Œçš„ï¼Ÿ</h4><p>è¿™é‡Œæƒ³è¯´çš„æ˜¯ä½¿ç”¨<code>git hooks</code>ï¼Œä¸€èˆ¬åœ¨é¡¹ç›®ç›®å½•<code>.git/hooks</code>ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨hooksï¼Œæ§åˆ¶å›¢é˜Ÿcommitæäº¤è§„èŒƒï¼Œæˆ–è€…pushä¹‹å‰ï¼Œè‡ªåŠ¨ç¼–è¯‘é¡¹ç›®æ ¡éªŒé¡¹ç›®å¯è¿è¡Œã€‚æœåŠ¡ç«¯å¯ä»¥ä½¿ç”¨hooksï¼Œæ§åˆ¶pushä¹‹åè‡ªåŠ¨æ„å»ºé¡¹ç›®ï¼Œmergeç­‰è‡ªåŠ¨è§¦å‘å•å…ƒæµ‹è¯•ç­‰ã€‚</p><h4 id="git-reset-hardå‘½ä»¤ï¼Œæ‰§è¡Œé”™äº†ï¼Œèƒ½æ¢å¤å—ï¼Ÿ"><a href="#git-reset-hardå‘½ä»¤ï¼Œæ‰§è¡Œé”™äº†ï¼Œèƒ½æ¢å¤å—ï¼Ÿ" class="headerlink" title="git reset --hardå‘½ä»¤ï¼Œæ‰§è¡Œé”™äº†ï¼Œèƒ½æ¢å¤å—ï¼Ÿ"></a><code>git reset --hard</code>å‘½ä»¤ï¼Œæ‰§è¡Œé”™äº†ï¼Œèƒ½æ¢å¤å—ï¼Ÿ</h4><p>å½“å‰commit log<br><img src="https://img.iisheng.cn/current-commit-log.png" alt></p><p>è¯¯æ“ä½œ<code>git reset --hard 8529c</code><br><img src="https://img.iisheng.cn/after-reset.png" alt></p><p>æ‰§è¡Œ<code>git reflog</code><br><img src="https://img.iisheng.cn/reflog.png" alt></p><p>è¿˜åŸåˆ°ä¹‹å‰çš„æ ·å­<br><img src="https://img.iisheng.cn/restore.png" alt></p><h4 id="å…¬å¸ä½¿ç”¨GitLabï¼Œå¹³æ—¶è¿˜ç”¨GitHubï¼Œå¤šè´¦å·SSHï¼Œå¦‚ä½•é…ç½®ï¼Ÿ"><a href="#å…¬å¸ä½¿ç”¨GitLabï¼Œå¹³æ—¶è¿˜ç”¨GitHubï¼Œå¤šè´¦å·SSHï¼Œå¦‚ä½•é…ç½®ï¼Ÿ" class="headerlink" title="å…¬å¸ä½¿ç”¨GitLabï¼Œå¹³æ—¶è¿˜ç”¨GitHubï¼Œå¤šè´¦å·SSHï¼Œå¦‚ä½•é…ç½®ï¼Ÿ"></a>å…¬å¸ä½¿ç”¨GitLabï¼Œå¹³æ—¶è¿˜ç”¨GitHubï¼Œå¤šè´¦å·SSHï¼Œå¦‚ä½•é…ç½®ï¼Ÿ</h4><p>ç¼–è¾‘ <code>~/.ssh/config</code>æ–‡ä»¶ æ²¡æœ‰å°±åˆ›å»º<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> github</span><br><span class="line">Host github.com</span><br><span class="line">Port 22</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">AddKeysToAgent yes</span><br><span class="line">IdentityFile ~/.ssh/github_id_rsa</span><br><span class="line">UseKeychain yes</span><br><span class="line">User iisheng</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> gitlab</span><br><span class="line">Host gitlab.iisheng.cn</span><br><span class="line">Port 22</span><br><span class="line">HostName gitlab.iisheng.cn</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">AddKeysToAgent yes</span><br><span class="line">IdentityFile ~/.ssh/gitlab_id_rsa</span><br><span class="line">UseKeychain yes</span><br><span class="line">User iisheng</span><br></pre></td></tr></table></figure></p><h4 id="Git-Commitså¦‚ä½•å˜å¾—æ¸…çˆ½èµ·æ¥ï¼Ÿ"><a href="#Git-Commitså¦‚ä½•å˜å¾—æ¸…çˆ½èµ·æ¥ï¼Ÿ" class="headerlink" title="Git Commitså¦‚ä½•å˜å¾—æ¸…çˆ½èµ·æ¥ï¼Ÿ"></a>Git Commitså¦‚ä½•å˜å¾—æ¸…çˆ½èµ·æ¥ï¼Ÿ</h4><p>ä½¿ç”¨<code>git rebase</code>ï¼Œæ”¾å¼ƒ<code>git merge</code>ã€‚<code>git rebase</code>ä¼šæ›´æ”¹commitå†å²ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p><p>ä¸‹é¢çš„å›¾æ˜¯Guavaé¡¹ç›®çš„Commitè®°å½•ã€‚<br><img src="https://img.iisheng.cn/commits-history.png" alt></p><h4 id="å¦‚ä½•ä¿®æ”¹å·²ç»æäº¤çš„Commitï¼Ÿ"><a href="#å¦‚ä½•ä¿®æ”¹å·²ç»æäº¤çš„Commitï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¿®æ”¹å·²ç»æäº¤çš„Commitï¼Ÿ"></a>å¦‚ä½•ä¿®æ”¹å·²ç»æäº¤çš„Commitï¼Ÿ</h4><p>åŸå§‹gitæäº¤è®°å½•æ˜¯è¿™æ ·çš„<br><img src="https://img.iisheng.cn/origin-log.png" alt></p><p>æ‰§è¡Œ<code>git rebase  -i 070943d9465177f869359a52b01ec1cfcecaa41b</code>ï¼Œå¯¹æŒ‡å®šcommitIdä¹‹å‰çš„æäº¤ï¼Œè¿›è¡Œä¿®æ”¹<br><img src="https://img.iisheng.cn/rebase-modifying.png" alt></p><p>ä¿®æ”¹ågitæäº¤è®°å½•å˜æˆäº†è¿™æ ·<br><img src="https://img.iisheng.cn/modified-log.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜³å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç¯‡æ–‡ç« æŒæ¡Maven</title>
      <link href="/2019/12/07/maven/"/>
      <url>/2019/12/07/maven/</url>
      
        <content type="html"><![CDATA[<h3 id="Mavenæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Mavenæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Mavenæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Mavenæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Mavenï¼Œè¿™ä¸ªå•è¯æ¥æºäºçŠ¹å¤ªè¯­ï¼Œæ„å‘³ç€çŸ¥è¯†çš„ç§¯ç´¯ã€‚æœ€åˆåœ¨Jakarta Turbine é¡¹ç›®ä¸­ç”¨æ¥ç®€åŒ–æ„é€ é¡¹ç›®æµç¨‹ã€‚æœ€ç»ˆï¼Œå½¢æˆç»™äºˆJavaé¡¹ç›®çš„æ„å»ºå’Œç®¡ç†çš„å·¥å…·ã€‚</p><a id="more"></a><h3 id="å®‰è£…ä¸é…ç½®"><a href="#å®‰è£…ä¸é…ç½®" class="headerlink" title="å®‰è£…ä¸é…ç½®"></a>å®‰è£…ä¸é…ç½®</h3><p>å®‰è£…æ¯”è¾ƒç®€å•ï¼Œå®˜ç½‘ä¸‹è½½ï¼Œé…ç½®ç¯å¢ƒå³å¯ã€‚è¿™é‡Œæ¨èä¸€ä¸‹ï¼Œå®‰è£…ä¹‹åé…ç½®ä»“åº“é•œåƒï¼Œå¯ä»¥åŠ å¿«è®¿é—®é€Ÿåº¦ã€‚</p><p>ç¼–è¾‘<code>settings.xml</code>ï¼Œåœ¨<code>&lt;/mirrors&gt;</code>ä¹‹å‰æ·»åŠ <br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">  &lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">  &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">  &lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">  &lt;url&gt;http:<span class="comment">//maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span></span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure></p><h3 id="Maven-åˆ›å»ºé¡¹ç›®"><a href="#Maven-åˆ›å»ºé¡¹ç›®" class="headerlink" title="Maven åˆ›å»ºé¡¹ç›®"></a>Maven åˆ›å»ºé¡¹ç›®</h3><h4 id="åˆ›å»ºåŸºæœ¬çš„Javaé¡¹ç›®"><a href="#åˆ›å»ºåŸºæœ¬çš„Javaé¡¹ç›®" class="headerlink" title="åˆ›å»ºåŸºæœ¬çš„Javaé¡¹ç›®"></a>åˆ›å»ºåŸºæœ¬çš„Javaé¡¹ç›®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate \</span><br><span class="line"> -DgroupId=com.mycompany.app \</span><br><span class="line"> -DartifactId=my-app \</span><br><span class="line"> -DarchetypeArtifactId=maven-archetype-quickstart \</span><br><span class="line"> -DinteractiveMode=<span class="keyword">false</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å…¶ä»–å·¥å…·åˆ›å»ºé¡¹ç›®ä¹Ÿå¦‚å‡ºä¸€è¾™ã€‚</p><h3 id="Mavené¡¹ç›®ç»“æ„"><a href="#Mavené¡¹ç›®ç»“æ„" class="headerlink" title="Mavené¡¹ç›®ç»“æ„"></a>Mavené¡¹ç›®ç»“æ„</h3><p><img src="https://img.iisheng.cn/maven-project-directory.png" alt></p><h3 id="Maven-åŸºæœ¬æ¦‚å¿µ"><a href="#Maven-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="Maven åŸºæœ¬æ¦‚å¿µ"></a>Maven åŸºæœ¬æ¦‚å¿µ</h3><h4 id="POMï¼ˆProject-Object-Modelï¼‰"><a href="#POMï¼ˆProject-Object-Modelï¼‰" class="headerlink" title="POMï¼ˆProject Object Modelï¼‰"></a>POMï¼ˆProject Object Modelï¼‰</h4><p>POMçš„å…¨ç§°æ˜¯Project Object Modelï¼Œç”¨é€šä¿—ç‚¹çš„è¯è¯´å°±æ˜¯å¯¹è¦æ„å»ºçš„é¡¹ç›®è¿›è¡Œå»ºæ¨¡ï¼Œå°†è¦æ„å»ºçš„é¡¹ç›®çœ‹æˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆObjectï¼‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„ä¸€ä¸ªJavaä»£ç æ¥æè¿°ä¸€ä¸‹è¿™ä¸ªå¯¹è±¡ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.iisheng.maven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/12/05 15:12:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProjectObject</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¡¨ç¤ºç»„ç»‡æˆ–è€…ç»„ç»‡çš„é¡¹ç›®å”¯ä¸€çš„æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String groupId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¡¨ç¤ºé¡¹ç›®å†…éƒ¨ç»„ä»¶çš„æ ‡è¯†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String artifactId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“åŒ…æ–¹å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String packaging;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¡¨ç¤ºè¯¥artifact ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String version;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¾èµ–çš„å…¶ä»–é¡¹ç›®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;ProjectObject&gt; dependencies;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çˆ¶çº§é¡¹ç›®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ProjectObject parent;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­æ¨¡å—é¡¹ç›®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;ProjectObject&gt; modules;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢å‡ ä¸ªå±æ€§ ä»…ä»…ç”¨äºç”Ÿæˆæ–‡æ¡£</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡¹ç›®å±•ç¤ºåå­—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡¹ç›®ç½‘å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡¹ç›®æè¿°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="Lifecycleï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰"><a href="#Lifecycleï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰" class="headerlink" title="Lifecycleï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰"></a>Lifecycleï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰</h4><p>åœ¨Mavenä¸­ä¸€æ¬¡æ„å»ºè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªLifecycleï¼Œè¿™ä¸ªLifecycleåˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µå«åšPhaseã€‚æœ‰ä¸‰ç§æ„å»ºçš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ†åˆ«æ˜¯<code>default</code>ã€<code>clean</code>ã€<code>site</code>ã€‚<code>default</code>ç”¨äºéƒ¨ç½²é¡¹ç›®ï¼Œ<code>clean</code>ç”¨äºæ¸…ç†é¡¹ç›®ï¼Œè€Œ<code>site</code>ç”¨äºåˆ›å»ºé¡¹ç›®æ–‡æ¡£ã€‚</p><p><code>default</code>LifecycleåŒ…å«å¦‚ä¸‹Phase:</p><ul><li>validateï¼šæ ¡éªŒé¡¹ç›®å’Œä¸€äº›å¿…è¦ä¿¡æ¯æ˜¯å¯ç”¨çš„</li><li>compileï¼šç¼–è¯‘é¡¹ç›®æºç </li><li>testï¼šæ‰§è¡Œæºç çš„å•å…ƒæµ‹è¯•æ¨¡å—</li><li>packageï¼šå°†é¡¹ç›®æ‰“åŒ…ï¼Œæ¯”å¦‚æ‰“åŒ…æˆjaræ–‡ä»¶</li><li>verifyï¼šå¯¹é›†æˆæµ‹è¯•çš„ç»“æœè¿›è¡Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿æ»¡è¶³è´¨é‡æ ‡å‡†</li><li>installï¼šå°†è½¯ä»¶åŒ…å®‰è£…åˆ°æœ¬åœ°ä»“åº“ä¸­</li><li>deployï¼šå°†è½¯ä»¶åŒ…éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“</li></ul><h4 id="maven-å¸¸ç”¨å‘½ä»¤ä»‹ç»"><a href="#maven-å¸¸ç”¨å‘½ä»¤ä»‹ç»" class="headerlink" title="maven å¸¸ç”¨å‘½ä»¤ä»‹ç»"></a>maven å¸¸ç”¨å‘½ä»¤ä»‹ç»</h4><p>æ¸…ç†é¡¹ç›®äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯æ¨¡å—ä¸‹çš„targetç›®å½•<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean</span><br></pre></td></tr></table></figure></p><p>é¡¹ç›®æ‰“åŒ…å·¥å…·ï¼Œä¼šåœ¨æ¨¡å—ä¸‹çš„targetç›®å½•ç”Ÿæˆjaræˆ–è€…warç­‰æ–‡ä»¶<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn <span class="keyword">package</span></span><br></pre></td></tr></table></figure></p><p>æµ‹è¯•å‘½ä»¤æˆ–è€…æ‰§è¡Œsrc/test/javaä¸‹é¢çš„æµ‹è¯•ç”¨ä¾‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn test</span><br></pre></td></tr></table></figure></p><p>æ¨¡å—å®‰è£…å‘½ä»¤ï¼Œå°†æ‰“åŒ…çš„jaræˆ–è€…waræ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°ä»“åº“ï¼Œä½¿ç”¨-Dmaven.test.skip=true è·³è¿‡æµ‹è¯•<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn install</span><br></pre></td></tr></table></figure></p><p>å‘å¸ƒå‘½ä»¤ï¼Œå°†æ‰“åŒ…çš„æ–‡ä»¶å‘å¸ƒåˆ°mavenä»“åº“<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn deploy</span><br></pre></td></tr></table></figure></p><p>maven å¤šä¸ªå‘½ä»¤åŒæ—¶ä½¿ç”¨<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean <span class="keyword">package</span> -U -Dmaven.test.skip=<span class="keyword">true</span> -P test</span><br></pre></td></tr></table></figure></p><h4 id="Phaseå’ŒGoals"><a href="#Phaseå’ŒGoals" class="headerlink" title="Phaseå’ŒGoals"></a>Phaseå’ŒGoals</h4><p>Lifecycleåªè§„å®šäº†é¡¹ç›®æ„å»ºçš„æµç¨‹ï¼Œå³å…ˆæ‰§è¡Œ<code>validate</code>ï¼Œå†<code>compile</code>ç­‰ä¸€ç³»åˆ—Phaseï¼Œä½†å¹¶æ²¡æœ‰å®šä¹‰æ¯ä¸€ä¸ªPhaseå…·ä½“åšä»€ä¹ˆã€‚è¿™é‡ŒPhaseçš„ä½œç”¨ç±»ä¼¼äºJavaä¸­çš„æ¥å£ï¼Œè€ŒPhaseçš„å…·ä½“å®ç°åœ¨Goalsé‡Œé¢ã€‚</p><p>ä¸€ä¸ªPhaseå¿…é¡»ç»‘å®šä¸€ä¸ªæˆ–å¤šä¸ªGoalsï¼Œæ‰èƒ½æ‰§è¡Œå…·ä½“çš„æ„å»ºæµç¨‹ã€‚ä¸ºäº†è®©ç”¨æˆ·ä¸ç”¨ä»»ä½•é…ç½®å°±èƒ½ä½¿ç”¨Mavené¡¹ç›®ï¼ŒMavené»˜è®¤ä¸ºä¸€äº›æ ¸å¿ƒå£°æ˜å‘¨æœŸçš„Phaseç»‘å®šäº†Goalsã€‚</p><p>å¦‚æœéœ€è¦è‡ªå®šä¹‰ç»‘å®šï¼Œå¯ä»¥åœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­é…ç½®ã€‚</p><h3 id="Mavenæ ¸å¿ƒæ¦‚å¿µ"><a href="#Mavenæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="Mavenæ ¸å¿ƒæ¦‚å¿µ"></a>Mavenæ ¸å¿ƒæ¦‚å¿µ</h3><h4 id="Mavenåæ ‡"><a href="#Mavenåæ ‡" class="headerlink" title="Mavenåæ ‡"></a>Mavenåæ ‡</h4><p>Mavenåæ ‡ä¸»è¦æ˜¯ä¸ºäº†æ ‡è¯†é¡¹ç›®çš„å”¯ä¸€æ€§ã€‚ç”±ä¸‹é¢å‡ ä¸ªå±æ€§ç»„æˆï¼š</p><ul><li>groupIdï¼šç»„ç»‡æˆ–è€…ç»„ç»‡çš„é¡¹ç›®åç§°</li><li>artifactIdï¼šé¡¹ç›®ä¸­çš„å…·ä½“æ¨¡å—</li><li>versionï¼šé¡¹ç›®ç‰ˆæœ¬</li><li>packagingï¼šé¡¹ç›®æ‰“åŒ…æ–¹å¼</li><li>classifierï¼šç”¨äºåŒºåˆ†ä»åŒä¸€POMæ„å»ºçš„å…·æœ‰ä¸åŒå†…å®¹çš„æ„ä»¶</li></ul><h4 id="Mavenä»“åº“"><a href="#Mavenä»“åº“" class="headerlink" title="Mavenä»“åº“"></a>Mavenä»“åº“</h4><p>å­˜å‚¨ç®¡ç†æ„ä»¶ï¼ˆJARã€WARç­‰ï¼‰çš„åœ°æ–¹ã€‚</p><p>ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ul><li>æœ¬åœ°ä»“åº“ï¼šé»˜è®¤æ˜¯<code>~/.m2/repository</code> ç›®å½•ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å…¶ä»–ç›®å½•</li><li>ç§æœï¼šå†…ç½‘çš„Mavenä»“åº“</li><li>ä¸­å¤®ä»“åº“ï¼šMavenç¤¾åŒºæä¾›çš„ä»“åº“ï¼ŒåŒ…å«å¤§é‡çš„å¸¸ç”¨åº“</li></ul><h4 id="Mavenä¾èµ–"><a href="#Mavenä¾èµ–" class="headerlink" title="Mavenä¾èµ–"></a>Mavenä¾èµ–</h4><p>åœ¨<code>pom.xml</code>é…ç½®é¡¹ç›®ä¾èµ–ï¼Œæ¯”å¦‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p><p><code>scope</code>ç”¨æ¥æ§åˆ¶ä¾èµ–å’Œç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œçš„classpathçš„å…³ç³»ã€‚æœ‰ä¸‹é¢ä¸‰ç§å…³ç³»ï¼š</p><ul><li>compileï¼šé»˜è®¤ç¼–è¯‘ä¾èµ–èŒƒå›´ã€‚å¯¹äºç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œä¸‰ç§classpathéƒ½æœ‰æ•ˆ</li><li>testï¼šæµ‹è¯•ä¾èµ–èŒƒå›´ã€‚åªå¯¹æµ‹è¯•classpathæœ‰æ•ˆ</li><li>providedï¼šå·²æä¾›ä¾èµ–èŒƒå›´ã€‚ç¼–è¯‘ã€æµ‹è¯•classpathæœ‰æ•ˆï¼Œå¯¹äºè¿è¡Œæ— æ•ˆã€‚</li><li>runtimeï¼šè¿è¡Œæ—¶æä¾›</li><li>testï¼šä»…ç”¨äºæµ‹è¯•ï¼Œä¸”ä¸å¯ä¼ é€’</li><li>systemï¼šç±»ä¼¼äºprovidedï¼Œä½†å¿…é¡»æ˜¾ç¤ºæä¾›JAR</li><li>importï¼šä»…åœ¨<code>dependencyManagement</code>ä¸‹æ”¯æŒã€‚</li></ul><h5 id="ä¼ é€’ä¾èµ–"><a href="#ä¼ é€’ä¾èµ–" class="headerlink" title="ä¼ é€’ä¾èµ–"></a>ä¼ é€’ä¾èµ–</h5><p>Mavenæ˜¯é€šè¿‡<strong>ä¼ é€’ä¾èµ–</strong>è§£æJARåŒ…ä¾èµ–ï¼Œæ¯”å¦‚æˆ‘é¡¹ç›®ä¸­å¼•å…¥junitï¼Œåœ¨è§£ææˆ‘çš„é¡¹ç›®çš„æ—¶å€™ï¼Œä¸ä»…ä»…ä»…æœ‰junitï¼Œè¿˜æœ‰junitä¾èµ–çš„JARåŒ…ã€‚</p><p><img src="https://img.iisheng.cn/maven-dependency.png" alt></p><h5 id="åŒ…å†²çªæ—¶æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"><a href="#åŒ…å†²çªæ—¶æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ" class="headerlink" title="åŒ…å†²çªæ—¶æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"></a>åŒ…å†²çªæ—¶æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ</h5><p>å‡è®¾ A-&gt;B-&gt;C-&gt;D1ï¼Œ E-&gt;F-&gt;D2ï¼ŒD1ã€D2 åˆ†åˆ«ä¸º D çš„ä¸åŒç‰ˆæœ¬ã€‚</p><p>å¦‚æœ <code>pom.xml</code> æ–‡ä»¶ä¸­å¼•å…¥äº† A å’Œ E ä¹‹åï¼ŒæŒ‰ç…§ Maven ä¼ é€’ä¾èµ–åŸåˆ™ï¼Œå·¥ç¨‹å†…éœ€è¦å¼•å…¥çš„å®é™… JAR åŒ…å°†ä¼šæœ‰ï¼šA B C D1 å’Œ E F D2ï¼Œå› æ­¤ D1ã€D2 å°†ä¼šäº§ç”ŸåŒ…å†²çªã€‚</p><h5 id="å¦‚ä½•è§£å†³åŒ…å†²çªï¼Ÿ"><a href="#å¦‚ä½•è§£å†³åŒ…å†²çªï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³åŒ…å†²çªï¼Ÿ"></a>å¦‚ä½•è§£å†³åŒ…å†²çªï¼Ÿ</h5><p>Mavenè§£æ<code>pom.xml</code>çš„æ—¶å€™ï¼ŒåŒä¸€ä¸ªJARåŒ…åªä¼šä¿ç•™ä¸€ä¸ªã€‚</p><p>å¯¹äºåŒ…å†²çªï¼ŒMavenå¤„ç†ç­–ç•¥ï¼š</p><ul><li>æœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼šMavené¢å¯¹ D1 D2ï¼Œä¼šé€‰æ‹©æœ€çŸ­è·¯å¾„çš„é‚£ä¸ªï¼Œå³D2ã€‚å› ä¸ºï¼ŒE-&gt;F-&gt;D2 æ¯” A-&gt;B-&gt;C-&gt;D1 è·¯å¾„çŸ­ã€‚</li><li>æœ€å…ˆå£°æ˜ä¼˜å…ˆï¼šå¦‚æœè·¯å¾„ä¸€æ ·ï¼Œå°±é€‰æ‹©æœ€å…ˆå£°æ˜çš„JARåŒ…ã€‚</li></ul><h5 id="å¦‚ä½•ç§»é™¤ä¾èµ–ï¼Ÿ"><a href="#å¦‚ä½•ç§»é™¤ä¾èµ–ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç§»é™¤ä¾èµ–ï¼Ÿ"></a>å¦‚ä½•ç§»é™¤ä¾èµ–ï¼Ÿ</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">        &lt;exclusions&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;</span><br><span class="line">        &lt;/exclusion&gt;</span><br><span class="line">    &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="Mavenèšåˆ"><a href="#Mavenèšåˆ" class="headerlink" title="Mavenèšåˆ"></a>Mavenèšåˆ</h4><p>æ¨¡å—åŒ–ï¼Œå„ä¸ªæ¨¡å—çœ‹èµ·æ¥æ›´æ¸…æ™°ã€‚æ›´ä¸»è¦çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ„å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œä¸‹é¢æ‰€æœ‰moduleé‡Œé¢çš„é¡¹ç›®éƒ½ä¼šè·Ÿç€åŒæ—¶æ„å»ºã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;modules&gt;</span><br><span class="line">    &lt;module&gt;study-common&lt;/module&gt;</span><br><span class="line">    &lt;module&gt;study-dao&lt;/module&gt;</span><br><span class="line">    &lt;module&gt;study-service&lt;/module&gt;</span><br><span class="line">&lt;module&gt;study-web&lt;/module&gt;</span><br><span class="line">&lt;/modules&gt;</span><br></pre></td></tr></table></figure><h4 id="Mavenç»§æ‰¿"><a href="#Mavenç»§æ‰¿" class="headerlink" title="Mavenç»§æ‰¿"></a>Mavenç»§æ‰¿</h4><p>ç»§æ‰¿ä¸ºäº†æ¶ˆé™¤é‡å¤ã€‚å¯ä»¥æŠŠå¾ˆå¤šç›¸åŒçš„é…ç½®æå–å‡ºæ¥ã€‚</p><p>å­æ¨¡å—é€šè¿‡<code>parent</code>æ ‡ç­¾é…ç½®ï¼Œç»§æ‰¿çˆ¶æ¨¡å—å±æ€§ã€‚çˆ¶æ¨¡å—é€šè¿‡<code>dependencyManagement</code>æ ‡ç­¾è¿›è¡Œç®¡ç†ã€‚</p><p>å¤šæ¨¡å—ç‰ˆæœ¬å·å¯ä»¥é€šè¿‡mavenå‘½ä»¤æ“ä½œï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ</p><h5 id="è®¾ç½®æ–°ç‰ˆæœ¬å·"><a href="#è®¾ç½®æ–°ç‰ˆæœ¬å·" class="headerlink" title="è®¾ç½®æ–°ç‰ˆæœ¬å·"></a>è®¾ç½®æ–°ç‰ˆæœ¬å·</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn versions:set -DnewVersion=<span class="number">0.0</span>.2-SNAPSHOT</span><br></pre></td></tr></table></figure><h5 id="å›æ»šè®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ"><a href="#å›æ»šè®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ" class="headerlink" title="å›æ»šè®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ"></a>å›æ»šè®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn versions:revert</span><br></pre></td></tr></table></figure><h5 id="æäº¤è®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ"><a href="#æäº¤è®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ" class="headerlink" title="æäº¤è®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ"></a>æäº¤è®¾ç½®æ–°ç‰ˆæœ¬å·æ“ä½œ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn versions:commit</span><br></pre></td></tr></table></figure><p>Mavenå¤šæ¨¡å—é¡¹ç›®ç»“æ„ï¼Œä»¥åŠMavenå±æ€§ç»§æ‰¿é…ç½®ç­‰ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªé¡¹ç›®<a href="https://github.com/iisheng/mybatis-study" target="_blank" rel="noopener">iisheng/mybatis-study</a></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜³å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£JVMä¹‹åƒåœ¾å›æ”¶ç®—æ³•</title>
      <link href="/2019/10/27/java-gc-algorithm/"/>
      <url>/2019/10/27/java-gc-algorithm/</url>
      
        <content type="html"><![CDATA[<h3 id="åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ­»äº¡çš„æ–¹æ³•"><a href="#åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ­»äº¡çš„æ–¹æ³•" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ­»äº¡çš„æ–¹æ³•"></a>åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ­»äº¡çš„æ–¹æ³•</h3><h4 id="å¼•ç”¨è®¡æ•°æ³•"><a href="#å¼•ç”¨è®¡æ•°æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°æ³•"></a>å¼•ç”¨è®¡æ•°æ³•</h4><p>ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±åŠ 1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±å‡1ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸º0çš„å¯¹è±¡å°±æ˜¯ä¸å¯èƒ½å†è¢«å¼•ç”¨ã€‚</p><blockquote><p>å¾ˆéš¾è§£å†³å¯¹è±¡ä¹‹é—´ç›¸äº’å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p></blockquote><a id="more"></a><h4 id="å¯è¾¾æ€§åˆ†æç®—æ³•"><a href="#å¯è¾¾æ€§åˆ†æç®—æ³•" class="headerlink" title="å¯è¾¾æ€§åˆ†æç®—æ³•"></a>å¯è¾¾æ€§åˆ†æç®—æ³•</h4><p>é€šè¿‡ä¸€ç³»åˆ—å«åšâ€œGC Rootsâ€çš„å¯¹è±¡ä½œä¸ºèµ·ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼ˆReference Chainï¼‰ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶ï¼Œåˆ™è¯æ˜å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚</p><p>åœ¨Javaè¯­è¨€ä¸­ï¼Œå¯ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ä¸‹é¢å‡ ç§ï¼š</p><ul><li>è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­çš„å¼•ç”¨å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆå³ä¸€èˆ¬çš„Nativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡</li></ul><h3 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h3><p>å¼•ç”¨åˆ†ä¸ºå¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰ã€è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰ã€å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰ã€è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰4ç§ï¼Œè¿™4ç§å¼•ç”¨å¼ºåº¦ä¾æ¬¡å‡å¼±ã€‚</p><h4 id="å¼ºå¼•ç”¨"><a href="#å¼ºå¼•ç”¨" class="headerlink" title="å¼ºå¼•ç”¨"></a>å¼ºå¼•ç”¨</h4><p>å¼ºå¼•ç”¨å°±æ˜¯æŒ‡åœ¨ç¨‹åºä¸­æ™®éå­˜åœ¨çš„ï¼Œç±»ä¼¼<code>Object obj = new Object();</code>è¿™ç±»çš„å¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚</p><h4 id="è½¯å¼•ç”¨"><a href="#è½¯å¼•ç”¨" class="headerlink" title="è½¯å¼•ç”¨"></a>è½¯å¼•ç”¨</h4><p>è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†å¹¶éå¿…é¡»çš„å¯¹è±¡ã€‚å¯¹äºè½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ã€‚å¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚åœ¨JDK 1.2ä¹‹å ä½¿ç”¨<code>SoftReference</code>ç±»æ¥å®ç°è½¯å¼•ç”¨ã€‚</p><h4 id="å¼±å¼•ç”¨"><a href="#å¼±å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨"></a>å¼±å¼•ç”¨</h4><p>å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°éå¿…é¡»å¯¹è±¡çš„ï¼Œä½†æ˜¯å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¹‹å‰ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚åœ¨JDK 1.2ä¹‹å ä½¿ç”¨<code>WeakReference</code>ç±»æ¥å®ç°å¼±å¼•ç”¨ã€‚</p><h4 id="è™šå¼•ç”¨"><a href="#è™šå¼•ç”¨" class="headerlink" title="è™šå¼•ç”¨"></a>è™šå¼•ç”¨</h4><p>è™šå¼•ç”¨ä¹Ÿè¢«ç§°ä¸ºå¹½çµå¼•ç”¨æˆ–è€…å¹»å½±å¼•ç”¨ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶æ—¶å—åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚åœ¨JDK 1.2ä¹‹å ä½¿ç”¨<code>PhantomReference</code>ç±»æ¥å®ç°è™šå¼•ç”¨ã€‚</p><h3 id="åƒåœ¾æ”¶é›†ç®—æ³•"><a href="#åƒåœ¾æ”¶é›†ç®—æ³•" class="headerlink" title="åƒåœ¾æ”¶é›†ç®—æ³•"></a>åƒåœ¾æ”¶é›†ç®—æ³•</h3><h4 id="æ ‡è®°-æ¸…é™¤ç®—æ³•"><a href="#æ ‡è®°-æ¸…é™¤ç®—æ³•" class="headerlink" title="æ ‡è®°-æ¸…é™¤ç®—æ³•"></a>æ ‡è®°-æ¸…é™¤ç®—æ³•</h4><p>ç®—æ³•åˆ†ä¸ºâ€œæ ‡è®°â€å’Œâ€œæ¸…é™¤â€ä¸¤ä¸ªé˜¶æ®µï¼šé¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦æ¸…é™¤çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚</p><h4 id="å¤åˆ¶ç®—æ³•"><a href="#å¤åˆ¶ç®—æ³•" class="headerlink" title="å¤åˆ¶ç®—æ³•"></a>å¤åˆ¶ç®—æ³•</h4><p>å°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸Šé¢ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚</p><h4 id="æ ‡è®°-æ•´ç†ç®—æ³•"><a href="#æ ‡è®°-æ•´ç†ç®—æ³•" class="headerlink" title="æ ‡è®°-æ•´ç†ç®—æ³•"></a>æ ‡è®°-æ•´ç†ç®—æ³•</h4><p>æ ‡è®°è¿‡ç¨‹ä»ç„¶ä¸â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ä¸€æ ·ï¼Œä½†åç»­æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡è¿›è¡Œæ¸…ç†ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»å¯¹è±¡éƒ½åƒä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚</p><h4 id="åˆ†ä»£æ”¶é›†ç®—æ³•"><a href="#åˆ†ä»£æ”¶é›†ç®—æ³•" class="headerlink" title="åˆ†ä»£æ”¶é›†ç®—æ³•"></a>åˆ†ä»£æ”¶é›†ç®—æ³•</h4><p>å°†å¯¹è±¡å­˜æ´»å‘¨æœŸçš„ä¸åŒå°†å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ã€‚ä¸€èˆ¬æ˜¯æŠŠJavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€é€‚ç”¨çš„æ”¶é›†ç®—æ³•ã€‚</p><p>åœ¨æ–°ç”Ÿä»£ä¸­æ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶éƒ½æœ‰å¤§é‡å¯¹è±¡æ­»å»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œé‚£å°±é€‰ç”¨<strong>å¤åˆ¶ç®—æ³•</strong>ï¼Œåªéœ€è¦ä»˜å‡ºå°‘é‡å­˜æ´»å¯¹è±¡çš„å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆæ”¶é›†ã€‚è€Œè€å¹´ä»£å› ä¸ºå¯¹è±¡å­˜æ´»ç‡é«˜ã€æ²¡æœ‰é¢å¤–ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…çš„æ‹…ä¿ï¼Œå°±å¿…é¡»ä½¿ç”¨<strong>æ ‡è®°-æ¸…ç†</strong>æˆ–è€…<strong>æ ‡è®°-æ•´ç†</strong>ç®—æ³•æ¥è¿›è¡Œå›æ”¶ã€‚</p><h3 id="åƒåœ¾æ”¶é›†å™¨"><a href="#åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨"></a>åƒåœ¾æ”¶é›†å™¨</h3><p>HotSpotè™šæ‹Ÿæœºçš„åƒåœ¾æ”¶é›†å™¨<br><img src="/images/hotspot-garbage-collector.png" alt></p><h4 id="Serialæ”¶é›†å™¨"><a href="#Serialæ”¶é›†å™¨" class="headerlink" title="Serialæ”¶é›†å™¨"></a>Serialæ”¶é›†å™¨</h4><p>Serialæ”¶é›†å™¨æ˜¯å•çº¿ç¨‹æ”¶é›†å™¨ã€‚å®ƒè¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°å®ƒæ”¶é›†ç»“æŸã€‚</p><p>Serialæ”¶é›†å™¨æ˜¯ä½¿ç”¨å¤åˆ¶åƒåœ¾å›æ”¶ç®—æ³•çš„æ”¶é›†å™¨ã€‚</p><p>Serialæ”¶é›†å™¨å¯¹äºè¿è¡Œåœ¨Clientæ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºæ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p><h4 id="ParNewæ”¶é›†å™¨"><a href="#ParNewæ”¶é›†å™¨" class="headerlink" title="ParNewæ”¶é›†å™¨"></a>ParNewæ”¶é›†å™¨</h4><p>ParNew æ”¶é›†å™¨å…¶å®å°±æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œé™¤äº†ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ä¹‹å¤–ï¼Œå…¶ä½™è¡Œä¸ºåŒ…æ‹¬Serialæ”¶é›†å™¨å¯ç”¨çš„æ‰€æœ‰æ§åˆ¶å‚æ•°ã€æ”¶é›†ç®—æ³•ã€Stop The World ã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥ç­‰éƒ½ä¸Serialå®Œå…¨ä¸€æ ·ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å¹¶å‘ä»€ä¹ˆæ˜¯å¹¶è¡Œ"><a href="#ä»€ä¹ˆæ˜¯å¹¶å‘ä»€ä¹ˆæ˜¯å¹¶è¡Œ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹¶å‘ä»€ä¹ˆæ˜¯å¹¶è¡Œ"></a>ä»€ä¹ˆæ˜¯å¹¶å‘ä»€ä¹ˆæ˜¯å¹¶è¡Œ</h4><p>è¿™ä¸¤ä¸ªåè¯éƒ½æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­çš„æ¦‚å¿µï¼Œåœ¨è°ˆè®ºåƒåœ¾æ”¶é›†å™¨çš„ä¸Šä¸‹æ–‡è¯­å¢ƒä¸­ï¼Œå®ƒä»¬å¯ä»¥è§£é‡Šå¦‚ä¸‹ï¼š</p><ul><li>å¹¶è¡Œï¼ˆParallelï¼‰ï¼šæŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ä»ç„¶å¤„äºç­‰å¾…çŠ¶æ€ã€‚</li><li>å¹¶å‘ï¼ˆConcurrentï¼‰ï¼šæŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼ˆä½†ä¸ä¸€å®šæ˜¯å¹¶è¡Œçš„ï¼Œå¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œï¼‰ï¼Œç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­è¿è¡Œï¼Œè€Œåƒåœ¾æ”¶é›†ç¨‹åºè¿è¡Œäºå¦ä¸€ä¸ªCPUä¸Šã€‚</li></ul><h4 id="Parallel-Scavengeæ”¶é›†å™¨"><a href="#Parallel-Scavengeæ”¶é›†å™¨" class="headerlink" title="Parallel Scavengeæ”¶é›†å™¨"></a>Parallel Scavengeæ”¶é›†å™¨</h4><p>Parallel Scavenge æ”¶é›†å™¨æ˜¯ä¸€ä¸ªæ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå®ƒä¹Ÿæ˜¯ä½¿ç”¨å¤åˆ¶ç®—æ³•çš„æ”¶é›†å™¨ï¼Œåˆæ˜¯å¹¶è¡Œçš„å¤šçº¿ç¨‹æ”¶é›†å™¨ã€‚</p><p>CMSç­‰æ”¶é›†å™¨å…³æ³¨ç‚¹æ˜¯å°½å¯èƒ½åœ°ç¼©çŸ­åƒåœ¾æ”¶é›†æ—¶ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´ï¼Œè€ŒParallel Scavenge æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ï¼ˆThroughputï¼‰ã€‚</p><p>æ‰€è°“ååé‡å°±æ˜¯CPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸CPUæ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ã€‚å³ååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´)ï¼Œè™šæ‹Ÿæœºæ€»å…±è¿è¡Œäº†100åˆ†é’Ÿï¼Œå…¶ä¸­åƒåœ¾æ”¶é›†èŠ±è´¹1åˆ†é’Ÿï¼Œé‚£ååé‡å°±æ˜¯99%ã€‚</p><p>Parallel Scavenge æ”¶é›†å™¨æä¾›äº†ä¸¤ä¸ªå‚æ•°ç”¨äºç²¾ç¡®æ§åˆ¶ååé‡ï¼Œåˆ†åˆ«æ˜¯æ§åˆ¶æœ€å¤§åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´çš„<code>-XX:MaxGCPauseMillis</code>å‚æ•°ä»¥åŠç›´æ¥è®¾ç½®ååé‡å¤§å°çš„<code>-XX:GCTimeRadio</code>å‚æ•°ã€‚</p><h4 id="Serial-Oldæ”¶é›†å™¨"><a href="#Serial-Oldæ”¶é›†å™¨" class="headerlink" title="Serial Oldæ”¶é›†å™¨"></a>Serial Oldæ”¶é›†å™¨</h4><p>Serial Oldæ˜¯Serialæ”¶é›†å™¨è€å¹´ä»£ç‰ˆæœ¬ï¼Œå®ƒåŒæ ·æ˜¯ä¸€ä¸ªå•çº¿ç¨‹æ”¶é›†å™¨ï¼Œä½¿ç”¨<strong>æ ‡è®°-æ•´ç†</strong>ç®—æ³•ã€‚è¿™ä¸ªæ”¶é›†å™¨çš„ä¸»è¦æ„ä¹‰åœ¨äºç»™Clientæ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä½¿ç”¨ã€‚</p><h4 id="Parallel-Oldæ”¶é›†å™¨"><a href="#Parallel-Oldæ”¶é›†å™¨" class="headerlink" title="Parallel Oldæ”¶é›†å™¨"></a>Parallel Oldæ”¶é›†å™¨</h4><p>Parallel Oldæ”¶é›†å™¨æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å’Œ<strong>æ ‡è®°-æ•´ç†</strong>ç®—æ³•ã€‚</p><h4 id="CMSæ”¶é›†å™¨"><a href="#CMSæ”¶é›†å™¨" class="headerlink" title="CMSæ”¶é›†å™¨"></a>CMSæ”¶é›†å™¨</h4><p>CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚ç›®å‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„Javaåº”ç”¨é›†ä¸­åœ¨äº’è”ç½‘ç«™æˆ–è€…B/Sç³»ç»Ÿçš„æœåŠ¡ç«¯ä¸Šï¼Œè¿™ç±»åº”ç”¨å°¤å…¶é‡è§†æœåŠ¡çš„å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´æœ€çŸ­ã€‚CMSæ”¶é›†å™¨å°±éå¸¸ç¬¦åˆè¿™ç±»åº”ç”¨çš„éœ€æ±‚ã€‚</p><p>CMSæ”¶é›†å™¨ä½¿ç”¨<strong>æ ‡è®°-æ•´ç†</strong>ç®—æ³•å®ç°çš„ã€‚å®ƒçš„è¿ä½œè¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š</p><ul><li>åˆå§‹æ ‡è®°ï¼ˆCMS initial markï¼‰</li><li>å¹¶å‘æ ‡è®°ï¼ˆCMS concurrent markï¼‰</li><li>é‡æ–°æ ‡è®°ï¼ˆCMS remarkï¼‰</li><li>å¹¶å‘æ¸…é™¤ï¼ˆCMS concurrent sweepï¼‰</li></ul><p>å…¶ä¸­ï¼Œåˆå§‹æ ‡è®°ã€é‡æ–°æ ‡è®°è¿™ä¸¤ä¸ªæ­¥éª¤ä»ç„¶éœ€è¦â€Stop The Worldâ€ã€‚</p><p>åˆå§‹æ ‡è®°ä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶å‘æ ‡è®°é˜¶æ®µå°±æ˜¯è¿›è¡ŒGC Roots Tracingçš„è¿‡ç¨‹ï¼Œè€Œé‡æ–°æ ‡è®°é˜¶æ®µåˆ™æ˜¯ä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ä¸ºç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚</p><p>CMSæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æ”¶é›†å™¨ï¼Œå®ƒçš„ä¸»è¦ä¼˜ç‚¹åœ¨åå­—ä¸Šå·²ç»ä½“ç°å‡ºæ¥äº†ï¼šå¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚ä½†æ˜¯å®ƒä¹Ÿæœ‰ä»¥ä¸‹4ä¸ªæ˜æ˜¾ç¼ºç‚¹ï¼š</p><ul><li>å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿ</li><li>æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œå¯èƒ½å‡ºç°<code>Concurrent Mode Failure</code>å¤±è´¥è€Œå¯¼è‡´å¦ä¸€æ¬¡Full GCçš„äº§ç”Ÿã€‚</li><li>åŸºäº<strong>æ ‡è®°-æ¸…é™¤</strong>ç®—æ³•å®ç°ï¼Œæœ‰å¯èƒ½æ”¶é›†ç»“æŸæ—¶æœ‰å¤§é‡ç©ºé—´ç¢ç‰‡äº§ç”Ÿã€‚</li></ul><h4 id="G1æ”¶é›†å™¨"><a href="#G1æ”¶é›†å™¨" class="headerlink" title="G1æ”¶é›†å™¨"></a>G1æ”¶é›†å™¨</h4><p>G1ï¼ˆGarbage-Firstï¼‰æ”¶é›†å™¨æ˜¯å½“ä»Šæ”¶é›†å™¨æŠ€æœ¯å‘å±•çš„æœ€å‰æ²¿æˆæœä¹‹ä¸€ã€‚G1å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å¹¶è¡Œä¸å¹¶å‘ï¼šG1èƒ½å……åˆ†åˆ©ç”¨å¤šCPUï¼Œæ¥ç¼©çŸ­Stop The Worldåœé¡¿æ—¶é—´ï¼Œä»ç„¶å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®©Javaç¨‹åºç»§ç»­è¿è¡Œã€‚</li><li>åˆ†ä»£æ”¶é›†ï¼šå®ƒèƒ½é‡‡ç”¨ä¸åŒçš„æ–¹å¼å¤„ç†æ–°åˆ›å»ºçš„å¯¹è±¡å’Œå·²ç»å­˜æ´»ä¸€æ®µæ—¶é—´çš„å¯¹è±¡ã€ç†¬è¿‡å¤šæ¬¡GCçš„æ—§å¯¹è±¡ä»¥è·å–æ›´å¥½çš„æ”¶é›†æ•ˆæœã€‚</li><li>ç©ºé—´æ•´åˆï¼šG1ä»æ•´ä½“æ¥çœ‹æ˜¯åŸºäº<strong>æ ‡è®°-æ•´ç†</strong>ç®—æ³•ï¼Œä»å±€éƒ¨ï¼ˆä¸¤ä¸ªRegionï¼‰ä¸Šæ¥çœ‹æ˜¯åŸºäº<strong>å¤åˆ¶</strong>ç®—æ³•å®ç°çš„ã€‚è¿™ä¸¤ç§ç®—æ³•éƒ½ä¸ä¼šäº§ç”Ÿç©ºé—´ç¢ç‰‡ï¼Œæ”¶é›†åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜ã€‚</li><li>å¯é¢„æµ‹çš„åœé¡¿ï¼šé™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ã€‚èƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡Nç§’ã€‚</li></ul><p>G1æ”¶é›†å™¨ä¹‹æ‰€ä»¥èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼Œæ˜¯å› ä¸ºå®ƒå¯ä»¥æœ‰è®¡åˆ’åœ°é¿å…åœ¨æ•´ä¸ªJavaå †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚G1è·Ÿè¸ªå„ä¸ªRegioné‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„Regionï¼ˆè¿™ä¹Ÿå°±æ˜¯Garbage Firstçš„ç”±æ¥ï¼‰ã€‚</p><p>åœ¨G1æ”¶é›†å™¨ä¸­ï¼ŒRegionä¹‹é—´çš„å¯¹è±¡å¼•ç”¨ä»¥åŠå…¶ä»–æ”¶é›†å™¨ä¸­çš„æ–°ç”Ÿä»£ä¸è€å¹´ä»£ä¹‹é—´çš„å¯¹è±¡å¼•ç”¨ï¼Œè™šæ‹Ÿæœºéƒ½æ˜¯ä½¿ç”¨<code>Remembered Set</code>æ¥é¿å…å…¨å †æ‰«æçš„ã€‚G1ä¸­æ¯ä¸ªRegionéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„<code>Remembered Set</code>ï¼Œè™šæ‹Ÿæœºå‘ç°ç¨‹åºåœ¨å¯¹Referenceç±»å‹çš„æ•°æ®è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ª<code>Write Barrier</code>æš‚æ—¶ä¸­æ–­å†™æ“ä½œï¼Œæ£€æŸ¥Referenceå¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å¤„äºä¸åŒçš„Regionä¹‹ä¸­ï¼ˆåœ¨åˆ†ä»£çš„ä¾‹å­ä¸­å°±æ˜¯æ£€æŸ¥æ˜¯å¦è€å¹´ä»£ä¸­çš„å¯¹è±¡å¼•ç”¨äº†æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œä¾¿é€šè¿‡CardTableæŠŠç›¸å…³å¼•ç”¨ä¿¡æ¯è®°å½•åˆ°è¢«å¼•ç”¨å¯¹è±¡æ‰€å±çš„Regionçš„<code>Remembered Set</code>ä¹‹ä¸­ã€‚å½“è¿›è¡Œå†…å­˜å›æ”¶æ—¶ï¼Œåœ¨GCæ ¹èŠ‚ç‚¹çš„æšä¸¾èŒƒå›´ä¸­åŠ å…¥<code>Remembered Set</code>æ—¢å¯ä¿è¯ä¸å¯¹å…¨å †æ‰«æä¹Ÿä¸ä¼šæœ‰é—æ¼ã€‚</p><p>å¦‚æœä¸è®¡ç»´æŠ¤<code>Remembered Set</code>çš„æ“ä½œï¼ŒG1æ”¶é›†å™¨çš„è¿ä½œå¤§æ¦‚åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li>åˆå§‹æ ‡è®°ï¼ˆInitial Markingï¼‰</li><li>å¹¶å‘æ ‡è®°ï¼ˆConcurrent Markingï¼‰</li><li>æœ€ç»ˆæ ‡è®°ï¼ˆFinal Markingï¼‰</li><li>ç­›é€‰å›æ”¶ï¼ˆLive Data Counting and Evacuationï¼‰</li></ul><h3 id="å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥"><a href="#å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥" class="headerlink" title="å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥"></a>å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥</h3><h4 id="å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…"><a href="#å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…" class="headerlink" title="å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…"></a>å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…</h4><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡åœ¨æ–°ç”Ÿä»£EdenåŒºä¸­åˆ†é…ã€‚å½“EdenåŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºå°†å‘èµ·ä¸€æ¬¡<code>Minor GC</code>ã€‚</p><p>è™šæ‹Ÿæœºæä¾›äº†<code>-XX:PrintGCDetails</code>è¿™ä¸ªæ”¶é›†å™¨æ—¥å¿—å‚æ•°ï¼Œå‘Šè¯‰è™šæ‹Ÿæœºåœ¨å‘ç”Ÿåƒåœ¾æ”¶é›†è¡Œä¸ºæ—¶æ‰“å°å†…å­˜å›æ”¶æ—¥å¿—ï¼Œå¹¶ä¸”åœ¨è¿›ç¨‹é€€å‡ºçš„æ—¶å€™è¾“å‡ºå½“å‰çš„å†…å­˜å„åŒºåŸŸåˆ†é…æƒ…å†µã€‚</p><h4 id="å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£"><a href="#å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£" class="headerlink" title="å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£"></a>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</h4><p>æ‰€è°“å¤§å¯¹è±¡æ˜¯æŒ‡ï¼Œéœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„Javaå¯¹è±¡ï¼Œæœ€å…¸å‹çš„é‚£ç§å¤§å¯¹è±¡å°±æ˜¯é‚£ç§å¾ˆé•¿çš„å­—ç¬¦ä¸²ä»¥åŠæ•°ç»„ã€‚ç»å¸¸å‡ºç°å¤§å¯¹è±¡å®¹æ˜“å¯¼è‡´å†…å­˜è¿˜æœ‰ä¸å°‘ç©ºé—´æ—¶ï¼Œå°±æå‰è§¦å‘åƒåœ¾æ”¶é›†ä»¥è·å–è¶³å¤Ÿçš„è¿ç»­ç©ºé—´ã€‚</p><p>è™šæ‹Ÿæœºæä¾›ä¸€ä¸ª<code>-XX:PretenureSizeThreshold</code>å‚æ•°ï¼Œä»¤å¤§äºè¿™ä¸ªè®¾ç½®å€¼çš„å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…ï¼ˆä¸æ˜¯æ‰€æœ‰è™šæ‹Ÿæœºéƒ½æ”¯æŒè¯¥å‚æ•°ï¼‰ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯é¿å…åœ¨EdenåŒºä»¥åŠä¸¤ä¸ª<code>Suvivor</code>åŒºä¹‹é—´å‘ç”Ÿå¤§é‡çš„å†…å­˜å¤åˆ¶ã€‚</p><h4 id="é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"><a href="#é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£" class="headerlink" title="é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"></a>é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£</h4><p>æ—¢ç„¶è™šæ‹Ÿæœºé‡‡ç”¨äº†åˆ†ä»£æ”¶é›†çš„æ€æƒ³æ¥ç®¡ç†å†…å­˜ï¼Œé‚£ä¹ˆå†…å­˜å›æ”¶æ—¶å°±å¿…é¡»èƒ½è¯†åˆ«å“ªäº›å¯¹è±¡åº”æ”¾åœ¨æ–°ç”Ÿä»£ï¼Œå“ªäº›å¯¹è±¡åº”æ”¾åœ¨è€å¹´ä»£ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œè™šæ‹Ÿæœºç»™æ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å¹´é¾„è®¡æ•°å™¨ã€‚å¦‚æœå¯¹è±¡åœ¨Edenå‡ºç”Ÿï¼Œå¹¶ä¸”ç»å†è¿‡ä¸€æ¬¡<code>Minor GC</code>åä»å­˜æ´»ï¼Œå¹¶ä¸”èƒ½è¢«<code>Suvivor</code>å®¹çº³çš„è¯ï¼Œå°†è¢«ç§»åŠ¨åˆ°<code>Suvivor</code>ç©ºé—´ä¸­ï¼Œå¹¶ä¸”å¯¹è±¡å¹´é¾„è®¾ä¸º1ã€‚å¯¹è±¡åœ¨<code>Suvivor</code>åŒºä¸­æ²¡ç†¬è¿‡ä¸€æ¬¡<code>Minor GC</code>ï¼Œå¹´é¾„å°±å¢åŠ 1å²ï¼Œå½“å®ƒçš„å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦ï¼ˆé»˜è®¤ä¸º15å²ï¼‰ï¼Œå°±å°†ä¼šè¢«æ™‹å‡åˆ°è€å¹´ä»£ä¸­ã€‚</p><p>å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£çš„é˜ˆå€¼ï¼Œå¯ä»¥é€šè¿‡å‚æ•°<code>-XX:MaxTenuringThreshold</code>è®¾ç½®ã€‚</p><h4 id="åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"><a href="#åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š" class="headerlink" title="åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"></a>åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š</h4><p>ä¸ºäº†èƒ½æ›´å¥½åœ°é€‚åº”ä¸åŒç¨‹åºçš„å†…å­˜æƒ…å†µï¼Œè™šæ‹Ÿæœºå¹¶ä¸æ˜¯æ°¸è¿œåœ°è¦æ±‚å¯¹è±¡çš„å¹´é¾„å¿…é¡»è¾¾åˆ°äº†<code>MaxTenuringThreshold</code>æ‰èƒ½æ™‹å‡è€å¹´ä»£ï¼Œå¦‚æœåœ¨<code>Suvivor</code>ç©ºé—´ä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°çš„æ€»å’Œå¤§äº<code>Suvivor</code>ç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œæ— éœ€ç­‰åˆ°<code>MaxTenuringThreshold</code>ä¸­è¦å»çš„å¹´é¾„ã€‚</p><h4 id="ç©ºé—´åˆ†é…æ‹…ä¿"><a href="#ç©ºé—´åˆ†é…æ‹…ä¿" class="headerlink" title="ç©ºé—´åˆ†é…æ‹…ä¿"></a>ç©ºé—´åˆ†é…æ‹…ä¿</h4><p>åœ¨å‘ç”Ÿ<code>Minor GC</code>ä¹‹å‰ï¼Œè™šæ‹Ÿæœºä¼šæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡æ€»ç©ºé—´ã€‚å¦‚æœè¿™ä¸ªæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆMinor GCå¯ä»¥ç¡®ä¿æ˜¯å®‰å…¨çš„ã€‚å¦‚æœä¸æˆç«‹ï¼Œåˆ™è™šæ‹Ÿæœºä¼šæŸ¥çœ‹<code>HandlePromotionFailure</code>è®¾ç½®å€¼æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥ã€‚å¦‚æœå…è®¸ï¼Œé‚£ä¹ˆä¼šç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡æ™‹å‡åˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å°ï¼Œå¦‚æœå¤§äºï¼Œå°†å°è¯•ç€è¿›è¡Œä¸€æ¬¡Minor GCï¼Œå°½ç®¡è¿™æ¬¡Minor GCæ˜¯æœ‰é£é™©çš„ï¼›å¦‚æœå°äºï¼Œæˆ–è€…<code>HandlePromotionFailure</code>è®¾ç½®ä¸å…è®¸å†’é™©ï¼Œé‚£è¿™æ—¶ä¹Ÿè¦æ”¹ä¸ºè¿›è¡Œä¸€æ¬¡ <code>Full GC</code>ã€‚</p><h3 id="Minor-GCå’ŒFull-GCæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ"><a href="#Minor-GCå’ŒFull-GCæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ" class="headerlink" title="Minor GCå’ŒFull GCæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ"></a>Minor GCå’ŒFull GCæœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ</h3><h4 id="Minor-GC"><a href="#Minor-GC" class="headerlink" title="Minor GC"></a>Minor GC</h4><p>æ–°ç”Ÿä»£GC ï¼ˆMinor GCï¼‰ï¼šæŒ‡å‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†åŠ¨ä½œï¼Œå› ä¸ºJavaå¯¹è±¡å¤§å¤šéƒ½å…·å¤‡æœç”Ÿå¤•ç­çš„ç‰¹æ€§ï¼Œæ‰€ä»¥Minor GCä¼šéå¸¸é¢‘ç¹ï¼Œä¸€èˆ¬å›æ”¶é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«ã€‚</p><h4 id="Full-GC"><a href="#Full-GC" class="headerlink" title="Full GC"></a>Full GC</h4><p>è€å¹´ä»£GC ï¼ˆMajor GC/Full GCï¼‰ï¼šæŒ‡å‘ç”Ÿåœ¨è€å¹´ä»£çš„GCï¼Œå‡ºç°äº†Major GCï¼Œç»å¸¸ä¼šä¼´éšè‡³å°‘ä¸€æ¬¡çš„Minor GCï¼ˆéç»å¯¹ï¼‰ã€‚Major GCçš„é€Ÿåº¦ä¸€èˆ¬ä¼šæ¯”Minor GCæ…¢10å€ä»¥ä¸Šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ™ƒJavaè™šæ‹Ÿæœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åƒåœ¾å›æ”¶ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLç´¢å¼• åº•å±‚æ•°æ®ç»“æ„ B+æ ‘æ˜¯ä»€ä¹ˆ</title>
      <link href="/2019/10/25/b+tree/"/>
      <url>/2019/10/25/b+tree/</url>
      
        <content type="html"><![CDATA[<p>Innodbç´¢å¼•åº•å±‚æ•°æ®ç»“æ„å¼B+æ ‘ã€‚æ‰€ä»¥ä»‹ç»ç´¢å¼•å®ç°åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯B+æ ‘ã€‚çœ‹B+æ ‘ä¹‹å‰æˆ‘ä»¬ï¼Œè¦äº†è§£ä¸€ä¸‹äºŒå‰æŸ¥æ‰¾æ ‘å’Œå¹³è¡¡äºŒå‰æ ‘ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Ÿ</h3><p>äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œåˆå«åšäºŒå‰æ’åºæ ‘ï¼Œä¹Ÿå«åšäºŒå‰æœç´¢æ ‘ã€‚</p><a id="more"></a><p>äºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…ä½¿ç”¨ä¸€é¢—ç©ºæ ‘ï¼›æˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘</p><ul><li>è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼›</li><li>è‹¥ä»–çš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼›</li><li>å®ƒçš„å·¦å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æœç´¢æ ‘ã€‚</li></ul><p>å¯ä»¥çœ‹å‡ºæ¥ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘ä¸­åºéå†å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…³é”®å­—çš„æœ‰åºåºåˆ—ã€‚äºŒå‰æŸ¥æ‰¾æ ‘æ—¢æ‹¥æœ‰ç±»ä¼¼æŠ˜åŠæŸ¥æ‰¾çš„ç‰¹æ€§ï¼Œåˆé‡‡ç”¨äº†é“¾è¡¨åšå­˜å‚¨ç»“æ„ï¼Œå› æ­¤æ˜¯åŠ¨æ€æŸ¥æ‰¾è¡¨çš„ä¸€ç§é€‚å®œè¡¨ç¤ºã€‚</p><p>åœ¨äºŒå‰æŸ¥æ‰¾æ ‘ä¸ŠæŸ¥æ‰¾å…¶å…³é”®å­—ç­‰äºç»™å®šå€¼ç»“ç‚¹çš„è¿‡ç¨‹ï¼Œæ°æ˜¯èµ°äº†ä¸€æ¡ä»æ ¹ç»“ç‚¹åˆ°è¯¥ç»“ç‚¹çš„è·¯å¾„çš„è¿‡ç¨‹ã€‚æ‰€ä»¥ï¼Œå«æœ‰nä¸ªç»“ç‚¹çš„äºŒå‰æŸ¥æ‰¾æ ‘å¤«äººå¹³å‡æŸ¥æ‰¾é•¿åº¦å’Œæ ‘çš„å½¢æ€æœ‰å…³ã€‚</p><p>å½“å…ˆåæ’å…¥çš„å…³é”®å­—æœ‰åºæ—¶ï¼Œæ„æˆçš„äºŒå‰æŸ¥æ‰¾æ ‘èœ•å˜ä¸ºå•æ”¯æ ‘ã€‚<br>æ‰€ä»¥ï¼Œéœ€è¦å¯¹äºŒå‰æŸ¥æ‰¾æ ‘ è¿›è¡Œ <strong>å¹³è¡¡åŒ–</strong>å¤„ç†ï¼Œæˆä¸ºäºŒå‰å¹³è¡¡æ ‘ã€‚</p><h3 id="å¹³è¡¡äºŒå‰æ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘"></a>å¹³è¡¡äºŒå‰æ ‘</h3><p>å¹³è¡¡äºŒå‰æ ‘ï¼ˆBalanced Binary Treeï¼‰åˆç§°AVLæ ‘ã€‚å®ƒæˆ–è€…æ˜¯ä¸€é¢—ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼šå®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œä¸”å·¦å­æ ‘å’Œå³å­æ ‘çš„æ·±åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ã€‚</p><p>å¦‚æœäºŒå‰æŸ¥æ‰¾æ ‘æ˜¯AVLæ ‘ï¼Œåˆ™å®ƒçš„æ·±åº¦å’Œlognæ˜¯åŒæ•°é‡çº§çš„ã€‚å› æ­¤ï¼Œå®ƒçš„å¹³å‡æŸ¥æ‰¾é•¿åº¦ä¹Ÿå’ŒlognåŒæ•°é‡çº§ã€‚</p><h3 id="B-Treeå¹³è¡¡å¤šè·¯æŸ¥æ‰¾æ ‘"><a href="#B-Treeå¹³è¡¡å¤šè·¯æŸ¥æ‰¾æ ‘" class="headerlink" title="B-Treeå¹³è¡¡å¤šè·¯æŸ¥æ‰¾æ ‘"></a>B-Treeå¹³è¡¡å¤šè·¯æŸ¥æ‰¾æ ‘</h3><p>B-Treeæ˜¯ä¸€ç§å¹³è¡¡çš„å¤šè·¯æŸ¥æ‰¾æ ‘ã€‚ä¸€é¢—mé˜¶çš„çš„B-æ ‘ï¼Œæˆ–ä¸ºæ»¡è¶³ä¸‹åˆ—ç‰¹æ€§çš„må‰æ ‘ï¼š</p><ul><li>æ ‘ä¸­æ¯ä¸ªç»“ç‚¹æœ€å¤šæœ‰mæ£µå­æ ‘ï¼›</li><li>è‹¥æ ¹ç»“ç‚¹ä¸æ˜¯å¶å­ç»“ç‚¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸¤æ£µå­æ ‘ï¼›</li><li>é™¤æ ¹ä¹‹å¤–çš„æ‰€æœ‰éç»ˆç«¯ç»“ç‚¹è‡³å°‘æœ‰ã€m/2ã€‘æ£µå­æ ‘ï¼›</li><li>æ‰€æœ‰éç»ˆç«¯ç»“ç‚¹ä¸­åŒ…å«ä¿¡æ¯æ•°æ®ï¼›</li><li>æ‰€æœ‰å¶å­ç»“ç‚¹éƒ½å‡ºç°åœ¨åŒä¸€å±‚æ¬¡ä¸Šï¼Œå¹¶ä¸”ä¸å¸¦ä¿¡æ¯ã€‚</li></ul><p>ç”±B-æ ‘å®šä¹‰å¯çŸ¥ï¼Œåœ¨B-æ ‘ä¸Šè¿›è¡ŒæŸ¥æ‰¾çš„è¿‡ç¨‹å’ŒäºŒå‰æŸ¥æ‰¾æ ‘çš„æŸ¥æ‰¾ç±»ä¼¼ã€‚B-æ ‘æŸ¥æ‰¾åŒ…å«ä¸¤ç§åŸºæœ¬æ“ä½œï¼š</p><ul><li>åœ¨B-æ ‘ä¸­æ‰¾ç»“ç‚¹ï¼›</li><li>åœ¨ç»“ç‚¹ä¸­æ‰¾å…³é”®å­—ã€‚</li></ul><h3 id="B-æ ‘"><a href="#B-æ ‘" class="headerlink" title="B+æ ‘"></a>B+æ ‘</h3><p>B+æ ‘æ˜¯åº”æ–‡ä»¶ç³»ç»Ÿæ‰€éœ€è€Œå‡ºçš„ä¸€ç§B-æ ‘çš„å˜å½¢æ ‘ã€‚ä¸€æ£µmé˜¶çš„B+æ ‘å’Œmé˜¶çš„B-æ ‘çš„å·®å¼‚åœ¨äºï¼š</p><ul><li>æœ‰næ£µå­æ ‘çš„ç»“ç‚¹ä¸­å«æœ‰nä¸ªå…³é”®å­—ã€‚</li><li>æ‰€æœ‰å¶å­ç»“ç‚¹ä¸­åŒ…å«äº†å…¨éƒ¨å…³é”®å­—çš„ä¿¡æ¯ï¼Œä»¥åŠæŒ‡å‘è¿™äº›å…³é”®å­—è®°å½•çš„æŒ‡é’ˆï¼Œä¸”å¶å­ç»“ç‚¹æœ¬èº«ä¾å…³é”®å­—çš„å¤§å°è‡ªå°è€Œå¤§é¡ºåºé“¾æ¥ã€‚</li><li>æ‰€æœ‰éç»ˆç«¯ç»“ç‚¹å¯ä»¥çœ‹æˆæ˜¯ç´¢å¼•éƒ¨åˆ†ï¼Œç»“ç‚¹ä¸­ä»…å«æœ‰å…¶å­æ ‘ä¸­çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…³é”®å­—ã€‚</li></ul><p>B+æ ‘ä¸Šçš„æŸ¥æ‰¾ç±»ä¼¼B-æ ‘ã€‚åªæ˜¯åœ¨æŸ¥æ‰¾æ—¶ï¼Œä¸ç®¡æŸ¥æ‰¾æˆåŠŸä¸å¦ï¼Œæ¯æ¬¡æŸ¥æ‰¾éƒ½æ˜¯èµ°äº†ä¸€æ¡ä»æ ¹åˆ°å¶å­ç»“ç‚¹çš„è·¯å¾„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜¨æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> B+æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£JVMä¹‹Javaç±»åŠ è½½æœºåˆ¶</title>
      <link href="/2019/10/23/java-class-load-mechanism/"/>
      <url>/2019/10/23/java-class-load-mechanism/</url>
      
        <content type="html"><![CDATA[<h3 id="Classæ–‡ä»¶ç»“æ„"><a href="#Classæ–‡ä»¶ç»“æ„" class="headerlink" title="Classæ–‡ä»¶ç»“æ„"></a>Classæ–‡ä»¶ç»“æ„</h3><p>ä»»ä½•ä¸€ä¸ªClassæ–‡ä»¶éƒ½å¯¹åº”ç€å”¯ä¸€ä¸€ä¸ªç±»æˆ–è€…æ¥å£çš„å®šä¹‰ä¿¡æ¯</p><a id="more"></a><ul><li>é­”æ•°ï¼šç¡®å®šè¿™ä¸ªæ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªèƒ½è¢«è™šæ‹Ÿæœºæ¥å—çš„Classæ–‡ä»¶</li><li>ç‰ˆæœ¬å·ï¼šä½ç‰ˆæœ¬ä¸èƒ½æ‰§è¡Œé«˜ç‰ˆæœ¬Classæ–‡ä»¶ï¼Œé«˜ç‰ˆæœ¬å¯ä»¥æ‰§è¡Œä½ç‰ˆæœ¬</li><li>å¸¸é‡æ± ï¼šClassæ–‡ä»¶ä¸­çš„èµ„æºä»“åº“</li><li>è®¿é—®æ ‡å¿—ï¼šç”¨äºè¯†åˆ«ä¸€äº›ç±»æˆ–è€…æ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯</li><li>ç±»ç´¢å¼•ã€çˆ¶ç±»ç´¢å¼•ã€ç´¢å¼•é›†åˆï¼šç¡®å®šç±»çš„ç»§æ‰¿å…³ç³»</li><li>å­—æ®µè¡¨ï¼šç”¨äºæè¿°æ¥å£æˆ–è€…ç±»ä¸­å£°æ˜çš„å˜é‡</li><li>æ–¹æ³•è¡¨ï¼šç”¨äºæè¿°æ–¹æ³•ä¸Šå£°æ˜çš„å˜é‡</li><li>å±æ€§è¡¨ï¼šClassæ–‡ä»¶ã€å­—æ®µè¡¨ã€æ–¹æ³•è¡¨éƒ½å¯ä»¥æºå¸¦è‡ªå·±çš„å±æ€§è¡¨é›†åˆï¼Œä»¥ç”¨äºæè¿°æŸäº›åœºæ™¯ä¸“æœ‰çš„ä¿¡æ¯</li></ul><h4 id="å¸¸é‡æ± è¯¦ç»†ä»‹ç»"><a href="#å¸¸é‡æ± è¯¦ç»†ä»‹ç»" class="headerlink" title="å¸¸é‡æ± è¯¦ç»†ä»‹ç»"></a>å¸¸é‡æ± è¯¦ç»†ä»‹ç»</h4><p>ç”±äºå¸¸é‡æ± ä¸­å¸¸é‡çš„æ•°é‡æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥åœ¨å¸¸é‡æ± çš„å…¥å£éœ€è¦æ”¾ç½®ä¸€é¡¹u2ç±»å‹çš„æ•°æ®ï¼Œä»£è¡¨å¸¸é‡æ± å®¹é‡è®¡æ•°å€¼ï¼ˆconstant_pool_countï¼‰ã€‚<strong>è¿™ä¸ªå®¹é‡è®¡æ•°æ˜¯ä»1å¼€å§‹çš„</strong>ï¼Œç¬¬0é¡¹ä½ç½®æ˜¯ç”¨æ¥è¡¨è¾¾<strong>ä¸å¼•ç”¨ä»»ä½•ä¸€ä¸ªå¸¸é‡æ± é¡¹ç›®</strong>çš„å«ä¹‰ã€‚</p><p>å¸¸é‡æ± ä¸»è¦å­˜æ”¾ä¸¤å¤§ç±»å¸¸é‡ï¼Œå­—é¢é‡ï¼ˆLiteralï¼‰å’Œç¬¦å·å¼•ç”¨ï¼ˆSymbolic Referencesï¼‰ã€‚å­—é¢é‡æ¯”è¾ƒæ¥è¿‘Javaè¯­è¨€å±‚é¢å¸¸é‡çš„æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€å£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ç­‰ã€‚è€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬äº†ä¸‹é¢ä¸‰ç±»å¸¸é‡ï¼š</p><ul><li>ç±»å’Œæ¥å£çš„å…ƒé™å®šåï¼ˆFull Qualified Nameï¼‰</li><li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ï¼ˆDescriptorï¼‰</li><li>æ–¹æ³•åç§°å’Œæè¿°ç¬¦</li></ul><p>åœ¨Classæ–‡ä»¶ä¸­ä¸ä¼šä¿å­˜å„ä¸ªæ–¹æ³•ã€å­—æ®µçš„æœ€ç»ˆå†…å­˜å¸ƒå±€ä¿¡æ¯ï¼Œå› æ­¤è¿™äº›å­—æ®µã€æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ä¸ç»è¿‡è¿è¡ŒæœŸè½¬æ¢çš„è¯æ— æ³•å¾—åˆ°çœŸæ­£çš„å†…å­˜å…¥å£åœ°å€ï¼Œä¹Ÿå°±æ— æ³•ç›´æ¥è¢«è™šæ‹Ÿæœºä½¿ç”¨ã€‚å½“è™šæ‹Ÿæœºè¿è¡Œæ—¶ï¼Œéœ€è¦ä»å¸¸é‡æ± è·å¾—å¯¹åº”çš„ç¬¦å·å¼•ç”¨ï¼Œå†åœ¨ç±»åˆ›å»ºæ—¶æˆ–è¿è¡Œæ—¶è§£æã€ç¿»è¯‘åˆ°å…·ä½“çš„å†…å­˜åœ°å€ä¹‹ä¸­ã€‚</p><h3 id="ç±»åŠ è½½è¿‡ç¨‹"><a href="#ç±»åŠ è½½è¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½è¿‡ç¨‹"></a>ç±»åŠ è½½è¿‡ç¨‹</h3><p>ç±»ä»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­å¼€å§‹ï¼Œåˆ°å¸è½½å‡ºå†…å­˜ä¸ºæ­¢ï¼Œå®ƒçš„æ•´ä¸ªè¯æ˜å‘¨æœŸåŒ…æ‹¬ï¼šåŠ è½½ï¼ˆLoadingï¼‰ã€éªŒè¯ï¼ˆVerificationï¼‰ã€å‡†å¤‡ï¼ˆPreparationï¼‰ã€è§£æï¼ˆResolutionï¼‰ã€åˆå§‹åŒ–ï¼ˆInitializationï¼‰ã€ä½¿ç”¨ï¼ˆUsingï¼‰å’Œå¸è½½ï¼ˆUnloadingï¼‰7ä¸ªé˜¶æ®µã€‚å…¶ä¸­éªŒè¯ã€å‡†å¤‡ã€è§£æ3ä¸ªéƒ¨åˆ†ç»Ÿç§°ä¸ºè¿æ¥ï¼ˆLinkingï¼‰ã€‚</p><h4 id="åŠ è½½"><a href="#åŠ è½½" class="headerlink" title="åŠ è½½"></a>åŠ è½½</h4><p>åœ¨åŠ è½½é˜¶æ®µï¼Œè™šæ‹Ÿæœºä¼šå®Œæˆä»¥ä¸‹ä¸‰ä»¶äº‹æƒ…ï¼š</p><ul><li>é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚</li><li>å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚</li><li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„<code>java.lang.Class</code>å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ã€‚</li></ul><h4 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><p>éªŒè¯æ˜¯è¿æ¥é˜¶æ®µçš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µçš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«å®‰å…¨ã€‚</p><p>éªŒè¯é˜¶æ®µå¤§è‡´ä¼šå®Œæˆä»¥ä¸‹4ä¸ªé˜¶æ®µçš„æ£€éªŒåŠ¨ä½œï¼š</p><ul><li>æ–‡ä»¶æ ¼å¼éªŒè¯</li><li>å…ƒæ•°æ®éªŒè¯</li><li>å­—èŠ‚ç éªŒè¯</li><li>ç¬¦å·å¼•ç”¨éªŒè¯</li></ul><h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…ã€‚</p><p>é¦–å…ˆï¼Œè¿™æ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ä»…åŒ…æ‹¬ç±»å˜é‡ï¼ˆè¢«<code>static</code>ä¿®é¥°çš„å˜é‡ï¼‰ï¼Œè€Œä¸åŒ…æ‹¬å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­ã€‚</p><p>å…¶æ¬¡ï¼Œè¿™é‡Œæ‰€è¯´çš„åˆå§‹å€¼ï¼Œé€šå¸¸æƒ…å†µæ˜¯æ•°æ®ç±»å‹çš„é›¶å€¼ã€‚</p><p>ç›¸å¯¹çš„ï¼Œæœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœç±»å­—æ®µçš„å­—æ®µå±æ€§è¡¨ä¸­å­˜åœ¨<code>ConstantValue</code>ï¼Œé‚£åœ¨å‡†å¤‡é˜¶æ®µå˜é‡å°±ä¼šåˆå§‹åŒ–ä¸º<code>ConstantValue</code>å±æ€§æ‰€æŒ‡çš„å€¼ã€‚</p><h4 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h4><p>è§£æé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚</p><h5 id="ç¬¦åˆå¼•ç”¨ï¼ˆSymbolic-Referencesï¼‰"><a href="#ç¬¦åˆå¼•ç”¨ï¼ˆSymbolic-Referencesï¼‰" class="headerlink" title="ç¬¦åˆå¼•ç”¨ï¼ˆSymbolic Referencesï¼‰"></a>ç¬¦åˆå¼•ç”¨ï¼ˆSymbolic Referencesï¼‰</h5><p>ç¬¦å·å¼•ç”¨ä»¥ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ï¼Œç¬¦å·å¯ä»¥æ˜¯ä»»ä½•å½¢å¼çš„å­—é¢é‡ï¼Œåªè¦ä½¿ç”¨æ—¶èƒ½æ— æ­§ä¹‰çš„å®šä½åˆ°ç›®æ ‡å³å¯ã€‚</p><h5 id="ç›´æ¥å¼•ç”¨ï¼ˆDirect-Referencesï¼‰"><a href="#ç›´æ¥å¼•ç”¨ï¼ˆDirect-Referencesï¼‰" class="headerlink" title="ç›´æ¥å¼•ç”¨ï¼ˆDirect Referencesï¼‰"></a>ç›´æ¥å¼•ç”¨ï¼ˆDirect Referencesï¼‰</h5><p>ç›´æ¥å¼•ç”¨å¯ä»¥æ˜¯ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–æ˜¯ä¸€ä¸ªèƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ã€‚å¦‚æœæœ‰äº†ç›´æ¥å¼•ç”¨ï¼Œé‚£å¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»åœ¨å†…å­˜ä¸­ã€‚</p><h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><p>æ˜¯ç±»åŠ è½½è¿‡ç¨‹çš„æœ€åä¸€æ­¥ã€‚åœ¨å‡†å¤‡é˜¶æ®µï¼Œå˜é‡å·²ç»èµ‹è¿‡ä¸€æ¬¡ç³»ç»Ÿè¦æ±‚çš„åˆå§‹å€¼ã€‚è€Œåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œåˆ™æ ¹æ®ç¨‹åºå‘˜çš„ä»£ç å»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æºã€‚</p><h3 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h3><p>è™šæ‹Ÿæœºè®¾è®¡å›¢é˜ŸæŠŠç±»åŠ è½½é˜¶æ®µä¸­çš„â€œé€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµâ€è¿™ä¸ªåŠ¨ä½œæ”¾åˆ°Javaè™šæ‹Ÿæœºå¤–éƒ¨å®ç°ï¼Œä»¥ä¾¿è®©åº”ç”¨ç¨‹åºè‡ªå·±å†³å®šå¦‚ä½•å»è·å–æ‰€éœ€è¦çš„ç±»ã€‚å®ç°è¿™ä¸ªåŠ¨ä½œçš„ä»£ç æ¨¡å—ç§°ä¸ºâ€œç±»åŠ è½½å™¨â€ã€‚</p><h3 id="åŒäº²å§”æ´¾æ¨¡å‹"><a href="#åŒäº²å§”æ´¾æ¨¡å‹" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹"></a>åŒäº²å§”æ´¾æ¨¡å‹</h3><p>ä»Javaè™šæ‹Ÿæœºçš„è§’åº¦æ¥è®²ï¼Œåªå­˜åœ¨ä¸¤ç§ä¸åŒçš„ç±»åŠ è½½å™¨ï¼šä¸€ç§æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼Œè¿™ä¸ªç±»åŠ è½½å™¨ä½¿ç”¨C++å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºè‡ªèº«çš„ä¸€éƒ¨åˆ†ï¼›å¦ä¸€ç§å°±æ˜¯æ‰€æœ‰å…¶ä»–ç±»åŠ è½½å™¨ï¼Œè¿™äº›ç±»åŠ è½½å™¨éƒ½æ˜¯ç”±Javaå®ç°çš„ï¼Œç‹¬ç«‹äºè™šæ‹Ÿæœºå¤–éƒ¨ï¼Œå¹¶ä¸”å…¨éƒ½ç»§æ‰¿è‡ªæŠ½è±¡ç±»<code>java.lang.ClassLoader</code>ã€‚</p><p>ä»Javaå¼€å‘äººå‘˜çš„è§’åº¦ï¼Œç±»åŠ è½½å™¨å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰ï¼Œè¿™ä¸ªç±»åŠ è½½å™¨è´Ÿè´£å°†<code>JAVA_HOME/lib</code>ç±»åº“åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­ã€‚</li><li>æ‰©å±•ç±»åŠ è½½å™¨ï¼šï¼ˆExtension ClassLoaderï¼‰:å®ƒè´Ÿè´£åŠ è½½<code>JAVA_HOME/lib/ext</code>ç±»åº“åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­ã€‚</li><li>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰:å®ƒè´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“ã€‚</li></ul><h4 id="åŒäº²å§”æ´¾æ¨¡å‹å·¥ä½œè¿‡ç¨‹ï¼š"><a href="#åŒäº²å§”æ´¾æ¨¡å‹å·¥ä½œè¿‡ç¨‹ï¼š" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹å·¥ä½œè¿‡ç¨‹ï¼š"></a>åŒäº²å§”æ´¾æ¨¡å‹å·¥ä½œè¿‡ç¨‹ï¼š</h4><p>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼Œæ¯ä¸€å±‚çš„åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ï¼Œå› æ­¤æ‰€æœ‰çš„åŠ è½½è¯·æ±‚æœ€ç»ˆéƒ½åº”è¯¥ä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ï¼Œåªæœ‰å½“çˆ¶åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¿™ä¸ªåŠ è½½è¯·æ±‚ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€çš„ç±»ï¼‰æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚</p><h4 id="åŒäº²å§”æ´¾æ¨¡å‹ä¼˜ç‚¹ï¼š"><a href="#åŒäº²å§”æ´¾æ¨¡å‹ä¼˜ç‚¹ï¼š" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹ä¼˜ç‚¹ï¼š"></a>åŒäº²å§”æ´¾æ¨¡å‹ä¼˜ç‚¹ï¼š</h4><p>Javaç±»éšç€å®ƒçš„åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ã€‚ä¾‹å¦‚<code>java.lang.Object</code>ï¼Œæ— è®ºå“ªä¸€ä¸ªç±»åŠ è½½å™¨è¦åŠ è½½è¿™ä¸ªç±»ï¼Œæœ€ç»ˆéƒ½ä¼šå§”æ´¾ç»™å¤„äºæ¨¡å‹æœ€é¡¶ç«¯çš„å¯åŠ¨ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå› æ­¤<code>Object</code>ç±»åœ¨ç¨‹åºçš„å„ç§ç±»åŠ è½½å™¨ç¯å¢ƒä¸­éƒ½æ˜¯åŒä¸€ä¸ªç±»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ™ƒJavaè™šæ‹Ÿæœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaç±»åŠ è½½æœºåˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£JVMä¹‹Javaå†…å­˜åŒºåŸŸ</title>
      <link href="/2019/10/22/java-memory-area/"/>
      <url>/2019/10/22/java-memory-area/</url>
      
        <content type="html"><![CDATA[<h3 id="JVM-å†…å­˜åŒºåŸŸæ¨¡å‹"><a href="#JVM-å†…å­˜åŒºåŸŸæ¨¡å‹" class="headerlink" title="JVM å†…å­˜åŒºåŸŸæ¨¡å‹"></a>JVM å†…å­˜åŒºåŸŸæ¨¡å‹</h3><p>JVM å†…å­˜åŒºåŸŸåŸºæœ¬ä¸Šç”±4ä¸ªåŒºåŸŸç»„æˆï¼š</p><a id="more"></a><ul><li>ç±»åŠ è½½å™¨ï¼šåœ¨JVMå¯åŠ¨æ—¶æˆ–è€…ç±»è¿è¡Œæ—¶ï¼Œå°†éœ€è¦çš„classåŠ è½½åˆ°JVMä¸­ã€‚</li><li>è¿è¡Œæ—¶æ•°æ®åŒºï¼šå°†å†…å­˜åˆ’åˆ†æˆè‹¥å¹²ä¸ªåŒºä»¥æ¨¡æ‹Ÿå®é™…æœºå™¨ä¸Šçš„å­˜å‚¨ã€è®°å½•å’Œè°ƒåº¦åŠŸèƒ½æ¨¡å—ã€‚</li><li>æ‰§è¡Œå¼•æ“ï¼šè´Ÿè´£æ‰§è¡Œclassæ–‡ä»¶ä¸­åŒ…å«çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œç›¸å½“äºå®é™…æœºå™¨ä¸Šçš„CPUã€‚</li><li>æœ¬åœ°æ–¹æ³•è°ƒç”¨ï¼šæ‰§è¡ŒC/C++å®ç°çš„æœ¬åœ°æ–¹æ³•çš„ä»£ç ï¼Œå¹¶è¿”å›ç»“æœã€‚</li></ul><p><img src="/images/jvm-composition.png" alt></p><h3 id="Java-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"><a href="#Java-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ" class="headerlink" title="Java è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></a>Java è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h3><h4 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h4><p>Java çº¿ç¨‹ç§æœ‰ï¼Œç±»ä¼¼äºæ“ä½œç³»ç»Ÿé‡Œçš„ PC è®¡æ•°å™¨ï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚</p><ul><li>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯ Native æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚</li><li>æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½• OutOfMemoryError æƒ…å†µçš„åŒºåŸŸã€‚</li></ul><h4 id="Javaè™šæ‹Ÿæœºæ ˆ"><a href="#Javaè™šæ‹Ÿæœºæ ˆ" class="headerlink" title="Javaè™šæ‹Ÿæœºæ ˆ"></a>Javaè™šæ‹Ÿæœºæ ˆ</h4><p>Javaçº¿ç¨‹ç§æœ‰ï¼Œè™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼š</p><ul><li>æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡ã€æ“ä½œæ•°ã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚</li><li>æ¯ä¸ªæ–¹æ³•è°ƒç”¨éƒ½æ„å‘³ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</li></ul><h4 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h4><p>å’Œ Java è™šæ‹Ÿæœºæ ˆçš„ä½œç”¨ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯è¯¥åŒºåŸŸä¸º JVM æä¾›ä½¿ç”¨ Native æ–¹æ³•çš„æœåŠ¡ã€‚</p><h4 id="Javaå †"><a href="#Javaå †" class="headerlink" title="Javaå †"></a>Javaå †</h4><p>æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—åŒºåŸŸï¼Œåƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚</p><ul><li>ç›®å‰ä¸»è¦çš„åƒåœ¾å›æ”¶ç®—æ³•éƒ½æ˜¯åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ‰€ä»¥ Java å †ä¸­è¿˜å¯ä»¥ç»†åˆ†ä¸ºï¼šæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼›å†ç»†è‡´ä¸€ç‚¹çš„æœ‰ Eden ç©ºé—´ã€From Survivor ç©ºé—´ã€To Survivor ç©ºé—´ç­‰ï¼Œé»˜è®¤æƒ…å†µä¸‹æ–°ç”Ÿä»£æŒ‰ç…§ 8:1:1 çš„æ¯”ä¾‹æ¥åˆ†é…ã€‚</li><li>æ ¹æ® Java è™šæ‹Ÿæœºè§„èŒƒçš„è§„å®šï¼ŒJava å †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œåªè¦é€»è¾‘ä¸Šæ˜¯è¿ç»­çš„å³å¯ï¼Œå°±åƒæˆ‘ä»¬çš„ç£ç›˜ä¸€æ ·ã€‚</li></ul><h4 id="å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰"><a href="#å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰" class="headerlink" title="å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰"></a>å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰</h4><p>å„ä¸ªçº¿ç¨‹å…±äº«çš„ä¸€ä¸ªåŒºåŸŸï¼Œç”¨äºå­˜å‚¨è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</p><ul><li>è™½ç„¶ Java è™šæ‹Ÿæœºè§„èŒƒæŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«åš Non-Heapï¼ˆéå †ï¼‰ï¼Œç›®çš„åº”è¯¥æ˜¯ä¸ Java å †åŒºåˆ†å¼€æ¥ã€‚</li></ul><h4 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h4><p>æ˜¯å…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</p><h4 id="ç›´æ¥å†…å­˜"><a href="#ç›´æ¥å†…å­˜" class="headerlink" title="ç›´æ¥å†…å­˜"></a>ç›´æ¥å†…å­˜</h4><p>å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®çš„ä¸€éƒ¨åˆ†ã€‚JDK1.4å¼•å…¥äº†NIOï¼Œå®ƒå¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ã€‚ç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ°Javaå †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ä¼šå—åˆ°æœ¬æœºå†…å­˜çš„é™åˆ¶ã€‚ä¹Ÿå¯èƒ½å¯¼è‡´<code>OutOfMemoryError</code>å‡ºç°ã€‚</p><h3 id="Javaå¯¹è±¡çš„å†…å­˜å¸ƒå±€"><a href="#Javaå¯¹è±¡çš„å†…å­˜å¸ƒå±€" class="headerlink" title="Javaå¯¹è±¡çš„å†…å­˜å¸ƒå±€"></a>Javaå¯¹è±¡çš„å†…å­˜å¸ƒå±€</h3><p>åœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å¸ƒå±€å¯ä»¥åˆ†ä¸º3å—åŒºåŸŸï¼š</p><ul><li>å¯¹è±¡å¤´ï¼ˆHeaderï¼‰</li><li>å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰</li><li>å¯¹é½å¡«å……ï¼ˆPaddingï¼‰</li></ul><h4 id="å¯¹è±¡å¤´"><a href="#å¯¹è±¡å¤´" class="headerlink" title="å¯¹è±¡å¤´"></a>å¯¹è±¡å¤´</h4><p>HotSpotè™šæ‹Ÿæœºå¯¹è±¡å¤´åŒ…æ‹¬ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼Œç¬¬ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ä½ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ç­‰ï¼Œå®˜æ–¹ç§°ä¸ºâ€œMark Wordâ€ã€‚</p><p>å¯¹è±¡å¤´çš„å¦ä¸€éƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚</p><h4 id="å®ä¾‹æ•°æ®"><a href="#å®ä¾‹æ•°æ®" class="headerlink" title="å®ä¾‹æ•°æ®"></a>å®ä¾‹æ•°æ®</h4><p>æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿæ˜¯ç¨‹åºä»£ç ä¸­æ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ã€‚æ— è®ºæ˜¯ä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œè¿˜æ˜¯åœ¨å­ç±»ä¸­å®šä¹‰çš„ï¼Œéƒ½éœ€è¦è®°å½•ä¸‹æ¥ã€‚</p><h4 id="å¯¹é½å¡«å……"><a href="#å¯¹é½å¡«å……" class="headerlink" title="å¯¹é½å¡«å……"></a>å¯¹é½å¡«å……</h4><p>å¹¶ä¸æ˜¯å¿…ç„¶å­˜åœ¨ï¼Œä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚</p><h3 id="å¯¹è±¡çš„è®¿é—®"><a href="#å¯¹è±¡çš„è®¿é—®" class="headerlink" title="å¯¹è±¡çš„è®¿é—®"></a>å¯¹è±¡çš„è®¿é—®</h3><p>Javaå¯¹è±¡éœ€è¦é€šè¿‡æ ˆä¸Šçš„referenceæ•°æ®æ¥æ“ä½œå †ä¸Šçš„å…·ä½“å¯¹è±¡ã€‚å¯¹è±¡çš„å…·ä½“è®¿é—®æ–¹å¼å–å†³äºè™šæ‹Ÿæœºçš„å®ç°ã€‚ä¸»æµçš„è®¿é—®æ–¹å¼æœ‰ä½¿ç”¨å¥æŸ„å’Œç›´æ¥æŒ‡é’ˆä¸¤ç§ã€‚</p><h4 id="ä½¿ç”¨å¥æŸ„è®¿é—®å¯¹è±¡"><a href="#ä½¿ç”¨å¥æŸ„è®¿é—®å¯¹è±¡" class="headerlink" title="ä½¿ç”¨å¥æŸ„è®¿é—®å¯¹è±¡"></a>ä½¿ç”¨å¥æŸ„è®¿é—®å¯¹è±¡</h4><p><img src="/images/handle-visit-object.png" alt></p><h4 id="ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®å¯¹è±¡"><a href="#ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®å¯¹è±¡" class="headerlink" title="ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®å¯¹è±¡"></a>ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®å¯¹è±¡</h4><p><img src="/images/direct-pointer-visit-object.png" alt></p><h3 id="æ ˆå¸§"><a href="#æ ˆå¸§" class="headerlink" title="æ ˆå¸§"></a>æ ˆå¸§</h3><p><strong>æ ˆå¸§</strong>æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®å’Œéƒ¨åˆ†è¿‡ç¨‹ç»“æœçš„æ•°æ®ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿç”¨æ¥å¤„ç†åŠ¨æ€é“¾æ¥ï¼ˆdynamic linkingï¼‰ã€æ–¹æ³•è¿”å›å€¼å’Œå¼‚å¸¸åˆ†æ´¾ï¼ˆdispatch exceptionï¼‰ã€‚</p><p>æ ˆå¸§éšç€æ–¹æ³•è°ƒç”¨è€Œåˆ›å»ºï¼Œéšç€æ–¹æ³•ç»“æŸè€Œé”€æ¯ã€‚æ ˆå¸§çš„å­˜å‚¨ç©ºé—´<br>ç”±åˆ›å»ºå®ƒçš„çº¿ç¨‹åˆ†é…åœ¨Javaè™šæ‹Ÿæœºæ ˆä¹‹ä¸­ã€‚æ¯ä¸€ä¸ªæ ˆå¸§éƒ½æœ‰ä¸€ä¸ªæœ¬åœ°å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆå’ŒæŒ‡å‘å½“å‰æ–¹æ³•æ‰€å±çš„ç±»çš„è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨ã€‚</p><h4 id="å±€éƒ¨å˜é‡è¡¨"><a href="#å±€éƒ¨å˜é‡è¡¨" class="headerlink" title="å±€éƒ¨å˜é‡è¡¨"></a>å±€éƒ¨å˜é‡è¡¨</h4><p>æ¯ä¸ªæ ˆå¸§å†…éƒ¨éƒ½åŒ…å«ä¸€ç»„ç§°ä¸ºå±€éƒ¨å˜é‡è¡¨çš„å˜é‡åˆ—è¡¨ã€‚</p><p>ä¸€ä¸ªå±€éƒ¨å˜é‡è¡¨å¯ä»¥ä¿å­˜ä¸€ä¸ªç±»å‹ä¸ºbooleanã€byteã€charã€shortã€intã€floatã€referenceæˆ–returnAddressçš„æ•°æ®ï¼Œä¸¤ä¸ªå±€éƒ¨å˜é‡å¯ä»¥ä¿å­˜ä¸€ä¸ªç±»å‹ä¸ºlongæˆ–doubleçš„æ•°æ®ã€‚</p><p>å±€éƒ¨å˜é‡ä½¿ç”¨ç´¢å¼•æ¥è¿›è¡Œå®šä½è®¿é—®ï¼Œé¦–ä¸ªå±€éƒ¨å˜é‡çš„ç´¢å¼•å€¼ä¸º0ã€‚</p><p>Javaè™šæ‹Ÿæœºä½¿ç”¨å±€éƒ¨å˜é‡è¡¨æ¥å®Œæˆæ–¹æ³•è°ƒç”¨æ—¶çš„å‚æ•°ä¼ é€’ã€‚å½“è°ƒç”¨ç±»æ–¹æ³•æ—¶ï¼Œå®ƒçš„å‚æ•°å°†ä¼šä¾æ¬¡ä¼ é€’åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­ä»0å¼€å§‹çš„è¿ç»­ä½ç½®ä¸Šã€‚å½“è°ƒç”¨å®ä¾‹å¯¹è±¡æ–¹æ³•æ—¶ï¼Œç¬¬0ä¸ªå±€éƒ¨å˜é‡ä¸€å®šä¼šç”¨æ¥å­˜å‚¨è¯¥å®ä¾‹æ–¹æ³•æ‰€åœ¨å¯¹è±¡çš„å¼•ç”¨ï¼ˆå³thiså…³é”®å­—ï¼‰ã€‚åç»­çš„å…¶ä»–å‚æ•°å°†ä¼šä¼ é€’è‡³å±€éƒ¨å˜é‡è¡¨ä¸­ä»1å¼€å§‹çš„è¿ç»­ä½ç½®ä¸Šã€‚</p><h4 id="æ“ä½œæ•°æ ˆ"><a href="#æ“ä½œæ•°æ ˆ" class="headerlink" title="æ“ä½œæ•°æ ˆ"></a>æ“ä½œæ•°æ ˆ</h4><p>æ¯ä¸ªæ ˆå¸§å†…éƒ¨åŒ…å«ä¸€ä¸ªç§°ä¸º<strong>æ“ä½œæ•°æ ˆ</strong>çš„åè¿›å…ˆå‡ºæ ˆã€‚</p><p>éšç€æ–¹æ³•æ‰§è¡Œå’Œå­—èŠ‚ç æŒ‡ä»¤çš„æ‰§è¡Œï¼Œä¼šä»å±€éƒ¨å˜é‡è¡¨æˆ–å¯¹è±¡å®ä¾‹çš„å­—æ®µä¸­å¤åˆ¶å¸¸é‡æˆ–å˜é‡å†™å…¥åˆ°æ“ä½œæ•°æ ˆï¼Œå†éšç€è®¡ç®—çš„è¿›è¡Œå°†æ ˆä¸­å…ƒç´ å‡ºæ ˆåˆ°å±€éƒ¨å˜é‡è¡¨æˆ–è€…è¿”å›ç»™æ–¹æ³•è°ƒç”¨è€…ï¼Œä¹Ÿå°±æ˜¯å‡ºæ ˆ/å…¥æ ˆæ“ä½œã€‚</p><h4 id="åŠ¨æ€é“¾æ¥"><a href="#åŠ¨æ€é“¾æ¥" class="headerlink" title="åŠ¨æ€é“¾æ¥"></a>åŠ¨æ€é“¾æ¥</h4><p>åœ¨classæ–‡ä»¶é‡Œï¼Œä¸€ä¸ªæ–¹æ³•è‹¥æƒ³è°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œæˆ–è€…è®¿é—®æˆå‘˜å˜é‡ï¼Œåˆ™éœ€è¦é€šè¿‡ç¬¦å·å¼•ç”¨ï¼ˆsymbolic referenceï¼‰æ¥è¡¨ç¤ºï¼ŒåŠ¨æ€é“¾æ¥çš„ä½œç”¨å°±æ˜¯å°†è¿™äº›ä»¥ç¬¦å·å¼•ç”¨æ‰€è¡¨ç¤ºçš„æ–¹æ³•è½¬æ¢ä¸ºå¯¹å®é™…æ–¹æ³•çš„ç›´æ¥å¼•ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ™ƒJavaè™šæ‹Ÿæœº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaå†…å­˜åŒºåŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å‡†å¤‡ç³»åˆ—ä¹‹MySQL</title>
      <link href="/2019/10/20/interview-mysql/"/>
      <url>/2019/10/20/interview-mysql/</url>
      
        <content type="html"><![CDATA[<h3 id="MySQLèŒƒå¼ä¸åæ¨¡å¼"><a href="#MySQLèŒƒå¼ä¸åæ¨¡å¼" class="headerlink" title="MySQLèŒƒå¼ä¸åæ¨¡å¼"></a>MySQLèŒƒå¼ä¸åæ¨¡å¼</h3><h4 id="ç¬¬ä¸€èŒƒå¼"><a href="#ç¬¬ä¸€èŒƒå¼" class="headerlink" title="ç¬¬ä¸€èŒƒå¼"></a>ç¬¬ä¸€èŒƒå¼</h4><p><strong>æ¯åˆ—éƒ½ä¿æŒåŸå­æ€§ã€‚</strong></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ´»åŠ¨è¡¨ï¼ˆæ´»åŠ¨ç¼–ç ï¼Œæ´»åŠ¨åç§°ï¼Œæ´»åŠ¨åœ°å€ï¼‰ï¼Œå‡è®¾è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ´»åŠ¨åœ°å€å¯ä»¥ç»†åˆ†ä¸ºå›½å®¶ã€çœä»½ã€åŸå¸‚ã€å¸‚åŒºã€ä½ç½®ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰è¾¾åˆ°ç¬¬ä¸€èŒƒå¼ã€‚</p><h4 id="ç¬¬äºŒèŒƒå¼"><a href="#ç¬¬äºŒèŒƒå¼" class="headerlink" title="ç¬¬äºŒèŒƒå¼"></a>ç¬¬äºŒèŒƒå¼</h4><p><strong>éä¸»å±æ€§ä¸éƒ¨åˆ†ä¾èµ–äºå€™é€‰ç ã€‚</strong></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œç‰ˆæœ¬è¡¨ï¼ˆç‰ˆæœ¬ç¼–ç ï¼Œç‰ˆæœ¬åç§°ï¼Œäº§å“ç¼–ç ï¼Œäº§å“åç§°ï¼‰ï¼Œå…¶ä¸­ä¸»é”®æ˜¯ï¼ˆç‰ˆæœ¬ç¼–ç ï¼Œäº§å“ç¼–ç ï¼‰ï¼Œè¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ•°æ®åº“è®¾è®¡å¹¶ä¸ç¬¦åˆç¬¬äºŒèŒƒå¼ï¼Œå› ä¸ºäº§å“åç§°åªä¾èµ–äºäº§å“ç¼–ç ã€‚å­˜åœ¨éƒ¨åˆ†ä¾èµ–ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä½¿å…¶æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼Œå¯ä»¥æ”¹é€ æˆä¸¤ä¸ªè¡¨ï¼šç‰ˆæœ¬è¡¨ï¼ˆç‰ˆæœ¬ç¼–ç ï¼Œäº§å“ç¼–ç ï¼‰å’Œäº§å“è¡¨ï¼ˆäº§å“ç¼–ç ï¼Œäº§å“åç§°ï¼‰ã€‚</p><a id="more"></a><h4 id="ç¬¬ä¸‰èŒƒå¼"><a href="#ç¬¬ä¸‰èŒƒå¼" class="headerlink" title="ç¬¬ä¸‰èŒƒå¼"></a>ç¬¬ä¸‰èŒƒå¼</h4><p><strong>éä¸»å±æ€§ä¸ä¼ é€’ä¾èµ–äºå€™é€‰ç ã€‚</strong></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œè®¢å•è¡¨ï¼ˆè®¢å•ç¼–ç ï¼Œé¡¾å®¢ç¼–ç ï¼Œé¡¾å®¢åç§°ï¼‰ï¼Œå…¶ä¸­ä¸»é”®æ˜¯ï¼ˆè®¢å•ç¼–ç ï¼‰ï¼Œè¿™ä¸ªåœºæ™¯ä¸­ï¼Œé¡¾å®¢ç¼–ç ã€é¡¾å®¢åç§°éƒ½å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œå› æ­¤ç¬¦åˆç¬¬äºŒèŒƒå¼ï¼Œä½†æ˜¯é¡¾å®¢åç§°ä¾èµ–äºé¡¾å®¢ç¼–ç ï¼Œä»è€Œé—´æ¥ä¾èµ–äºä¸»é”®ï¼Œæ‰€ä»¥ä¸èƒ½æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ã€‚ä¸ºäº†ä½¿å…¶æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼Œå¯ä»¥æ‹†åˆ†ä¸¤ä¸ªè¡¨ï¼šè®¢å•è¡¨ï¼ˆè®¢å•ç¼–ç ï¼Œé¡¾å®¢ç¼–ç ï¼‰å’Œé¡¾å®¢è¡¨ï¼ˆé¡¾å®¢ç¼–ç ï¼Œé¡¾å®¢åç§°ï¼‰ï¼Œæ‹†åˆ†åçš„æ•°æ®åº“è®¾è®¡ï¼Œå°±å¯ä»¥å®Œå…¨æ»¡è¶³ç¬¬ä¸‰èŒƒå¼çš„è¦æ±‚äº†ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç¬¬äºŒèŒƒå¼çš„ä¾§é‡ç‚¹æ˜¯éä¸»é”®åˆ—æ˜¯å¦å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œè¿˜æ˜¯ä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬ä¸‰èŒƒå¼çš„ä¾§é‡ç‚¹æ˜¯éä¸»é”®åˆ—æ˜¯ç›´æ¥ä¾èµ–äºä¸»é”®ï¼Œè¿˜æ˜¯ç›´æ¥ä¾èµ–äºéä¸»é”®åˆ—ã€‚</p><h4 id="åæ¨¡å¼"><a href="#åæ¨¡å¼" class="headerlink" title="åæ¨¡å¼"></a>åæ¨¡å¼</h4><p>èŒƒå¼å¯ä»¥é¿å…æ•°æ®å†—ä½™ï¼Œå‡å°‘æ•°æ®åº“çš„ç©ºé—´ï¼Œå‡è½»ç»´æŠ¤æ•°æ®å®Œæ•´æ€§çš„éº»çƒ¦ã€‚</p><p>ç„¶è€Œï¼Œé€šè¿‡æ•°æ®åº“èŒƒå¼åŒ–è®¾è®¡ï¼Œå°†å¯¼è‡´æ•°æ®åº“ä¸šåŠ¡æ¶‰åŠçš„è¡¨å˜å¤šï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦å°†æ¶‰åŠçš„ä¸šåŠ¡è¡¨è¿›è¡Œå¤šè¡¨è¿æ¥æŸ¥è¯¢ï¼Œè¿™æ ·å°†å¯¼è‡´æ€§èƒ½å˜å·®ï¼Œä¸”ä¸åˆ©äºåˆ†åº“åˆ†è¡¨ã€‚å› æ­¤ï¼Œå‡ºäºæ€§èƒ½ä¼˜å…ˆçš„è€ƒé‡ï¼Œå¯èƒ½åœ¨æ•°æ®åº“çš„ç»“æ„ä¸­éœ€è¦ä½¿ç”¨åæ¨¡å¼çš„è®¾è®¡ï¼Œå³ç©ºé—´æ¢å–æ—¶é—´ï¼Œé‡‡å–æ•°æ®å†—ä½™çš„æ–¹å¼é¿å…è¡¨ä¹‹é—´çš„å…³è”æŸ¥è¯¢ã€‚è‡³äºæ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œå› ä¸ºéš¾ä»¥æ»¡è¶³æ•°æ®å¼ºä¸€è‡´æ€§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿å­˜å‚¨æ•°æ®å°½å¯èƒ½è¾¾åˆ°ç”¨æˆ·ä¸€è‡´ï¼Œä¿è¯ç³»ç»Ÿç»è¿‡ä¸€æ®µè¾ƒçŸ­çš„æ—¶é—´çš„è‡ªæˆ‘æ¢å¤å’Œä¿®æ­£ï¼Œæ•°æ®æœ€ç»ˆè¾¾åˆ°ä¸€è‡´ã€‚</p><p>éœ€è¦è°¨æ…ä½¿ç”¨åæ¨¡å¼è®¾è®¡æ•°æ®åº“ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½ä½¿ç”¨èŒƒå¼åŒ–çš„æ•°æ®åº“è®¾è®¡ï¼Œå› ä¸ºèŒƒå¼åŒ–çš„æ•°æ®åº“è®¾è®¡èƒ½è®©äº§å“æ›´åŠ çµæ´»ï¼Œå¹¶ä¸”èƒ½åœ¨æ•°æ®åº“å±‚ä¿æŒæ•°æ®å®Œæ•´æ€§ã€‚</p><p>æœ‰çš„æ—¶å€™ï¼Œæå‡æ€§èƒ½æœ€å¥½çš„æ–¹æ³•æ˜¯åœ¨åŒä¸€è¡¨ä¸­ä¿å­˜å†—ä½™æ•°æ®ï¼Œå¦‚æœèƒ½å®¹è®¸å°‘é‡çš„è„æ•°æ®ï¼Œåˆ›å»ºä¸€å¼ å®Œå…¨ç‹¬ç«‹çš„æ±‡æ€»è¡¨æˆ–ç¼“å­˜è¡¨æ˜¯éå¸¸å¥½çš„æ–¹æ³•ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè®¾è®¡ä¸€å¼ â€œä¸‹è½½æ¬¡æ•°è¡¨â€æ¥ç¼“å­˜ä¸‹è½½æ¬¡æ•°ä¿¡æ¯ï¼Œå¯ä½¿åœ¨æµ·é‡æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæé«˜æŸ¥è¯¢æ€»æ•°ä¿¡æ¯çš„é€Ÿåº¦ã€‚</p><p>å¦å¤–ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„åœºæ™¯ï¼Œå‡ºäºæ‰©å±•æ€§è€ƒè™‘ï¼Œå¯èƒ½ä¼šä½¿ç”¨ BLOB å’Œ TEXT ç±»å‹çš„åˆ—å­˜å‚¨ JSON ç»“æ„çš„æ•°æ®ï¼Œè¿™æ ·çš„å¥½å¤„åœ¨äºå¯ä»¥åœ¨ä»»ä½•æ—¶å€™ï¼Œå°†æ–°çš„å±æ€§æ·»åŠ åˆ°è¿™ä¸ªå­—æ®µä¸­ï¼Œè€Œä¸éœ€è¦æ›´æ”¹è¡¨ç»“æ„ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªè®¾è®¡çš„ç¼ºç‚¹ä¹Ÿæ¯”è¾ƒæ˜æ˜¾ï¼Œå°±æ˜¯éœ€è¦è·å–æ•´ä¸ªå­—æ®µå†…å®¹è¿›è¡Œè§£ç æ¥è·å–æŒ‡å®šçš„å±æ€§ï¼Œå¹¶ä¸”æ— æ³•è¿›è¡Œç´¢å¼•ã€æ’åºã€èšåˆç­‰æ“ä½œã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦è€ƒè™‘æ›´åŠ å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼Œæ›´åŠ å»ºè®®ä½¿ç”¨ MongoDB è¿™æ ·çš„æ–‡æ¡£å‹æ•°æ®åº“ã€‚</p><h3 id="MySQL-ä¸­-VARCHAR-ä¸-CHAR-çš„åŒºåˆ«ï¼ŸVARCHAR-50-ä¸­çš„-50-ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ"><a href="#MySQL-ä¸­-VARCHAR-ä¸-CHAR-çš„åŒºåˆ«ï¼ŸVARCHAR-50-ä¸­çš„-50-ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ" class="headerlink" title="MySQL ä¸­ VARCHAR ä¸ CHAR çš„åŒºåˆ«ï¼ŸVARCHAR(50) ä¸­çš„ 50 ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ"></a>MySQL ä¸­ <code>VARCHAR</code> ä¸ <code>CHAR</code> çš„åŒºåˆ«ï¼Ÿ<code>VARCHAR(50)</code> ä¸­çš„ 50 ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ</h3><ul><li>CHAR æ˜¯ä¸€ç§å›ºå®šé•¿åº¦çš„ç±»å‹ï¼Œå¦‚æœæ’å…¥é•¿åº¦å°äºå®šä¹‰é•¿åº¦ï¼Œåˆ™ç”¨ç©ºæ ¼å¡«å……</li><li>CARCHAR åˆ™æ˜¯ä¸€ç§å¯å˜é•¿åº¦çš„ç±»å‹ï¼Œå¦‚æœæ’å…¥é•¿åº¦å°äºå®šäºé•¿åº¦ï¼Œè¿˜æ˜¯æŒ‰ç…§å®é™…é•¿åº¦å­˜å‚¨ã€‚</li><li>VARCHAR(50) ä¸­ 50 çš„æ¶µä¹‰æœ€å¤šå­˜æ”¾ 50 ä¸ªå­—ç¬¦ã€‚VARCHAR(50) å’Œ (200) å­˜å‚¨ hello æ‰€å ç©ºé—´ä¸€æ ·ï¼Œä½†åè€…åœ¨æ’åºæ—¶ä¼šæ¶ˆè€—æ›´å¤šå†…å­˜ï¼Œå› ä¸º ORDER BY col é‡‡ç”¨ fixed_length è®¡ç®— col é•¿åº¦(memoryå¼•æ“ä¹Ÿä¸€æ ·)ã€‚</li></ul><h3 id="INT-11-ä¸­çš„-11-ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ"><a href="#INT-11-ä¸­çš„-11-ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ" class="headerlink" title="INT(11) ä¸­çš„ 11 ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ"></a><code>INT(11)</code> ä¸­çš„ 11 ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ</h3><p><code>INT(11)</code> ä¸­çš„ 11 ï¼Œä¸å½±å“å­—æ®µå­˜å‚¨çš„èŒƒå›´ï¼Œ<strong>ä»£è¡¨å­—ç¬¦çš„æ˜¾ç¤ºå®½åº¦</strong>ã€‚</p><h3 id="ç´¢å¼•çš„ç±»å‹ï¼ˆInnoDBï¼‰æœ‰å“ªäº›ï¼Ÿ"><a href="#ç´¢å¼•çš„ç±»å‹ï¼ˆInnoDBï¼‰æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ç´¢å¼•çš„ç±»å‹ï¼ˆInnoDBï¼‰æœ‰å“ªäº›ï¼Ÿ"></a>ç´¢å¼•çš„ç±»å‹ï¼ˆInnoDBï¼‰æœ‰å“ªäº›ï¼Ÿ</h3><p>ç´¢å¼•ï¼Œéƒ½æ˜¯å®ç°åœ¨å­˜å‚¨å¼•æ“å±‚çš„ã€‚ä¸»è¦æœ‰å…­ç§ç±»å‹ï¼š</p><ul><li>ä¸»é”®ç´¢å¼•</li><li>å¤–é”®ç´¢å¼•</li><li>å”¯ä¸€ç´¢å¼•</li><li>æ™®é€šç´¢å¼•</li><li>è”åˆç´¢å¼•</li><li>å…¨æ–‡ç´¢å¼•</li></ul><h3 id="MySQLè¯­å¥ä¸­éœ€è¦æ³¨æ„èµ°ä¸èµ°ç´¢å¼•çš„ä¸€äº›æƒ…å†µ"><a href="#MySQLè¯­å¥ä¸­éœ€è¦æ³¨æ„èµ°ä¸èµ°ç´¢å¼•çš„ä¸€äº›æƒ…å†µ" class="headerlink" title="MySQLè¯­å¥ä¸­éœ€è¦æ³¨æ„èµ°ä¸èµ°ç´¢å¼•çš„ä¸€äº›æƒ…å†µ"></a>MySQLè¯­å¥ä¸­éœ€è¦æ³¨æ„èµ°ä¸èµ°ç´¢å¼•çš„ä¸€äº›æƒ…å†µ</h3><h4 id="ä¸èµ°ç´¢å¼•"><a href="#ä¸èµ°ç´¢å¼•" class="headerlink" title="ä¸èµ°ç´¢å¼•"></a>ä¸èµ°ç´¢å¼•</h4><ul><li>åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ è¡¨è¾¾å¼ æ¯”å¦‚ <code>WHERE id % 2=0</code></li><li>LIKE æŸ¥è¯¢ å‰ %</li><li>è”åˆç´¢å¼•ä¸æ»¡è¶³å‰ç¼€åŸåˆ™</li></ul><h4 id="æœ‰å¯èƒ½èµ°ç´¢å¼•ï¼Œæœ‰å¯èƒ½ä¸èµ°ï¼ŒMySQLä¼šæ¯”è¾ƒæ€æ‰§è¡Œæ•ˆç‡é«˜"><a href="#æœ‰å¯èƒ½èµ°ç´¢å¼•ï¼Œæœ‰å¯èƒ½ä¸èµ°ï¼ŒMySQLä¼šæ¯”è¾ƒæ€æ‰§è¡Œæ•ˆç‡é«˜" class="headerlink" title="æœ‰å¯èƒ½èµ°ç´¢å¼•ï¼Œæœ‰å¯èƒ½ä¸èµ°ï¼ŒMySQLä¼šæ¯”è¾ƒæ€æ‰§è¡Œæ•ˆç‡é«˜"></a>æœ‰å¯èƒ½èµ°ç´¢å¼•ï¼Œæœ‰å¯èƒ½ä¸èµ°ï¼ŒMySQLä¼šæ¯”è¾ƒæ€æ‰§è¡Œæ•ˆç‡é«˜</h4><ul><li>åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ <code>!=</code> </li><li>åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ <code>&lt;&gt;</code></li><li>åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ <code>OR</code> </li><li>åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ <code>IN</code></li></ul><h3 id="ä»€ä¹ˆæ˜¯ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ï¼Ÿ</h3><p>å½“ B+Tree çš„æ•°æ®é¡¹æ˜¯å¤åˆçš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚ç´¢å¼• (name, age, sex) çš„æ—¶å€™ï¼ŒB+Tree æ˜¯æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ¥å»ºç«‹æœç´¢æ ‘çš„ã€‚</p><ul><li><p>æ¯”å¦‚å½“ (å¼ ä¸‰, 20, F) è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢çš„æ—¶å€™ï¼ŒB+Tree ä¼šä¼˜å…ˆæ¯”è¾ƒ name æ¥ç¡®å®šä¸‹ä¸€æ­¥çš„æ‰€æœæ–¹å‘ï¼Œå¦‚æœ name ç›¸åŒå†ä¾æ¬¡æ¯”è¾ƒ age å’Œ sex ï¼Œæœ€åå¾—åˆ°æ£€ç´¢çš„æ•°æ®ã€‚</p></li><li><p>ä½†å½“ (20, F) è¿™æ ·çš„æ²¡æœ‰ name çš„æ•°æ®æ¥çš„æ—¶å€™ï¼ŒB+Tree å°±ä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥æŸ¥å“ªä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºå»ºç«‹æœç´¢æ ‘çš„æ—¶å€™ name å°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”è¾ƒå› å­ï¼Œå¿…é¡»è¦å…ˆæ ¹æ® name æ¥æœç´¢æ‰èƒ½çŸ¥é“ä¸‹ä¸€æ­¥å»å“ªé‡ŒæŸ¥è¯¢ã€‚</p></li><li><p>æ¯”å¦‚å½“ (å¼ ä¸‰, F) è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢æ—¶ï¼ŒB+Tree å¯ä»¥ç”¨ name æ¥æŒ‡å®šæœç´¢æ–¹å‘ï¼Œä½†ä¸‹ä¸€ä¸ªå­—æ®µ age çš„ç¼ºå¤±ï¼Œæ‰€ä»¥åªèƒ½æŠŠåå­—ç­‰äºå¼ ä¸‰çš„æ•°æ®éƒ½æ‰¾åˆ°ï¼Œç„¶åå†åŒ¹é…æ€§åˆ«æ˜¯ F çš„æ•°æ®äº†ã€‚<br>è¿™ä¸ªæ˜¯éå¸¸é‡è¦çš„æ€§è´¨ï¼Œå³ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ã€‚</p></li></ul><h3 id="äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ"><a href="#äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ" class="headerlink" title="äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ"></a>äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ</h3><ol><li>åŸå­æ€§ Atomicity ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…å…¨éƒ¨å®Œæˆï¼Œæˆ–è€…å…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«æ¢å¤ï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚å³ï¼Œäº‹åŠ¡ä¸å¯åˆ†å‰²ã€ä¸å¯çº¦ç®€ã€‚</li><li>ä¸€è‡´æ€§ Consistency ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾çº¦æŸã€è§¦å‘å™¨ã€çº§è”å›æ»šç­‰ã€‚</li><li>éš”ç¦»æ€§ Isolation ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</li><li>æŒä¹…æ€§ Durability ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</li></ol><h3 id="äº‹åŠ¡çš„å¹¶å‘é—®é¢˜æœ‰å“ªäº›ï¼Ÿ"><a href="#äº‹åŠ¡çš„å¹¶å‘é—®é¢˜æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="äº‹åŠ¡çš„å¹¶å‘é—®é¢˜æœ‰å“ªäº›ï¼Ÿ"></a>äº‹åŠ¡çš„å¹¶å‘é—®é¢˜æœ‰å“ªäº›ï¼Ÿ</h3><p>å®é™…åœºæ™¯ä¸‹ï¼Œäº‹åŠ¡å¹¶ä¸æ˜¯ä¸²è¡Œçš„ï¼Œæ‰€ä»¥ä¼šå¸¦æ¥å¦‚ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol><li>è„è¯»ï¼šäº‹åŠ¡ A è¯»å–äº†äº‹åŠ¡ B æ›´æ–°çš„æ•°æ®ï¼Œç„¶å B å›æ»šæ“ä½œï¼Œé‚£ä¹ˆ A è¯»å–åˆ°çš„æ•°æ®æ˜¯è„æ•°æ®ã€‚</li><li>ä¸å¯é‡å¤è¯»ï¼šäº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œäº‹åŠ¡ B åœ¨äº‹åŠ¡ A å¤šæ¬¡è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®ä½œäº†æ›´æ–°å¹¶æäº¤ï¼Œå¯¼è‡´äº‹åŠ¡ A å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®æ—¶ï¼Œç»“æœä¸ä¸€è‡´ã€‚</li><li>å¹»è¯»ï¼šç³»ç»Ÿç®¡ç†å‘˜ A å°†æ•°æ®åº“ä¸­æ‰€æœ‰å­¦ç”Ÿçš„æˆç»©ä»å…·ä½“åˆ†æ•°æ”¹ä¸º ABCDE ç­‰çº§ï¼Œä½†æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ B å°±åœ¨è¿™ä¸ªæ—¶å€™æ’å…¥äº†ä¸€æ¡å…·ä½“åˆ†æ•°çš„è®°å½•ï¼Œå½“ç³»ç»Ÿç®¡ç†å‘˜ A æ”¹ç»“æŸåå‘ç°è¿˜æœ‰ä¸€æ¡è®°å½•æ²¡æœ‰æ”¹è¿‡æ¥ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œè¿™å°±å«å¹»è¯»ã€‚</li></ol><p>å°ç»“ï¼šä¸å¯é‡å¤è¯»çš„å’Œå¹»è¯»å¾ˆå®¹æ˜“æ··æ·†ï¼Œä¸å¯é‡å¤è¯»ä¾§é‡äºä¿®æ”¹ï¼Œå¹»è¯»ä¾§é‡äºæ–°å¢æˆ–åˆ é™¤ã€‚è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜åªéœ€é”ä½æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè§£å†³å¹»è¯»éœ€è¦é”è¡¨ã€‚</p><h3 id="MySQL-äº‹åŠ¡éš”ç¦»çº§åˆ«ä¼šäº§ç”Ÿçš„å¹¶å‘é—®é¢˜ï¼Ÿ"><a href="#MySQL-äº‹åŠ¡éš”ç¦»çº§åˆ«ä¼šäº§ç”Ÿçš„å¹¶å‘é—®é¢˜ï¼Ÿ" class="headerlink" title="MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«ä¼šäº§ç”Ÿçš„å¹¶å‘é—®é¢˜ï¼Ÿ"></a>MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«ä¼šäº§ç”Ÿçš„å¹¶å‘é—®é¢˜ï¼Ÿ</h3><p>äº‹åŠ¡å®šä¹‰äº†å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸åŒæ•°æ®åº“åœ¨å®ç°æ—¶ï¼Œäº§ç”Ÿçš„å¹¶å‘é—®é¢˜æ˜¯ä¸åŒçš„ã€‚</p><blockquote><p>ä¸åŒçš„éš”ç¦»çº§åˆ«æœ‰ä¸åŒçš„ç°è±¡ï¼Œå¹¶æœ‰ä¸åŒçš„é”å®š/å¹¶å‘æœºåˆ¶ï¼Œéš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œæ•°æ®åº“çš„å¹¶å‘æ€§å°±è¶Šå·®ã€‚</p></blockquote><ul><li>READ UNCOMMITTEDï¼ˆè¯»æœªæäº¤ï¼‰ï¼šäº‹åŠ¡ä¸­çš„ä¿®æ”¹ï¼Œå³ä½¿æ²¡æœ‰æäº¤ï¼Œå¯¹å…¶ä»–äº‹åŠ¡ä¹Ÿéƒ½æ˜¯å¯è§çš„ã€‚<blockquote><p><strong>ä¼šå¯¼è‡´è„è¯»</strong></p></blockquote></li><li>READ COMMITTEDï¼ˆè¯»æäº¤ï¼‰ï¼šäº‹åŠ¡ä»å¼€å§‹ç›´åˆ°æäº¤ä¹‹å‰ï¼Œæ‰€åšçš„ä»»ä½•ä¿®æ”¹å¯¹å…¶ä»–äº‹åŠ¡éƒ½æ˜¯ä¸å¯è§çš„ã€‚<blockquote><p><strong>ä¼šå¯¼è‡´ä¸å¯é‡å¤è¯»</strong>ã€‚è¿™ä¸ªéš”ç¦»çº§åˆ«ï¼Œä¹Ÿå¯ä»¥å«åšâ€œä¸å¯é‡å¤è¯»â€ã€‚</p></blockquote></li><li>REPEATABLE READï¼ˆå¯é‡å¤è¯»ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡æŒ‰ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶è¯»å–ä»¥å‰æ£€ç´¢è¿‡çš„æ•°æ®ï¼Œå…¶ä»–äº‹åŠ¡æ’å…¥äº†æ»¡è¶³å…¶æŸ¥è¯¢æ¡ä»¶çš„æ–°æ•°æ®ã€‚äº§ç”Ÿå¹»è¡Œã€‚<blockquote><p><strong>ä¼šå¯¼è‡´å¹»è¯»</strong></p></blockquote></li><li>SERIALIZABLEï¼ˆä¸²è¡ŒåŒ–ï¼‰ï¼šå¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œã€‚<blockquote><p>ä¸ä¼šäº§ç”Ÿä¸Šè¿°é—®é¢˜</p></blockquote></li></ul><h3 id="MySQL-æŸ¥è¯¢æ‰§è¡Œé¡ºåºï¼Ÿ"><a href="#MySQL-æŸ¥è¯¢æ‰§è¡Œé¡ºåºï¼Ÿ" class="headerlink" title="MySQL æŸ¥è¯¢æ‰§è¡Œé¡ºåºï¼Ÿ"></a>MySQL æŸ¥è¯¢æ‰§è¡Œé¡ºåºï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>)     SELECT</span><br><span class="line">(<span class="number">2</span>)     DISTINCT &lt;select_list&gt;</span><br><span class="line">(<span class="number">3</span>)     FROM &lt;left_table&gt;</span><br><span class="line">(<span class="number">4</span>)     &lt;join_type&gt; JOIN &lt;right_table&gt;</span><br><span class="line">(<span class="number">5</span>)     ON &lt;join_condition&gt;</span><br><span class="line">(<span class="number">6</span>)     WHERE &lt;where_condition&gt;</span><br><span class="line">(<span class="number">7</span>)     GROUP BY &lt;group_by_list&gt;</span><br><span class="line">(<span class="number">8</span>)     HAVING &lt;having_condition&gt;</span><br><span class="line">(<span class="number">9</span>)     ORDER BY &lt;order_by_condition&gt;</span><br><span class="line">(<span class="number">10</span>)    LIMIT &lt;limit_number&gt;</span><br></pre></td></tr></table></figure><h3 id="MySQL-é”æœºåˆ¶"><a href="#MySQL-é”æœºåˆ¶" class="headerlink" title="MySQL é”æœºåˆ¶"></a>MySQL é”æœºåˆ¶</h3><ul><li>é€šè¿‡äº‹åŠ¡éš”ç¦»çº§åˆ«å’ŒMVCCï¼Œä¿è¯æ²¡æœ‰è„è¯»å’Œä¸å¯é‡å¤è¯»</li><li>InnoDBé»˜è®¤ä½¿ç”¨è¡Œé”</li><li>ä¸€èˆ¬æƒ…å†µçš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬åŸºæœ¬ä½¿ç”¨<strong>å¿«ç…§è¯»</strong>ï¼Œå³ä¸åŠ é”è¯»ã€‚</li><li><code>UPDATE</code>è¯­å¥å’Œ<code>DELETE</code>è¯­å¥æ‰§è¡Œçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯<strong>å½“å‰è¯»</strong>ï¼Œå³åŠ é”ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯MVCC"><a href="#ä»€ä¹ˆæ˜¯MVCC" class="headerlink" title="ä»€ä¹ˆæ˜¯MVCC"></a>ä»€ä¹ˆæ˜¯MVCC</h3><p>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨æ¥è§£å†³è¯»-å†™å†²çªçš„æ— é”å¹¶å‘æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯ä¸ºäº‹åŠ¡åˆ†é…å•å‘å¢é•¿çš„æ—¶é—´æˆ³ï¼Œä¸ºæ¯ä¸ªä¿®æ”¹ä¿å­˜ä¸€ä¸ªç‰ˆæœ¬ï¼Œç‰ˆæœ¬ä¸äº‹åŠ¡æ—¶é—´æˆ³å…³è”ï¼Œè¯»æ“ä½œåªè¯»è¯¥äº‹åŠ¡å¼€å§‹å‰çš„æ•°æ®åº“çš„å¿«ç…§ã€‚ è¿™æ ·åœ¨è¯»æ“ä½œä¸ç”¨é˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¸ç”¨é˜»å¡è¯»æ“ä½œçš„åŒæ—¶ï¼Œé¿å…äº†è„è¯»å’Œä¸å¯é‡å¤è¯»ã€‚</p><h3 id="ç´¢å¼•åŸç†ï¼ˆInnoDBï¼‰"><a href="#ç´¢å¼•åŸç†ï¼ˆInnoDBï¼‰" class="headerlink" title="ç´¢å¼•åŸç†ï¼ˆInnoDBï¼‰"></a>ç´¢å¼•åŸç†ï¼ˆInnoDBï¼‰</h3><p>InnoDBç´¢å¼•åº•å±‚æ•°æ®ç»“æ„æ˜¯åŸºäºB+æ ‘å®ç°çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜œé¢è¯•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQLé¢è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å‡†å¤‡ç³»åˆ—ä¹‹Javaè™šæ‹Ÿæœº</title>
      <link href="/2019/10/19/interview-java-jvm/"/>
      <url>/2019/10/19/interview-java-jvm/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯Javaè™šæ‹Ÿæœºï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Javaè™šæ‹Ÿæœºï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Javaè™šæ‹Ÿæœºï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Javaè™šæ‹Ÿæœºï¼Ÿ</h3><p>Javaè™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªå¯ä»¥æ‰§è¡ŒJavaå­—èŠ‚ç ï¼ˆJava æºæ–‡ä»¶è¢«ç¼–è¯‘æˆèƒ½è¢« Java è™šæ‹Ÿæœºæ‰§è¡Œçš„å­—èŠ‚ç æ–‡ä»¶( .class )ï¼‰çš„è™šæ‹Ÿæœºè¿›ç¨‹ã€‚</p><p>Java è¢«è®¾è®¡æˆå…è®¸åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œåœ¨ä»»æ„çš„å¹³å°ï¼Œè€Œä¸éœ€è¦ç¨‹åºå‘˜ä¸ºæ¯ä¸€ä¸ªå¹³å°å•ç‹¬é‡å†™æˆ–è€…æ˜¯é‡æ–°ç¼–è¯‘ã€‚Java è™šæ‹Ÿæœºè®©è¿™ä¸ªå˜ä¸ºå¯èƒ½ï¼Œå› ä¸ºå®ƒçŸ¥é“åº•å±‚ç¡¬ä»¶å¹³å°çš„æŒ‡ä»¤é•¿åº¦å’Œå…¶ä»–ç‰¹æ€§ã€‚</p><p>ä½†æ˜¯ï¼Œè·¨å¹³å°çš„æ˜¯ Java ç¨‹åº(åŒ…æ‹¬å­—èŠ‚ç æ–‡ä»¶)ï¼Œï¼Œè€Œä¸æ˜¯ JVMã€‚JVM æ˜¯ç”¨ C/C++ å¼€å‘çš„ï¼Œæ˜¯ç¼–è¯‘åçš„æœºå™¨ç ï¼Œä¸èƒ½è·¨å¹³å°ï¼Œä¸åŒå¹³å°ä¸‹éœ€è¦å®‰è£…ä¸åŒç‰ˆæœ¬çš„ JVM ã€‚</p><a id="more"></a><h3 id="JVMå†…å­˜åŒºåŸŸæ¨¡å‹"><a href="#JVMå†…å­˜åŒºåŸŸæ¨¡å‹" class="headerlink" title="JVMå†…å­˜åŒºåŸŸæ¨¡å‹"></a>JVMå†…å­˜åŒºåŸŸæ¨¡å‹</h3><p>JVM å†…å­˜åŒºåŸŸåŸºæœ¬ä¸Šç”±4ä¸ªåŒºåŸŸç»„æˆï¼š</p><ul><li>ç±»åŠ è½½å™¨ï¼šåœ¨JVMå¯åŠ¨æ—¶æˆ–è€…ç±»è¿è¡Œæ—¶ï¼Œå°†éœ€è¦çš„classåŠ è½½åˆ°JVMä¸­ã€‚</li><li>è¿è¡Œæ—¶æ•°æ®åŒºï¼šå°†å†…å­˜åˆ’åˆ†æˆè‹¥å¹²ä¸ªåŒºä»¥æ¨¡æ‹Ÿå®é™…æœºå™¨ä¸Šçš„å­˜å‚¨ã€è®°å½•å’Œè°ƒåº¦åŠŸèƒ½æ¨¡å—ã€‚</li><li>æ‰§è¡Œå¼•æ“ï¼šè´Ÿè´£æ‰§è¡Œclassæ–‡ä»¶ä¸­åŒ…å«çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œç›¸å½“äºå®é™…æœºå™¨ä¸Šçš„CPUã€‚</li><li>æœ¬åœ°æ–¹æ³•è°ƒç”¨ï¼šæ‰§è¡ŒC/C++å®ç°çš„æœ¬åœ°æ–¹æ³•çš„ä»£ç ï¼Œå¹¶è¿”å›ç»“æœã€‚</li></ul><p><img src="/images/jvm-composition.png" alt></p><h3 id="Java-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"><a href="#Java-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ" class="headerlink" title="Java è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></a>Java è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h3><h4 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h4><p>Java çº¿ç¨‹ç§æœ‰ï¼Œç±»ä¼¼äºæ“ä½œç³»ç»Ÿé‡Œçš„ PC è®¡æ•°å™¨ï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚</p><ul><li>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯ Native æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚</li><li>æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½• OutOfMemoryError æƒ…å†µçš„åŒºåŸŸã€‚</li></ul><h4 id="Javaè™šæ‹Ÿæœºæ ˆ"><a href="#Javaè™šæ‹Ÿæœºæ ˆ" class="headerlink" title="Javaè™šæ‹Ÿæœºæ ˆ"></a>Javaè™šæ‹Ÿæœºæ ˆ</h4><p>Javaçº¿ç¨‹ç§æœ‰ï¼Œè™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼š</p><ul><li>æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡ã€æ“ä½œæ•°ã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚</li><li>æ¯ä¸ªæ–¹æ³•è°ƒç”¨éƒ½æ„å‘³ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</li></ul><h4 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h4><p>å’Œ Java è™šæ‹Ÿæœºæ ˆçš„ä½œç”¨ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯è¯¥åŒºåŸŸä¸º JVM æä¾›ä½¿ç”¨ Native æ–¹æ³•çš„æœåŠ¡ã€‚</p><h4 id="Javaå †"><a href="#Javaå †" class="headerlink" title="Javaå †"></a>Javaå †</h4><p>æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—åŒºåŸŸï¼Œåƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚</p><ul><li>ç›®å‰ä¸»è¦çš„åƒåœ¾å›æ”¶ç®—æ³•éƒ½æ˜¯åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ‰€ä»¥ Java å †ä¸­è¿˜å¯ä»¥ç»†åˆ†ä¸ºï¼šæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼›å†ç»†è‡´ä¸€ç‚¹çš„æœ‰ Eden ç©ºé—´ã€From Survivor ç©ºé—´ã€To Survivor ç©ºé—´ç­‰ï¼Œé»˜è®¤æƒ…å†µä¸‹æ–°ç”Ÿä»£æŒ‰ç…§ 8:1:1 çš„æ¯”ä¾‹æ¥åˆ†é…ã€‚</li><li>æ ¹æ® Java è™šæ‹Ÿæœºè§„èŒƒçš„è§„å®šï¼ŒJava å †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œåªè¦é€»è¾‘ä¸Šæ˜¯è¿ç»­çš„å³å¯ï¼Œå°±åƒæˆ‘ä»¬çš„ç£ç›˜ä¸€æ ·ã€‚</li></ul><h4 id="å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰"><a href="#å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰" class="headerlink" title="å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰"></a>å…ƒæ•°æ®ï¼ˆæ–¹æ³•åŒºï¼‰</h4><p>å„ä¸ªçº¿ç¨‹å…±äº«çš„ä¸€ä¸ªåŒºåŸŸï¼Œç”¨äºå­˜å‚¨è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</p><ul><li>è™½ç„¶ Java è™šæ‹Ÿæœºè§„èŒƒæŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«åš Non-Heapï¼ˆéå †ï¼‰ï¼Œç›®çš„åº”è¯¥æ˜¯ä¸ Java å †åŒºåˆ†å¼€æ¥ã€‚</li></ul><h4 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h4><p>æ˜¯å…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</p><h4 id="ç›´æ¥å†…å­˜"><a href="#ç›´æ¥å†…å­˜" class="headerlink" title="ç›´æ¥å†…å­˜"></a>ç›´æ¥å†…å­˜</h4><p>å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®çš„ä¸€éƒ¨åˆ†ã€‚JDK1.4å¼•å…¥äº†NIOï¼Œå®ƒå¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ã€‚ç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ°Javaå †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ä¼šå—åˆ°æœ¬æœºå†…å­˜çš„é™åˆ¶ã€‚ä¹Ÿå¯èƒ½å¯¼è‡´<code>OutOfMemoryError</code>å‡ºç°ã€‚</p><p>JVMå†…å­˜åŒºåŸŸçš„è¯¦ç»†ä»‹ç»å¯ä»¥çœ‹è¿™ç¯‡<a href="https://iisheng.cn/2019/10/22/java-memory-area/">æ·±å…¥ç†è§£JVMä¹‹Javaå†…å­˜åŒºåŸŸ</a></p><h4 id="Java-å†…å­˜å †å’Œæ ˆåŒºåˆ«ï¼Ÿ"><a href="#Java-å†…å­˜å †å’Œæ ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Java å†…å­˜å †å’Œæ ˆåŒºåˆ«ï¼Ÿ"></a>Java å†…å­˜å †å’Œæ ˆåŒºåˆ«ï¼Ÿ</h4><ul><li>æ ˆå†…å­˜ç”¨æ¥å­˜å‚¨åŸºæœ¬ç±»å‹çš„å˜é‡å’Œå¯¹è±¡çš„å¼•ç”¨å˜é‡ï¼›å †å†…å­˜ç”¨æ¥å­˜å‚¨Javaä¸­çš„å¯¹è±¡ï¼Œæ— è®ºæ˜¯æˆå‘˜å˜é‡ï¼Œå±€éƒ¨å˜é‡ï¼Œè¿˜æ˜¯ç±»å˜é‡ï¼Œå®ƒä»¬æŒ‡å‘çš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †å†…å­˜ä¸­ã€‚</li><li>æ ˆå†…å­˜å½’å±äºå•ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªæ ˆå†…å­˜ï¼Œå…¶å­˜å‚¨çš„å˜é‡åªèƒ½åœ¨å…¶æ‰€å±çº¿ç¨‹ä¸­å¯è§ï¼Œå³æ ˆå†…å­˜å¯ä»¥ç†è§£æˆçº¿ç¨‹çš„ç§æœ‰å†…å­˜ï¼›å †å†…å­˜ä¸­çš„å¯¹è±¡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§ã€‚å †å†…å­˜ä¸­çš„å¯¹è±¡å¯ä»¥è¢«æ‰€æœ‰çº¿ç¨‹è®¿é—®ã€‚</li><li>å¦‚æœæ ˆå†…å­˜æ²¡æœ‰å¯ç”¨çš„ç©ºé—´å­˜å‚¨æ–¹æ³•è°ƒç”¨å’Œå±€éƒ¨å˜é‡ï¼ŒJVM ä¼šæŠ›å‡º java.lang.StackOverFlowError é”™è¯¯ï¼›å¦‚æœæ˜¯å †å†…å­˜æ²¡æœ‰å¯ç”¨çš„ç©ºé—´å­˜å‚¨ç”Ÿæˆçš„å¯¹è±¡ï¼ŒJVM ä¼šæŠ›å‡º java.lang.OutOfMemoryError é”™è¯¯ã€‚</li><li>æ ˆçš„å†…å­˜è¦è¿œè¿œå°äºå †å†…å­˜ï¼Œå¦‚æœä½ ä½¿ç”¨é€’å½’çš„è¯ï¼Œé‚£ä¹ˆä½ çš„æ ˆå¾ˆå¿«å°±ä¼šå……æ»¡ã€‚-Xss é€‰é¡¹è®¾ç½®æ ˆå†…å­˜çš„å¤§å°ï¼Œ-Xms é€‰é¡¹å¯ä»¥è®¾ç½®å †çš„å¼€å§‹æ—¶çš„å¤§å°ã€‚<br>å½“ç„¶ï¼Œå¦‚æœä½ è®°ä¸ä½è¿™ä¸ªäº›ï¼Œåªè¦è®°ä½å¦‚ä¸‹å³å¯ï¼š</li></ul><blockquote><p>JVM ä¸­å †å’Œæ ˆå±äºä¸åŒçš„å†…å­˜åŒºåŸŸï¼Œä½¿ç”¨ç›®çš„ä¹Ÿä¸åŒã€‚æ ˆå¸¸ç”¨äºä¿å­˜æ–¹æ³•å¸§å’Œå±€éƒ¨å˜é‡ï¼Œè€Œå¯¹è±¡æ€»æ˜¯åœ¨å †ä¸Šåˆ†é…ã€‚æ ˆé€šå¸¸éƒ½æ¯”å †å°ï¼Œä¹Ÿä¸ä¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œè€Œå †è¢«æ•´ä¸ª JVM çš„æ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚</p></blockquote><h4 id="Java-å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Ÿ"><a href="#Java-å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Ÿ" class="headerlink" title="Java å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Ÿ"></a>Java å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ï¼Ÿ</h4><p>JAVA å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="http://static2.iocoder.cn/images/JDK/2020_02_10/06.png" alt></p><h4 id="æœ‰å“ªäº›-OutOfMemoryError-å¼‚å¸¸ï¼Ÿ"><a href="#æœ‰å“ªäº›-OutOfMemoryError-å¼‚å¸¸ï¼Ÿ" class="headerlink" title="æœ‰å“ªäº› OutOfMemoryError å¼‚å¸¸ï¼Ÿ"></a>æœ‰å“ªäº› OutOfMemoryError å¼‚å¸¸ï¼Ÿ</h4><ul><li>Java å †æº¢å‡º</li><li>è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º</li><li>å…ƒæ•°æ®çš„å†…å­˜æº¢å‡º</li><li>è¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º</li></ul><h3 id="åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥"><a href="#åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥"></a>åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥</h3><h4 id="åƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ"><a href="#åƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="åƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ"></a>åƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ</h4><h4 id="åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ"><a href="#åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ"></a>åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿ</h4><h4 id="åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„2ç§å¸¸ç”¨æ–¹æ³•ï¼Ÿ"><a href="#åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„2ç§å¸¸ç”¨æ–¹æ³•ï¼Ÿ" class="headerlink" title="åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„2ç§å¸¸ç”¨æ–¹æ³•ï¼Ÿ"></a>åˆ¤æ–­å¯¹è±¡æ­»äº¡çš„2ç§å¸¸ç”¨æ–¹æ³•ï¼Ÿ</h4><h4 id="ä»€ä¹ˆæ˜¯æ–°ç”Ÿä»£-GC-å’Œè€å¹´ä»£-GCï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ–°ç”Ÿä»£-GC-å’Œè€å¹´ä»£-GCï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ–°ç”Ÿä»£ GC å’Œè€å¹´ä»£ GCï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ–°ç”Ÿä»£ GC å’Œè€å¹´ä»£ GCï¼Ÿ</h4><h3 id="è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·"><a href="#è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·" class="headerlink" title="è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·"></a>è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·</h3><h4 id="JDK-çš„å‘½ä»¤è¡Œå·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ"><a href="#JDK-çš„å‘½ä»¤è¡Œå·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ" class="headerlink" title="JDK çš„å‘½ä»¤è¡Œå·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ"></a>JDK çš„å‘½ä»¤è¡Œå·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ</h4><h4 id="JDK-çš„å¯è§†åŒ–å·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ"><a href="#JDK-çš„å¯è§†åŒ–å·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ" class="headerlink" title="JDK çš„å¯è§†åŒ–å·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ"></a>JDK çš„å¯è§†åŒ–å·¥å…·æœ‰å“ªäº›å¯ä»¥ç›‘æ§è™šæ‹Ÿæœºï¼Ÿ</h4><h4 id="å¦‚ä½•æ’æŸ¥çº¿ç¨‹-Full-GC-é¢‘ç¹çš„é—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•æ’æŸ¥çº¿ç¨‹-Full-GC-é¢‘ç¹çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ’æŸ¥çº¿ç¨‹ Full GC é¢‘ç¹çš„é—®é¢˜ï¼Ÿ"></a>å¦‚ä½•æ’æŸ¥çº¿ç¨‹ Full GC é¢‘ç¹çš„é—®é¢˜ï¼Ÿ</h4><h3 id="è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"><a href="#è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶" class="headerlink" title="è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"></a>è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶</h3><h4 id="ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Ÿ</h4><p>ç±»åŠ è½½å™¨(ClassLoader)ï¼Œç”¨æ¥åŠ è½½ Java ç±»åˆ° Java è™šæ‹Ÿæœºä¸­ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒJava è™šæ‹Ÿæœºä½¿ç”¨ Java ç±»çš„æ–¹å¼å¦‚ä¸‹ï¼šJava æºç¨‹åº(.java æ–‡ä»¶)åœ¨ç»è¿‡ Java ç¼–è¯‘å™¨ç¼–è¯‘ä¹‹åå°±è¢«è½¬æ¢æˆ Java å­—èŠ‚ä»£ç (.class æ–‡ä»¶)ã€‚</p><p>ç±»åŠ è½½å™¨ï¼Œè´Ÿè´£è¯»å– Java å­—èŠ‚ä»£ç ï¼Œå¹¶è½¬æ¢æˆ java.lang.Class ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</p><ul><li>æ¯ä¸ªè¿™æ ·çš„å®ä¾‹ç”¨æ¥è¡¨ç¤ºä¸€ä¸ª Java ç±»ã€‚é€šè¿‡æ­¤å®ä¾‹çš„ Class#newInstance(â€¦) æ–¹æ³•ï¼Œå°±å¯ä»¥åˆ›å»ºå‡ºè¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚</li><li>å®é™…çš„æƒ…å†µå¯èƒ½æ›´åŠ å¤æ‚ï¼Œæ¯”å¦‚ Java å­—èŠ‚ä»£ç å¯èƒ½æ˜¯é€šè¿‡å·¥å…·åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¹Ÿå¯èƒ½æ˜¯é€šè¿‡ç½‘ç»œä¸‹è½½çš„ã€‚</li></ul><h4 id="ç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ"><a href="#ç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ"></a>ç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ</h4><h4 id="ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent-Delegation-Modelï¼‰ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent-Delegation-Modelï¼‰ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent Delegation Modelï¼‰ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent Delegation Modelï¼‰ï¼Ÿ</h4><h4 id="ç±»çš„åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ç±»çš„åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç±»çš„åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ç±»çš„åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h4>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜œé¢è¯•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaè™šæ‹Ÿæœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å‡†å¤‡ç³»åˆ—ä¹‹Javaå¹¶å‘</title>
      <link href="/2019/10/18/interview-java-concurrency/"/>
      <url>/2019/10/18/interview-java-concurrency/</url>
      
        <content type="html"><![CDATA[<h4 id="Javaä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆ"><a href="#Javaä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆ" class="headerlink" title="Javaä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆ"></a>Javaä¸­ç”¨åˆ°çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•æ˜¯ä»€ä¹ˆ</h4><p>æœ‰ä¸¤ç§è°ƒåº¦æ¨¡å‹ï¼šåˆ†æ—¶è°ƒåº¦æ¨¡å‹å’ŒæŠ¢å å¼è°ƒåº¦æ¨¡å‹ã€‚</p><ul><li><p>åˆ†æ—¶è°ƒåº¦æ¨¡å‹æ˜¯æŒ‡è®©æ‰€æœ‰çš„çº¿ç¨‹è½®æµè·å¾— CPU çš„ä½¿ç”¨æƒ,å¹¶ä¸”å¹³å‡åˆ†é…æ¯ä¸ªçº¿ç¨‹å ç”¨çš„ CPU çš„æ—¶é—´ç‰‡è¿™ä¸ªä¹Ÿæ¯”è¾ƒå¥½ç†è§£ã€‚</p></li><li><p>Java è™šæ‹Ÿæœºé‡‡ç”¨æŠ¢å å¼è°ƒåº¦æ¨¡å‹ï¼Œæ˜¯æŒ‡ä¼˜å…ˆè®©å¯è¿è¡Œæ± ä¸­ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å ç”¨ CPU ï¼Œå¦‚æœå¯è¿è¡Œæ± ä¸­çš„çº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆå°±éšæœºé€‰æ‹©ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿å…¶å ç”¨ CPU ã€‚å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œï¼Œç›´è‡³å®ƒä¸å¾—ä¸æ”¾å¼ƒ CPU ã€‚</p></li></ul><a id="more"></a><h3 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3><p>çº¿ç¨‹ä¸€å…±æœ‰äº”ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>æ–°å»º(new)ï¼šå½“åˆ›å»ºThreadç±»çš„ä¸€ä¸ªå®ä¾‹ï¼ˆå¯¹è±¡ï¼‰æ—¶ï¼Œæ­¤çº¿ç¨‹è¿›å…¥æ–°å»ºçŠ¶æ€ï¼ˆæœªè¢«å¯åŠ¨ï¼‰ã€‚ä¾‹å¦‚ï¼šThread t1 = new Thread() ã€‚</li><li>å¯è¿è¡Œ(runnable)ï¼šçº¿ç¨‹å¯¹è±¡åˆ›å»ºåï¼Œå…¶ä»–çº¿ç¨‹(æ¯”å¦‚ main çº¿ç¨‹ï¼‰è°ƒç”¨äº†è¯¥å¯¹è±¡çš„ start æ–¹æ³•ã€‚è¯¥çŠ¶æ€çš„çº¿ç¨‹ä½äºå¯è¿è¡Œçº¿ç¨‹æ± ä¸­ï¼Œç­‰å¾…è¢«çº¿ç¨‹è°ƒåº¦é€‰ä¸­ï¼Œè·å– cpu çš„ä½¿ç”¨æƒã€‚ä¾‹å¦‚ï¼št1.start() ã€‚</li><li><p>è¿è¡Œ(running)ï¼šçº¿ç¨‹è·å¾— CPU èµ„æºæ­£åœ¨æ‰§è¡Œä»»åŠ¡ï¼ˆ#run() æ–¹æ³•ï¼‰ï¼Œæ­¤æ—¶é™¤éæ­¤çº¿ç¨‹è‡ªåŠ¨æ”¾å¼ƒ CPU èµ„æºæˆ–è€…æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„çº¿ç¨‹è¿›å…¥ï¼Œçº¿ç¨‹å°†ä¸€ç›´è¿è¡Œåˆ°ç»“æŸã€‚</p></li><li><p>æ­»äº¡(dead)ï¼šå½“çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–è¢«å…¶å®ƒçº¿ç¨‹æ€æ­»ï¼Œçº¿ç¨‹å°±è¿›å…¥æ­»äº¡çŠ¶æ€ï¼Œè¿™æ—¶çº¿ç¨‹ä¸å¯èƒ½å†è¿›å…¥å°±ç»ªçŠ¶æ€ç­‰å¾…æ‰§è¡Œã€‚</p><ul><li>è‡ªç„¶ç»ˆæ­¢ï¼šæ­£å¸¸è¿è¡Œå®Œ #run()æ–¹æ³•ï¼Œç»ˆæ­¢ã€‚</li><li>å¼‚å¸¸ç»ˆæ­¢ï¼šè°ƒç”¨ #stop() æ–¹æ³•ï¼Œè®©ä¸€ä¸ªçº¿ç¨‹ç»ˆæ­¢è¿è¡Œã€‚</li></ul></li><li><p>å µå¡(blocked)ï¼šç”±äºæŸç§åŸå› å¯¼è‡´æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹è®©å‡º CPU å¹¶æš‚åœè‡ªå·±çš„æ‰§è¡Œï¼Œå³è¿›å…¥å µå¡çŠ¶æ€ã€‚ç›´åˆ°çº¿ç¨‹è¿›å…¥å¯è¿è¡Œ(runnable)çŠ¶æ€ï¼Œæ‰æœ‰æœºä¼šå†æ¬¡è·å¾— CPU èµ„æºï¼Œè½¬åˆ°è¿è¡Œ(running)çŠ¶æ€ã€‚é˜»å¡çš„æƒ…å†µæœ‰ä¸‰ç§ï¼š</p><ul><li>æ­£åœ¨ç¡çœ ï¼šè°ƒç”¨ <code>#sleep(long t)</code> æ–¹æ³•ï¼Œå¯ä½¿çº¿ç¨‹è¿›å…¥ç¡çœ æ–¹å¼ã€‚</li><li>æ­£åœ¨ç­‰å¾…ï¼šè°ƒç”¨ <code>#wait()</code> æ–¹æ³•ã€‚è°ƒç”¨ <code>notify()</code> æ–¹æ³•ï¼Œå›åˆ°å°±ç»ªçŠ¶æ€ã€‚</li><li>è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ‰€é˜»å¡ï¼šè°ƒç”¨ <code>#suspend()</code> æ–¹æ³•ã€‚ï¼ˆè°ƒç”¨ <code>#resume()</code> æ–¹æ³•ï¼Œå°±å¯ä»¥æ¢å¤ã€‚ï¼‰</li></ul></li></ul><p>æ•´ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="http://static2.iocoder.cn/04a277229fd3b24e058417f9c571681c" alt></p><ul><li>ä¸­é—´ä¸€è¡Œæ˜¯çº¿ç¨‹çš„é¡ºç•…çš„æ‰§è¡Œè¿‡ç¨‹çš„å››ä¸ªçŠ¶æ€ã€‚å…¶ä¸Šä¸‹ä¸¤ä¾§ï¼Œæ˜¯å­˜åœ¨å¯¹åº”çš„æƒ…å†µï¼Œè¾¾åˆ°é˜»å¡çŠ¶æ€å’Œæ¢å¤æ‰§è¡Œçš„è¿‡ç¨‹ã€‚</li><li>æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œæ–°å»º(new)å’Œæ­»äº¡(dead)æ˜¯å•å‘çš„çŠ¶æ€ï¼Œä¸å¯é‡å¤ã€‚</li></ul><h3 id="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼åŠå®ç°ï¼Ÿ"><a href="#åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼åŠå®ç°ï¼Ÿ" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼åŠå®ç°ï¼Ÿ"></a>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼åŠå®ç°ï¼Ÿ</h3><ul><li>æ–¹å¼ä¸€ï¼Œç»§æ‰¿ Thread ç±»åˆ›å»ºçº¿ç¨‹ç±»ã€‚</li><li>æ–¹å¼äºŒï¼Œé€šè¿‡ Runnable æ¥å£åˆ›å»ºçº¿ç¨‹ç±»ã€‚</li><li>æ–¹å¼ä¸‰ï¼Œé€šè¿‡ Callable å’Œ Future åˆ›å»ºçº¿ç¨‹ã€‚</li></ul><p>åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼çš„å¯¹æ¯”ï¼š</p><ul><li>ä½¿ç”¨æ–¹å¼ä¸€<ul><li>ä¼˜ç‚¹ï¼šç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— éœ€ä½¿ç”¨ Thread#currentThread() æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨ this å³å¯è·å¾—å½“å‰çº¿ç¨‹ã€‚</li><li>ç¼ºç‚¹ï¼šçº¿ç¨‹ç±»å·²ç»ç»§æ‰¿äº† Thread ç±»ï¼Œæ‰€ä»¥ä¸èƒ½å†ç»§æ‰¿å…¶ä»–çˆ¶ç±»ã€‚</li></ul></li><li>ä½¿ç”¨æ–¹å¼äºŒã€æˆ–æ–¹å¼ä¸‰<ul><li>ä¼˜ç‚¹ï¼š<ul><li>çº¿ç¨‹ç±»åªæ˜¯å®ç°äº† Runnable æ¥å£æˆ– Callable æ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ã€‚</li><li><strong>å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± ã€‚</strong></li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>ç¼–ç¨‹ç¨å¾®å¤æ‚ï¼Œå¦‚æœè¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread#currentThread() æ–¹æ³•ã€‚</li></ul></li></ul></li></ul><h3 id="å¦‚ä½•ä½¿ç”¨-wait-notify-å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨-wait-notify-å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ wait + notify å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨ wait + notify å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ</h3><h3 id="sleepã€joinã€yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#sleepã€joinã€yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="sleepã€joinã€yield æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>sleepã€joinã€yield æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong>1ï¼‰sleep æ–¹æ³•</strong></p><p>åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…ï¼Œè®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ï¼ˆæš‚åœæ‰§è¡Œï¼‰ï¼Œæ­¤æ“ä½œå—åˆ°ç³»ç»Ÿè®¡æ—¶å™¨å’Œè°ƒåº¦ç¨‹åºç²¾åº¦å’Œå‡†ç¡®æ€§çš„å½±å“ã€‚è®©å…¶ä»–çº¿ç¨‹æœ‰æœºä¼šç»§ç»­æ‰§è¡Œï¼Œä½†å®ƒå¹¶ä¸é‡Šæ”¾å¯¹è±¡é”ã€‚ä¹Ÿå°±æ˜¯å¦‚æœæœ‰synchronized åŒæ­¥å—ï¼Œå…¶ä»–çº¿ç¨‹ä»ç„¶ä¸èƒ½è®¿é—®å…±äº«æ•°æ®ã€‚æ³¨æ„è¯¥æ–¹æ³•è¦æ•è·å¼‚å¸¸ã€‚</p><p>æ¯”å¦‚æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ(æ²¡æœ‰ synchronized)ï¼Œä¸€ä¸ªçº¿ç¨‹ä¼˜å…ˆçº§ä¸ºMAX_PRIORITY ï¼Œå¦ä¸€ä¸ªä¸º MIN_PRIORITY ã€‚</p><ul><li>å¦‚æœæ²¡æœ‰ sleep æ–¹æ³•ï¼Œåªæœ‰é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œä½ä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰èƒ½æ‰§è¡Œã€‚ä½†å½“é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ #sleep(5000) åï¼Œä½ä¼˜å…ˆçº§å°±æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚</li><li>æ€»ä¹‹ï¼Œsleep æ–¹æ³•ï¼Œå¯ä»¥ä½¿ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œçš„æœºä¼šï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è®©åŒä¼˜å…ˆçº§ã€é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰æ‰§è¡Œçš„æœºä¼šã€‚</li></ul><p><strong>2ï¼‰yield æ–¹æ³•</strong></p><p>yield æ–¹æ³•å’Œ sleep æ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿä¸ä¼šé‡Šæ”¾â€œé”æ ‡å¿—â€ï¼ŒåŒºåˆ«åœ¨äºï¼š</p><ul><li>å®ƒæ²¡æœ‰å‚æ•°ï¼Œå³ yield æ–¹æ³•åªæ˜¯ä½¿å½“å‰çº¿ç¨‹é‡æ–°å›åˆ°å¯æ‰§è¡ŒçŠ¶æ€ï¼Œæ‰€ä»¥æ‰§è¡Œyield çš„çº¿ç¨‹æœ‰å¯èƒ½åœ¨è¿›å…¥åˆ°å¯æ‰§è¡ŒçŠ¶æ€åé©¬ä¸Šåˆè¢«æ‰§è¡Œã€‚</li><li>å¦å¤– yield æ–¹æ³•åªèƒ½ä½¿åŒä¼˜å…ˆçº§æˆ–è€…é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œæœºä¼šï¼Œè¿™ä¹Ÿå’Œ sleep æ–¹æ³•ä¸åŒã€‚</li></ul><p><strong>3ï¼‰join æ–¹æ³•</strong></p><p>Thread çš„éé™æ€æ–¹æ³• join ï¼Œè®©ä¸€ä¸ªçº¿ç¨‹ B â€œåŠ å…¥â€åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹ A ä¸­ã€‚Bè¿è¡Œå®Œåï¼ŒAæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Thread t = <span class="keyword">new</span> MyThread();</span><br><span class="line">t.start();</span><br><span class="line">t.join();</span><br></pre></td></tr></table></figure></p><ul><li>ä¿è¯å½“å‰çº¿ç¨‹åœæ­¢æ‰§è¡Œï¼Œç›´åˆ°è¯¥çº¿ç¨‹æ‰€åŠ å…¥çš„çº¿ç¨‹ t å®Œæˆä¸ºæ­¢ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒåŠ å…¥çš„çº¿ç¨‹ t æ²¡æœ‰å­˜æ´»ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¸éœ€è¦åœæ­¢ã€‚</li></ul><h3 id="sleep-0-æœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ"><a href="#sleep-0-æœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ" class="headerlink" title="sleep(0) æœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ"></a>sleep(0) æœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ</h3><p><code>Thread#sleep(0)</code> æ–¹æ³•ï¼Œå¹¶éæ˜¯çœŸçš„è¦çº¿ç¨‹æŒ‚èµ· 0 æ¯«ç§’ï¼Œæ„ä¹‰åœ¨äºè¿™æ¬¡è°ƒç”¨ <code>Thread#sleep(0)</code> æ–¹æ³•ï¼ŒæŠŠå½“å‰çº¿ç¨‹ç¡®å®çš„è¢«å†»ç»“äº†ä¸€ä¸‹ï¼Œè®©å…¶ä»–çº¿ç¨‹æœ‰æœºä¼šä¼˜å…ˆæ‰§è¡Œã€‚<code>Thread#sleep(0)</code> æ–¹æ³•ï¼Œæ˜¯ä½ çš„çº¿ç¨‹æš‚æ—¶æ”¾å¼ƒ CPU ï¼Œä¹Ÿå°±æ˜¯é‡Šæ”¾ä¸€äº›æœªç”¨çš„æ—¶é—´ç‰‡ç»™å…¶ä»–çº¿ç¨‹æˆ–è¿›ç¨‹ä½¿ç”¨ï¼Œå°±ç›¸å½“äºä¸€ä¸ª<strong>è®©ä½åŠ¨ä½œ</strong></p><h3 id="ä½ å¦‚ä½•ç¡®ä¿-main-æ–¹æ³•æ‰€åœ¨çš„çº¿ç¨‹æ˜¯-Java-ç¨‹åºæœ€åç»“æŸçš„çº¿ç¨‹ï¼Ÿ"><a href="#ä½ å¦‚ä½•ç¡®ä¿-main-æ–¹æ³•æ‰€åœ¨çš„çº¿ç¨‹æ˜¯-Java-ç¨‹åºæœ€åç»“æŸçš„çº¿ç¨‹ï¼Ÿ" class="headerlink" title="ä½ å¦‚ä½•ç¡®ä¿ main æ–¹æ³•æ‰€åœ¨çš„çº¿ç¨‹æ˜¯ Java ç¨‹åºæœ€åç»“æŸçš„çº¿ç¨‹ï¼Ÿ"></a>ä½ å¦‚ä½•ç¡®ä¿ main æ–¹æ³•æ‰€åœ¨çš„çº¿ç¨‹æ˜¯ Java ç¨‹åºæœ€åç»“æŸçš„çº¿ç¨‹ï¼Ÿ</h3><blockquote><p>è€ƒç‚¹ï¼Œå°±æ˜¯ join æ–¹æ³•ã€‚</p></blockquote><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Thread ç±»çš„ <code>#join()</code> æ–¹æ³•ï¼Œæ¥ç¡®ä¿æ‰€æœ‰ç¨‹åºåˆ›å»ºçš„çº¿ç¨‹åœ¨ main æ–¹æ³•é€€å‡ºå‰ç»“æŸã€‚</p><h3 id="ä»€ä¹ˆå«çº¿ç¨‹å®‰å…¨ï¼Ÿ"><a href="#ä»€ä¹ˆå«çº¿ç¨‹å®‰å…¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆå«çº¿ç¨‹å®‰å…¨ï¼Ÿ"></a>ä»€ä¹ˆå«çº¿ç¨‹å®‰å…¨ï¼Ÿ</h3><p>çº¿ç¨‹å®‰å…¨ï¼Œæ˜¯ç¼–ç¨‹ä¸­çš„æœ¯è¯­ï¼ŒæŒ‡æŸä¸ªå‡½æ•°ã€å‡½æ•°åº“åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«è°ƒç”¨æ—¶ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡ï¼Œä½¿ç¨‹åºåŠŸèƒ½æ­£ç¡®å®Œæˆã€‚</p><h3 id="å¤šçº¿ç¨‹åŒæ­¥å’Œäº’æ–¥æœ‰å‡ ç§å®ç°æ–¹æ³•ï¼Œéƒ½æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å¤šçº¿ç¨‹åŒæ­¥å’Œäº’æ–¥æœ‰å‡ ç§å®ç°æ–¹æ³•ï¼Œéƒ½æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¤šçº¿ç¨‹åŒæ­¥å’Œäº’æ–¥æœ‰å‡ ç§å®ç°æ–¹æ³•ï¼Œéƒ½æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å¤šçº¿ç¨‹åŒæ­¥å’Œäº’æ–¥æœ‰å‡ ç§å®ç°æ–¹æ³•ï¼Œéƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>1ï¼‰çº¿ç¨‹åŒæ­¥</strong><br>çº¿ç¨‹åŒæ­¥ï¼Œæ˜¯æŒ‡çº¿ç¨‹ä¹‹é—´æ‰€å…·æœ‰çš„ä¸€ç§åˆ¶çº¦å…³ç³»ï¼Œä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œä¾èµ–å¦ä¸€ä¸ªçº¿ç¨‹çš„æ¶ˆæ¯ï¼Œå½“å®ƒæ²¡æœ‰å¾—åˆ°å¦ä¸€ä¸ªçº¿ç¨‹çš„æ¶ˆæ¯æ—¶åº”ç­‰å¾…ï¼Œç›´åˆ°æ¶ˆæ¯åˆ°è¾¾æ—¶æ‰è¢«å”¤é†’ã€‚</p><p>çº¿ç¨‹é—´çš„åŒæ­¥æ–¹æ³•ï¼Œå¤§ä½“å¯åˆ†ä¸ºä¸¤ç±»ï¼šç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼ã€‚é¡¾åæ€ä¹‰ï¼š</p><ul><li>å†…æ ¸æ¨¡å¼ï¼Œå°±æ˜¯æŒ‡åˆ©ç”¨ç³»ç»Ÿå†…æ ¸å¯¹è±¡çš„å•ä¸€æ€§æ¥è¿›è¡ŒåŒæ­¥ï¼Œä½¿ç”¨æ—¶éœ€è¦åˆ‡æ¢å†…æ ¸æ€ä¸ç”¨æˆ·æ€ã€‚å†…æ ¸æ¨¡å¼ä¸‹çš„æ–¹æ³•æœ‰ï¼š<br>äº‹ä»¶<ul><li>äº‹ä»¶</li><li>ä¿¡å·é‡</li><li>äº’æ–¥é‡</li></ul></li><li>ç”¨æˆ·æ¨¡å¼ï¼Œå°±æ˜¯ä¸éœ€è¦åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œåªåœ¨ç”¨æˆ·æ€å®Œæˆæ“ä½œã€‚ç”¨æˆ·æ¨¡å¼ä¸‹çš„æ–¹æ³•æœ‰ï¼š<ul><li>åŸå­æ“ä½œï¼ˆä¾‹å¦‚ä¸€ä¸ªå•ä¸€çš„å…¨å±€å˜é‡ï¼‰</li><li>ä¸´ç•ŒåŒº</li></ul></li></ul><p><strong>2ï¼‰çº¿ç¨‹äº’æ–¥</strong><br>çº¿ç¨‹äº’æ–¥ï¼Œæ˜¯æŒ‡å¯¹äºå…±äº«çš„è¿›ç¨‹ç³»ç»Ÿèµ„æºï¼Œåœ¨å„å•ä¸ªçº¿ç¨‹è®¿é—®æ—¶çš„æ’å®ƒæ€§ã€‚</p><ul><li>å½“æœ‰è‹¥å¹²ä¸ªçº¿ç¨‹éƒ½è¦ä½¿ç”¨æŸä¸€å…±äº«èµ„æºæ—¶ï¼Œä»»ä½•æ—¶åˆ»æœ€å¤šåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å»ä½¿ç”¨ï¼Œå…¶å®ƒè¦ä½¿ç”¨è¯¥èµ„æºçš„çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å ç”¨èµ„æºè€…é‡Šæ”¾è¯¥èµ„æºã€‚</li><li>çº¿ç¨‹äº’æ–¥å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹åŒæ­¥ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯-ThreadLocal-å˜é‡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-ThreadLocal-å˜é‡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ ThreadLocal å˜é‡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ ThreadLocal å˜é‡ï¼Ÿ</h3><p>ThreadLocal ï¼Œæ˜¯ Java é‡Œä¸€ç§ç‰¹æ®Šçš„å˜é‡ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª ThreadLocal å°±æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰äº†è‡ªå·±ç‹¬ç«‹çš„ä¸€ä¸ªå˜é‡ï¼Œç«äº‰æ¡ä»¶è¢«å½»åº•æ¶ˆé™¤äº†ã€‚</p><h3 id="synchronized-çš„åŸç†æ˜¯ä»€ä¹ˆ"><a href="#synchronized-çš„åŸç†æ˜¯ä»€ä¹ˆ" class="headerlink" title="synchronized çš„åŸç†æ˜¯ä»€ä¹ˆ?"></a>synchronized çš„åŸç†æ˜¯ä»€ä¹ˆ?</h3><h3 id="volatile-å®ç°åŸç†"><a href="#volatile-å®ç°åŸç†" class="headerlink" title="volatile å®ç°åŸç†"></a>volatile å®ç°åŸç†</h3><h3 id="ä»€ä¹ˆæ˜¯æ­»é”"><a href="#ä»€ä¹ˆæ˜¯æ­»é”" class="headerlink" title="ä»€ä¹ˆæ˜¯æ­»é”"></a>ä»€ä¹ˆæ˜¯æ­»é”</h3><p>æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p><p>äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶ï¼š</p><ul><li>äº’æ–¥æ¡ä»¶ï¼šæ‰€è°“äº’æ–¥å°±æ˜¯è¿›ç¨‹åœ¨æŸä¸€æ—¶é—´å†…ç‹¬å èµ„æºã€‚</li><li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—èµ„æºï¼Œåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li></ul><p>æ­»é”çš„è§£å†³æ–¹æ³•ï¼š</p><ul><li>æ’¤æ¶ˆé™·äºæ­»é”çš„å…¨éƒ¨è¿›ç¨‹ã€‚</li><li>é€ä¸ªæ’¤æ¶ˆé™·äºæ­»é”çš„è¿›ç¨‹ï¼Œç›´åˆ°æ­»é”ä¸å­˜åœ¨ã€‚</li><li>ä»é™·äºæ­»é”çš„è¿›ç¨‹ä¸­é€ä¸ªå¼ºè¿«æ”¾å¼ƒæ‰€å ç”¨çš„èµ„æºï¼Œç›´è‡³æ­»é”æ¶ˆå¤±ã€‚</li><li>ä»å¦å¤–ä¸€äº›è¿›ç¨‹é‚£é‡Œå¼ºè¡Œå‰¥å¤ºè¶³å¤Ÿæ•°é‡çš„èµ„æºåˆ†é…ç»™æ­»é”è¿›ç¨‹ï¼Œä»¥è§£é™¤æ­»é”çŠ¶æ€ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯æ´»é”ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ´»é”ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ´»é”ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ´»é”ï¼Ÿ</h3><p>æ´»é”ï¼Œä»»åŠ¡æˆ–è€…æ‰§è¡Œè€…æ²¡æœ‰è¢«é˜»å¡ï¼Œç”±äºæŸäº›æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå¯¼è‡´ä¸€ç›´é‡å¤å°è¯•ï¼Œå¤±è´¥ï¼Œå°è¯•ï¼Œå¤±è´¥</p><h3 id="æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Ÿ"><a href="#æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Ÿ"></a>æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Ÿ</h3><p>æ´»é”å’Œæ­»é”çš„åŒºåˆ«åœ¨äºï¼Œå¤„äºæ´»é”çš„å®ä½“æ˜¯åœ¨ä¸æ–­çš„æ”¹å˜çŠ¶æ€ï¼Œæ‰€è°“çš„â€œæ´»â€ï¼Œè€Œå¤„äºæ­»é”çš„å®ä½“è¡¨ç°ä¸ºç­‰å¾…ï¼›æ´»é”æœ‰å¯èƒ½è‡ªè¡Œè§£å¼€ï¼Œæ­»é”åˆ™ä¸èƒ½ã€‚</p><p>å®é™…ä¸Šï¼Œèªæ…§çš„èƒ–å‹æ˜¯ä¸æ˜¯å·²ç»å‘ç°ï¼Œæ­»é”å°±æ˜¯æ‚²è§‚é”å¯èƒ½äº§ç”Ÿçš„ç»“æœï¼Œè€Œæ´»é”æ˜¯ä¹è§‚é”å¯èƒ½äº§ç”Ÿçš„ç»“æœã€‚</p><h3 id="ä»€ä¹ˆæ˜¯æ‚²è§‚é”"><a href="#ä»€ä¹ˆæ˜¯æ‚²è§‚é”" class="headerlink" title="ä»€ä¹ˆæ˜¯æ‚²è§‚é”"></a>ä»€ä¹ˆæ˜¯æ‚²è§‚é”</h3><p>æ‚²è§‚é”ï¼Œæ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šé˜»å¡ç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚</p><ul><li>ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚</li><li>å†æ¯”å¦‚ Java é‡Œé¢çš„åŒæ­¥åŸè¯­ synchronized å…³é”®å­—çš„å®ç°ä¹Ÿæ˜¯æ‚²è§‚é”ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯ä¹è§‚é”"><a href="#ä»€ä¹ˆæ˜¯ä¹è§‚é”" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¹è§‚é”"></a>ä»€ä¹ˆæ˜¯ä¹è§‚é”</h3><p>ä¹è§‚é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ã€‚</p><ul><li>åƒæ•°æ®åº“æä¾›çš„ç±»ä¼¼äº write_condition æœºåˆ¶ï¼Œå…¶å®éƒ½æ˜¯æä¾›çš„ä¹è§‚é”ã€‚ä¾‹å¦‚ï¼Œversion å­—æ®µï¼ˆæ¯”è¾ƒè·Ÿä¸Šä¸€æ¬¡çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœä¸€æ ·åˆ™æ›´æ–°ï¼Œå¦‚æœå¤±è´¥åˆ™è¦é‡å¤è¯»-æ¯”è¾ƒ-å†™çš„æ“ä½œï¼‰</li><li>åœ¨ Java ä¸­ java.util.concurrent.atomic åŒ…ä¸‹é¢çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ CAS å®ç°çš„ã€‚</li></ul><h3 id="ä¹è§‚é”çš„å®ç°æ–¹å¼æœ‰å“ªäº›"><a href="#ä¹è§‚é”çš„å®ç°æ–¹å¼æœ‰å“ªäº›" class="headerlink" title="ä¹è§‚é”çš„å®ç°æ–¹å¼æœ‰å“ªäº›"></a>ä¹è§‚é”çš„å®ç°æ–¹å¼æœ‰å“ªäº›</h3><ul><li>ä½¿ç”¨ç‰ˆæœ¬æ ‡è¯†æ¥ç¡®å®šè¯»åˆ°çš„æ•°æ®ä¸æäº¤æ—¶çš„æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚æäº¤åä¿®æ”¹ç‰ˆæœ¬æ ‡è¯†ï¼Œä¸ä¸€è‡´æ—¶å¯ä»¥é‡‡å–ä¸¢å¼ƒå’Œå†æ¬¡å°è¯•çš„ç­–ç•¥ã€‚</li><li>Java ä¸­çš„ Compare and Swap å³ CAS ï¼Œå½“å¤šä¸ªçº¿ç¨‹å°è¯•ä½¿ç”¨ CAS åŒæ—¶æ›´æ–°åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œåªæœ‰å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹èƒ½æ›´æ–°å˜é‡çš„å€¼ï¼Œè€Œå…¶å®ƒçº¿ç¨‹éƒ½å¤±è´¥ï¼Œå¤±è´¥çš„çº¿ç¨‹å¹¶ä¸ä¼šè¢«æŒ‚èµ·ï¼Œè€Œæ˜¯è¢«å‘ŠçŸ¥è¿™æ¬¡ç«äº‰ä¸­å¤±è´¥ï¼Œå¹¶å¯ä»¥å†æ¬¡å°è¯•ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯Java-Lock-æ¥å£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Java-Lock-æ¥å£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Java Lock æ¥å£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Java Lock æ¥å£ï¼Ÿ</h3><h3 id="ä»€ä¹ˆæ˜¯å¯é‡å…¥é”ï¼ˆReentrantLockï¼‰ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¯é‡å…¥é”ï¼ˆReentrantLockï¼‰ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¯é‡å…¥é”ï¼ˆReentrantLockï¼‰ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¯é‡å…¥é”ï¼ˆReentrantLockï¼‰ï¼Ÿ</h3><p>å·²ç»è·å–åˆ°é”çš„å¯¹è±¡ï¼Œå†æ¬¡ç”³è¯·è·å–é”ï¼Œä¹Ÿå¯ä»¥ç”³è¯·æˆåŠŸï¼Œå°±æ˜¯å¯é‡å…¥é”ã€‚</p><h3 id="synchronized-å’Œ-ReentrantLock-å¼‚åŒï¼Ÿ"><a href="#synchronized-å’Œ-ReentrantLock-å¼‚åŒï¼Ÿ" class="headerlink" title="synchronized å’Œ ReentrantLock å¼‚åŒï¼Ÿ"></a>synchronized å’Œ ReentrantLock å¼‚åŒï¼Ÿ</h3><p>ç›¸åŒç‚¹ï¼š</p><ul><li>éƒ½å®ç°äº†å¤šçº¿ç¨‹åŒæ­¥å’Œå†…å­˜å¯è§æ€§è¯­ä¹‰ã€‚</li><li>éƒ½æ˜¯å¯é‡å…¥é”ã€‚</li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li>åŒæ­¥å®ç°æœºåˆ¶ä¸åŒ<ul><li>synchronized é€šè¿‡ Java å¯¹è±¡å¤´é”æ ‡è®°å’Œ Monitor å¯¹è±¡å®ç°åŒæ­¥ã€‚</li><li>ReentrantLock é€šè¿‡CASã€AQSï¼ˆAbstractQueuedSynchronizerï¼‰å’Œ LockSupportï¼ˆç”¨äºé˜»å¡å’Œè§£é™¤é˜»å¡ï¼‰å®ç°åŒæ­¥ã€‚</li></ul></li><li>å¯è§æ€§å®ç°æœºåˆ¶ä¸åŒ<ul><li>synchronized ä¾èµ– JVM å†…å­˜æ¨¡å‹ä¿è¯åŒ…å«å…±äº«å˜é‡çš„å¤šçº¿ç¨‹å†…å­˜å¯è§æ€§ã€‚</li><li>ReentrantLock é€šè¿‡ ASQ çš„ volatile state ä¿è¯åŒ…å«å…±äº«å˜é‡çš„å¤šçº¿ç¨‹å†…å­˜å¯è§æ€§ã€‚</li></ul></li><li>ä½¿ç”¨æ–¹å¼ä¸åŒ<ul><li>synchronized å¯ä»¥ä¿®é¥°å®ä¾‹æ–¹æ³•ï¼ˆé”ä½å®ä¾‹å¯¹è±¡ï¼‰ã€é™æ€æ–¹æ³•ï¼ˆé”ä½ç±»å¯¹è±¡ï¼‰ã€ä»£ç å—ï¼ˆæ˜¾ç¤ºæŒ‡å®šé”å¯¹è±¡ï¼‰ã€‚</li><li>ReentrantLock æ˜¾ç¤ºè°ƒç”¨ tryLock å’Œ lock æ–¹æ³•ï¼Œéœ€è¦åœ¨ finally å—ä¸­é‡Šæ”¾é”ã€‚</li></ul></li><li>åŠŸèƒ½ä¸°å¯Œç¨‹åº¦ä¸åŒ<ul><li>synchronized ä¸å¯è®¾ç½®ç­‰å¾…æ—¶é—´ã€ä¸å¯è¢«ä¸­æ–­ï¼ˆinterruptedï¼‰ã€‚</li><li>ReentrantLock æä¾›æœ‰é™æ—¶é—´ç­‰å€™é”ï¼ˆè®¾ç½®è¿‡æœŸæ—¶é—´ï¼‰ã€å¯ä¸­æ–­é”ï¼ˆlockInterruptiblyï¼‰ã€conditionï¼ˆæä¾› awaitã€conditionï¼ˆæä¾› awaitã€signal ç­‰æ–¹æ³•ï¼‰ç­‰ä¸°å¯ŒåŠŸèƒ½</li></ul></li><li>é”ç±»å‹ä¸åŒ<ul><li>synchronized åªæ”¯æŒéå…¬å¹³é”ã€‚</li><li>ReentrantLock æä¾›å…¬å¹³é”å’Œéå…¬å¹³é”å®ç°ã€‚å½“ç„¶ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéå…¬å¹³é”æ˜¯é«˜æ•ˆçš„é€‰æ‹©ã€‚</li></ul></li></ul><blockquote><p>åœ¨ synchronized ä¼˜åŒ–ä»¥å‰ï¼Œå®ƒçš„æ€§èƒ½æ˜¯æ¯” ReenTrantLock å·®å¾ˆå¤šçš„ï¼Œä½†æ˜¯è‡ªä» synchronized å¼•å…¥äº†åå‘é”ï¼Œè½»é‡çº§é”ï¼ˆè‡ªæ—‹é”ï¼‰åï¼Œä¸¤è€…çš„æ€§èƒ½å°±å·®ä¸å¤šäº†ï¼Œåœ¨ä¸¤ç§æ–¹æ³•éƒ½å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œå®˜æ–¹ç”šè‡³å»ºè®®ä½¿ç”¨ synchronized ã€‚</p></blockquote><blockquote><p>å¹¶ä¸”ï¼Œå®é™…ä»£ç å®æˆ˜ä¸­ï¼Œå¯èƒ½çš„ä¼˜åŒ–åœºæ™¯æ˜¯ï¼Œé€šè¿‡è¯»å†™åˆ†ç¦»ï¼Œè¿›ä¸€æ­¥æ€§èƒ½çš„æå‡ï¼Œæ‰€ä»¥ä½¿ç”¨ ReentrantReadWriteLock ã€‚</p></blockquote><h3 id="ReadWriteLock-æ˜¯ä»€ä¹ˆ"><a href="#ReadWriteLock-æ˜¯ä»€ä¹ˆ" class="headerlink" title="ReadWriteLock æ˜¯ä»€ä¹ˆ"></a>ReadWriteLock æ˜¯ä»€ä¹ˆ</h3><p>ReadWriteLock ï¼Œè¯»å†™é”æ˜¯ï¼Œç”¨æ¥æå‡å¹¶å‘ç¨‹åºæ€§èƒ½çš„é”åˆ†ç¦»æŠ€æœ¯çš„ Lock å®ç°ç±»ã€‚å¯ä»¥ç”¨äº â€œå¤šè¯»å°‘å†™â€ çš„åœºæ™¯ï¼Œè¯»å†™é”æ”¯æŒå¤šä¸ªè¯»æ“ä½œå¹¶å‘æ‰§è¡Œï¼Œå†™æ“ä½œåªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹æ¥æ“ä½œã€‚</p><p>ReadWriteLock å¯¹å‘æ•°æ®ç»“æ„ç›¸å¯¹ä¸é¢‘ç¹åœ°å†™å…¥ï¼Œä½†æ˜¯æœ‰å¤šä¸ªä»»åŠ¡è¦ç»å¸¸è¯»å–è¿™ä¸ªæ•°æ®ç»“æ„çš„è¿™ç±»æƒ…å†µè¿›è¡Œäº†ä¼˜åŒ–ã€‚ReadWriteLock ä½¿å¾—ä½ å¯ä»¥åŒæ—¶æœ‰å¤šä¸ªè¯»å–è€…ï¼Œåªè¦å®ƒä»¬éƒ½ä¸è¯•å›¾å†™å…¥å³å¯ã€‚å¦‚æœå†™é”å·²ç»è¢«å…¶ä»–ä»»åŠ¡æŒæœ‰ï¼Œé‚£ä¹ˆä»»ä½•è¯»å–è€…éƒ½ä¸èƒ½è®¿é—®ï¼Œç›´è‡³è¿™ä¸ªå†™é”è¢«é‡Šæ”¾ä¸ºæ­¢ã€‚</p><p>ReadWriteLock å¯¹ç¨‹åºæ€§èƒ½çš„æé«˜ä¸»è¦å—åˆ¶äºå¦‚ä¸‹å‡ ä¸ªå› ç´ ï¼š</p><ol><li>æ•°æ®è¢«è¯»å–çš„é¢‘ç‡ä¸è¢«ä¿®æ”¹çš„é¢‘ç‡ç›¸æ¯”è¾ƒçš„ç»“æœã€‚</li><li>è¯»å–å’Œå†™å…¥çš„æ—¶é—´</li><li>æœ‰å¤šå°‘çº¿ç¨‹ç«äº‰</li><li>æ˜¯å¦åœ¨å¤šå¤„ç†æœºå™¨ä¸Šè¿è¡Œ</li></ol><h3 id="ä»€ä¹ˆæ˜¯-Java-å†…å­˜æ¨¡å‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Java-å†…å­˜æ¨¡å‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡å‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡å‹ï¼Ÿ</h3><p><img src="http://static2.iocoder.cn/images/JDK/2020_02_07/01.png" alt></p><h3 id="ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ"></a>ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ</h3><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†æä¾›æ€§èƒ½ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol><li>åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœã€‚</li><li>å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº</li></ol><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚</strong> </p><h3 id="ä»€ä¹ˆæ˜¯å†…å­˜æ¨¡å‹çš„-happens-before-å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å†…å­˜æ¨¡å‹çš„-happens-before-å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å†…å­˜æ¨¡å‹çš„ happens-before å‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å†…å­˜æ¨¡å‹çš„ happens-before å‘¢ï¼Ÿ</h3><h3 id="SynchronizedMap-å’Œ-ConcurrentHashMap-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#SynchronizedMap-å’Œ-ConcurrentHashMap-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="SynchronizedMap å’Œ ConcurrentHashMap æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>SynchronizedMap å’Œ ConcurrentHashMap æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li><p>SynchronizedMap</p><ul><li>ä¸€æ¬¡é”ä½æ•´å¼ è¡¨æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥æ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥è®¿ä¸º map ã€‚</li></ul></li><li><p>ConcurrentHashMap</p><ul><li><p>ä½¿ç”¨åˆ†æ®µé”æ¥ä¿è¯åœ¨å¤šçº¿ç¨‹ä¸‹çš„æ€§èƒ½ã€‚ConcurrentHashMap ä¸­åˆ™æ˜¯ä¸€æ¬¡é”ä½ä¸€ä¸ªæ¡¶ã€‚ConcurrentHashMap é»˜è®¤å°† hash è¡¨åˆ†ä¸º 16 ä¸ªæ¡¶ï¼Œè¯¸å¦‚ getï¼Œputï¼Œremove ç­‰å¸¸ç”¨æ“ä½œåªé”å½“å‰éœ€è¦ç”¨åˆ°çš„æ¡¶ã€‚è¿™æ ·ï¼ŒåŸæ¥åªèƒ½ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ï¼Œç°åœ¨å´èƒ½åŒæ—¶æœ‰ 16 ä¸ªå†™çº¿ç¨‹æ‰§è¡Œï¼Œå¹¶å‘æ€§èƒ½çš„æå‡æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ã€æ³¨æ„ï¼Œè¿™å—æ˜¯ JDK7 çš„å®ç°ã€‚åœ¨ JDK8 ä¸­ï¼Œå…·ä½“çš„å®ç°å·²ç»æ”¹å˜ã€‘</p></li><li><p>å¦å¤– ConcurrentHashMap ä½¿ç”¨äº†ä¸€ç§ä¸åŒçš„è¿­ä»£æ–¹å¼ã€‚åœ¨è¿™ç§è¿­ä»£æ–¹å¼ä¸­ï¼Œå½“ iterator è¢«åˆ›å»ºåé›†åˆå†å‘ç”Ÿæ”¹å˜å°±ä¸å†æ˜¯æŠ›å‡º ConcurrentModificationException å¼‚å¸¸ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯åœ¨æ”¹å˜æ—¶ new æ–°çš„æ•°æ®ä»è€Œä¸å½±å“åŸæœ‰çš„æ•°æ®ï¼Œiterator å®Œæˆåå†å°†å¤´æŒ‡é’ˆæ›¿æ¢ä¸ºæ–°çš„æ•°æ® ï¼Œè¿™æ · iterator çº¿ç¨‹å¯ä»¥ä½¿ç”¨åŸæ¥è€çš„æ•°æ®ï¼Œè€Œå†™çº¿ç¨‹ä¹Ÿå¯ä»¥å¹¶å‘çš„å®Œæˆæ”¹å˜ã€‚</p></li></ul></li></ul><h3 id="ä»€ä¹ˆæ˜¯-Executor-æ¡†æ¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Executor-æ¡†æ¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Executor æ¡†æ¶ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Executor æ¡†æ¶ï¼Ÿ</h3><p>Executor æ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªæ ¹æ®ä¸€ç»„æ‰§è¡Œç­–ç•¥è°ƒç”¨ï¼Œè°ƒåº¦ï¼Œæ‰§è¡Œå’Œæ§åˆ¶çš„å¼‚æ­¥ä»»åŠ¡çš„æ¡†æ¶ã€‚</p><p>æ— é™åˆ¶çš„åˆ›å»ºçº¿ç¨‹ï¼Œä¼šå¼•èµ·åº”ç”¨ç¨‹åºå†…å­˜æº¢å‡ºã€‚æ‰€ä»¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± æ˜¯ä¸ªæ›´å¥½çš„çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå¯ä»¥é™åˆ¶çº¿ç¨‹çš„æ•°é‡å¹¶ä¸”å¯ä»¥å›æ”¶å†åˆ©ç”¨è¿™äº›çº¿ç¨‹ã€‚åˆ©ç”¨ Executor æ¡†æ¶ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ã€‚</p><h3 id="åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ç§æ–¹å¼ï¼Ÿ"><a href="#åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ç§æ–¹å¼ï¼Ÿ"></a>åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ç§æ–¹å¼ï¼Ÿ</h3><p>Java ç±»åº“æä¾›ä¸€ä¸ªçµæ´»çš„çº¿ç¨‹æ± ä»¥åŠä¸€äº›æœ‰ç”¨çš„é»˜è®¤é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Executors çš„é™æ€æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± ã€‚</p><blockquote><p>Executors åˆ›å»ºçš„çº¿ç¨‹æ± ï¼Œåˆ†æˆæ™®é€šä»»åŠ¡çº¿ç¨‹æ± ï¼Œå’Œå®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± ã€‚</p></blockquote><p><strong>1ï¼‰æ™®é€šçº¿ç¨‹æ± </strong></p><ul><li><code>#newFixedThreadPool(int nThreads)</code> æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ã€‚<ul><li>æ¯å½“æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§æ•°é‡ï¼Œè¿™æ—¶çº¿ç¨‹è§„æ¨¡å°†ä¸å†å˜åŒ–ã€‚</li><li>å½“çº¿ç¨‹å‘ç”Ÿæœªé¢„æœŸçš„é”™è¯¯è€Œç»“æŸæ—¶ï¼Œçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚</li></ul></li><li><code>#newCachedThreadPool()</code> æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ã€‚<ul><li>å¦‚æœçº¿ç¨‹æ± çš„è§„æ¨¡è¶…è¿‡äº†å¤„ç†éœ€æ±‚ï¼Œå°†è‡ªåŠ¨å›æ”¶ç©ºé—²çº¿ç¨‹ã€‚</li><li>å½“éœ€æ±‚å¢åŠ æ—¶ï¼Œåˆ™å¯ä»¥è‡ªåŠ¨æ·»åŠ æ–°çº¿ç¨‹ã€‚çº¿ç¨‹æ± çš„è§„æ¨¡ä¸å­˜åœ¨ä»»ä½•é™åˆ¶ã€‚</li></ul></li><li><code>#newSingleThreadExecutor()</code> æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚<ul><li>å®ƒåˆ›å»ºå•ä¸ªå·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœè¿™ä¸ªçº¿ç¨‹å¼‚å¸¸ç»“æŸï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ¥æ›¿ä»£å®ƒã€‚</li><li>å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼Œèƒ½ç¡®ä¿ä¾ç…§ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­çš„é¡ºåºæ¥ä¸²è¡Œæ‰§è¡Œã€‚</li></ul></li></ul><p><strong>2ï¼‰å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± </strong></p><ul><li><code>#newScheduledThreadPool(int corePoolSize)</code> æ–¹æ³•ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ï¼Œè€Œä¸”ä»¥å»¶è¿Ÿæˆ–å®šæ—¶çš„æ–¹å¼æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç±»ä¼¼ Timer ã€‚</li><li><code>#newSingleThreadExecutor()</code> æ–¹æ³•ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå›ºå®šé•¿åº¦ä¸º 1 çš„çº¿ç¨‹æ± ï¼Œè€Œä¸”ä»¥å»¶è¿Ÿæˆ–å®šæ—¶çš„æ–¹å¼æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç±»ä¼¼ Timer ã€‚</li></ul><h3 id="ThreadPoolExecutor-æœ‰å“ªäº›æ‹’ç»ç­–ç•¥ï¼Ÿ"><a href="#ThreadPoolExecutor-æœ‰å“ªäº›æ‹’ç»ç­–ç•¥ï¼Ÿ" class="headerlink" title="ThreadPoolExecutor æœ‰å“ªäº›æ‹’ç»ç­–ç•¥ï¼Ÿ"></a>ThreadPoolExecutor æœ‰å“ªäº›æ‹’ç»ç­–ç•¥ï¼Ÿ</h3><p>ThreadPoolExecutor é»˜è®¤æœ‰å››ä¸ªæ‹’ç»ç­–ç•¥ï¼š</p><ul><li>ThreadPoolExecutor.AbortPolicy() ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ RejectedExecutionException ã€‚</li><li>ThreadPoolExecutor.CallerRunsPolicy() ï¼Œç›´æ¥è°ƒç”¨ run æ–¹æ³•å¹¶ä¸”é˜»å¡æ‰§è¡Œã€‚</li><li>ThreadPoolExecutor.DiscardPolicy() ï¼Œç›´æ¥ä¸¢å¼ƒåæ¥çš„ä»»åŠ¡ã€‚</li><li>ThreadPoolExecutor.DiscardOldestPolicy() ï¼Œä¸¢å¼ƒåœ¨é˜Ÿåˆ—ä¸­é˜Ÿé¦–çš„ä»»åŠ¡ã€‚</li></ul><p>å¦‚æœæˆ‘ä»¬æœ‰éœ€è¦ï¼Œå¯ä»¥è‡ªå·±å®ç° RejectedExecutionHandler æ¥å£ï¼Œå®ç°è‡ªå®šä¹‰çš„æ‹’ç»é€»è¾‘ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-Callableã€Futureã€FutureTask-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Callableã€Futureã€FutureTask-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Callableã€Futureã€FutureTask ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Callableã€Futureã€FutureTask ï¼Ÿ</h3><p><strong>1ï¼‰Callable</strong></p><p>Callable æ¥å£ï¼Œç±»ä¼¼äº Runnable ï¼Œä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥äº†ï¼Œä½†æ˜¯Runnable ä¸ä¼šè¿”å›ç»“æœï¼Œå¹¶ä¸”æ— æ³•æŠ›å‡ºè¿”å›ç»“æœçš„å¼‚å¸¸ï¼Œè€Œ Callable åŠŸèƒ½æ›´å¼ºå¤§ä¸€äº›ï¼Œè¢«çº¿ç¨‹æ‰§è¡Œåï¼Œå¯ä»¥è¿”å›å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼å¯ä»¥è¢« Future æ‹¿åˆ°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒFuture å¯ä»¥æ‹¿åˆ°å¼‚æ­¥æ‰§è¡Œä»»åŠ¡çš„è¿”å›å€¼ã€‚</p><blockquote><p>ç®€å•æ¥è¯´ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å¸¦æœ‰å›è°ƒçš„ Runnable ã€‚</p></blockquote><p><strong>2ï¼‰Future</strong></p><p>Future æ¥å£ï¼Œè¡¨ç¤ºå¼‚æ­¥ä»»åŠ¡ï¼Œæ˜¯è¿˜æ²¡æœ‰å®Œæˆçš„ä»»åŠ¡ç»™å‡ºçš„æœªæ¥ç»“æœã€‚æ‰€ä»¥è¯´ Callable ç”¨äºäº§ç”Ÿç»“æœï¼ŒFuture ç”¨äºè·å–ç»“æœã€‚</p><p><strong>3ï¼‰FutureTask</strong></p><p>åœ¨ Java å¹¶å‘ç¨‹åºä¸­ï¼ŒFutureTask è¡¨ç¤ºä¸€ä¸ªå¯ä»¥å–æ¶ˆçš„å¼‚æ­¥è¿ç®—ã€‚</p><ul><li>å®ƒæœ‰å¯åŠ¨å’Œå–æ¶ˆè¿ç®—ã€æŸ¥è¯¢è¿ç®—æ˜¯å¦å®Œæˆå’Œå–å›è¿ç®—ç»“æœç­‰æ–¹æ³•ã€‚åªæœ‰å½“è¿ç®—å®Œæˆçš„æ—¶å€™ç»“æœæ‰èƒ½å–å›ï¼Œå¦‚æœè¿ç®—å°šæœªå®Œæˆ get æ–¹æ³•å°†ä¼šé˜»å¡ã€‚</li><li>ä¸€ä¸ª FutureTask å¯¹è±¡ï¼Œå¯ä»¥å¯¹è°ƒç”¨äº† Callable å’Œ Runnable çš„å¯¹è±¡è¿›è¡ŒåŒ…è£…ï¼Œç”±äº FutureTask ä¹Ÿæ˜¯ç»§æ‰¿äº† Runnable æ¥å£ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æäº¤ç»™ Executor æ¥æ‰§è¡Œã€‚</li></ul><h3 id="è®²è®²çº¿ç¨‹æ± çš„å®ç°åŸç†"><a href="#è®²è®²çº¿ç¨‹æ± çš„å®ç°åŸç†" class="headerlink" title="è®²è®²çº¿ç¨‹æ± çš„å®ç°åŸç†"></a>è®²è®²çº¿ç¨‹æ± çš„å®ç°åŸç†</h3><h3 id="ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—ï¼Ÿæœ‰ä»€ä¹ˆé€‚ç”¨åœºæ™¯ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—ï¼Ÿæœ‰ä»€ä¹ˆé€‚ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—ï¼Ÿæœ‰ä»€ä¹ˆé€‚ç”¨åœºæ™¯ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é˜»å¡é˜Ÿåˆ—ï¼Ÿæœ‰ä»€ä¹ˆé€‚ç”¨åœºæ™¯ï¼Ÿ</h3><p>é˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰æ˜¯ä¸€ä¸ªæ”¯æŒä¸¤ä¸ªé™„åŠ æ“ä½œçš„é˜Ÿåˆ—ã€‚è¿™ä¸¤ä¸ªé™„åŠ çš„æ“ä½œæ˜¯ï¼š</p><ul><li>åœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè·å–å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å˜ä¸ºéç©ºã€‚</li><li>å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œå­˜å‚¨å…ƒç´ çš„çº¿ç¨‹ä¼šç­‰å¾…é˜Ÿåˆ—å¯ç”¨ã€‚</li></ul><p>é˜»å¡é˜Ÿåˆ—å¸¸ç”¨äºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„åœºæ™¯ï¼š</p><p>ç”Ÿäº§è€…æ˜¯å¾€é˜Ÿåˆ—é‡Œæ·»åŠ å…ƒç´ çš„çº¿ç¨‹ï¼Œæ¶ˆè´¹è€…æ˜¯ä»é˜Ÿåˆ—é‡Œæ‹¿å…ƒç´ çš„çº¿ç¨‹<br>é˜»å¡é˜Ÿåˆ—å°±æ˜¯ç”Ÿäº§è€…å­˜æ”¾å…ƒç´ çš„å®¹å™¨ï¼Œè€Œæ¶ˆè´¹è€…ä¹Ÿåªä»å®¹å™¨é‡Œæ‹¿å…ƒç´ ã€‚ </p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜œé¢è¯•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaå¹¶å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å‡†å¤‡ç³»åˆ—ä¹‹Spring MVC</title>
      <link href="/2019/10/17/interview-spring-mvc/"/>
      <url>/2019/10/17/interview-spring-mvc/</url>
      
        <content type="html"><![CDATA[<h3 id="Spring-MVC-å„ç»„ä»¶ä»¥åŠåŠŸèƒ½"><a href="#Spring-MVC-å„ç»„ä»¶ä»¥åŠåŠŸèƒ½" class="headerlink" title="Spring MVC å„ç»„ä»¶ä»¥åŠåŠŸèƒ½"></a>Spring MVC å„ç»„ä»¶ä»¥åŠåŠŸèƒ½</h3><ul><li>MultipartResolverï¼šå†…å®¹ç±»å‹( Content-Type )ä¸º <code>multipart/*</code> çš„è¯·æ±‚çš„è§£æå™¨æ¥å£</li><li>LocaleResolverï¼šæœ¬åœ°åŒ–( å›½é™…åŒ– )è§£æå™¨æ¥å£</li><li>ThemeResolverï¼šä¸»é¢˜è§£æå™¨æ¥å£(ä¾‹å¦‚ï¼Œä»è¯·æ±‚å¤´ User-Agent ï¼Œåˆ¤æ–­ä½¿ç”¨ PC ç«¯ï¼Œè¿˜æ˜¯ç§»åŠ¨ç«¯çš„ä¸»é¢˜)</li><li>HandlerMappingï¼šå¤„ç†å™¨åŒ¹é…æ¥å£ï¼Œæ ¹æ®è¯·æ±‚( handler )è·å¾—å…¶çš„å¤„ç†å™¨( handler )å’Œæ‹¦æˆªå™¨ä»¬( HandlerInterceptor æ•°ç»„ )</li><li>HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨æ¥å£</li><li>HandlerExceptionResolverï¼šå¤„ç†å™¨å¼‚å¸¸è§£æå™¨æ¥å£ï¼Œå°†å¤„ç†å™¨( handler )æ‰§è¡Œæ—¶å‘ç”Ÿçš„å¼‚å¸¸ï¼Œè§£æ( è½¬æ¢ )æˆå¯¹åº”çš„ ModelAndView ç»“æœ</li><li>RequestToViewNameTranslatorï¼šè¯·æ±‚åˆ°è§†å›¾åçš„è½¬æ¢å™¨æ¥å£</li><li>ViewResolverï¼šå®ä½“è§£æå™¨æ¥å£ï¼Œæ ¹æ®è§†å›¾åå’Œå›½é™…åŒ–ï¼Œè·å¾—æœ€ç»ˆçš„è§†å›¾ View å¯¹è±¡</li><li>FlashMapManagerï¼šFlashMap ç®¡ç†å™¨æ¥å£ï¼Œè´Ÿè´£é‡å®šå‘æ—¶ï¼Œä¿å­˜å‚æ•°åˆ°ä¸´æ—¶å­˜å‚¨ä¸­</li></ul><a id="more"></a><h3 id="DispatcherServlet-çš„å·¥ä½œæµç¨‹"><a href="#DispatcherServlet-çš„å·¥ä½œæµç¨‹" class="headerlink" title="DispatcherServlet çš„å·¥ä½œæµç¨‹"></a>DispatcherServlet çš„å·¥ä½œæµç¨‹</h3><ol><li>å‘é€è¯·æ±‚ï¼šç”¨æˆ·å‘æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚ï¼Œè¯·æ±‚è¢« Spring MVC çš„è°ƒåº¦æ§åˆ¶å™¨ DispatcherServlet æ•è·ã€‚</li><li>æ˜ å°„å¤„ç†å™¨ï¼šDispatcherServlet æ ¹æ®è¯·æ±‚ URL ï¼Œè°ƒç”¨ HandlerMapping è·å¾—è¯¥ Handler é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ Handler å¯¹è±¡ä»¥åŠ Handler å¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥ HandlerExecutionChain å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚</li><li>å¤„ç†å™¨é€‚é…ï¼šDispatcherServlet æ ¹æ®è·å¾—çš„ Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapter ã€‚ï¼ˆé™„æ³¨ï¼šå¦‚æœæˆåŠŸè·å¾— HandlerAdapter åï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ #preHandler(â€¦) æ–¹æ³•ï¼‰ã€‚Handler(Controller) æ‰§è¡Œå®Œæˆåï¼Œå‘ DispatcherServlet è¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡</li><li>è§£æè§†å›¾ï¼šæ ¹æ®è¿”å›çš„ ModelAndView ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ ViewResolverï¼ˆå¿…é¡»æ˜¯å·²ç»æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­çš„ ViewResolver)ï¼Œè§£æå‡º View å¯¹è±¡ï¼Œç„¶åè¿”å›ç»™ DispatcherServletã€‚</li><li>æ¸²æŸ“è§†å›¾ + å“åº”è¯·æ±‚</li></ol><h3 id="ä»‹ç»ä¸€ä¸‹-WebApplicationContext-ï¼Ÿ"><a href="#ä»‹ç»ä¸€ä¸‹-WebApplicationContext-ï¼Ÿ" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ WebApplicationContext ï¼Ÿ"></a>ä»‹ç»ä¸€ä¸‹ WebApplicationContext ï¼Ÿ</h3><p>WebApplicationContext æ˜¯å®ç°ApplicationContextæ¥å£çš„å­ç±»ï¼Œä¸“é—¨ä¸º WEB åº”ç”¨å‡†å¤‡çš„ã€‚</p><ul><li>å®ƒå…è®¸ä»ç›¸å¯¹äº Web æ ¹ç›®å½•çš„è·¯å¾„ä¸­åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå®Œæˆåˆå§‹åŒ– Spring MVC ç»„ä»¶çš„å·¥ä½œã€‚</li><li>ä» WebApplicationContext ä¸­ï¼Œå¯ä»¥è·å– ServletContext å¼•ç”¨ï¼Œæ•´ä¸ª Web åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å°†ä½œä¸ºå±æ€§æ”¾ç½®åœ¨ ServletContext ä¸­ï¼Œä»¥ä¾¿ Web åº”ç”¨ç¯å¢ƒå¯ä»¥è®¿é—® Spring ä¸Šä¸‹æ–‡ã€‚</li></ul><h4 id="Spring-MVC-è¿è¡Œæµç¨‹å›¾"><a href="#Spring-MVC-è¿è¡Œæµç¨‹å›¾" class="headerlink" title="Spring MVC è¿è¡Œæµç¨‹å›¾"></a>Spring MVC è¿è¡Œæµç¨‹å›¾</h4><p><img src="http://static2.iocoder.cn/images/Spring/2022-02-21/01.png" alt></p><h3 id="Spring-MVCæ‹¦æˆªå™¨"><a href="#Spring-MVCæ‹¦æˆªå™¨" class="headerlink" title="Spring MVCæ‹¦æˆªå™¨"></a>Spring MVCæ‹¦æˆªå™¨</h3><p><code>org.springframework.web.servlet.HandlerInterceptor</code> ï¼Œæ‹¦æˆªå™¨æ¥å£ã€‚ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HandlerInterceptor.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå¤„ç†å™¨ï¼Œåœ¨ &#123;<span class="doctag">@link</span> HandlerAdapter#handle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡Œä¹‹å‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå¤„ç†å™¨ï¼Œåœ¨ &#123;<span class="doctag">@link</span> HandlerAdapter#handle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡ŒæˆåŠŸä¹‹å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">@Nullable ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå¤„ç†å™¨ï¼Œåœ¨ &#123;<span class="doctag">@link</span> HandlerAdapter#handle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡Œå®Œä¹‹åï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å¹¶ä¸”ï¼Œåªæœ‰è¯¥å¤„ç†å™¨ &#123;<span class="doctag">@link</span> #preHandle(HttpServletRequest, HttpServletResponse, Object)&#125; æ‰§è¡ŒæˆåŠŸä¹‹åï¼Œæ‰ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">@Nullable Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>ä¸€å…±æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºï¼š<ul><li><code>#preHandle(...)</code> æ–¹æ³•ï¼Œè°ƒç”¨ Controller æ–¹æ³•ä¹‹å‰æ‰§è¡Œã€‚</li><li><code>#postHandle(...)</code> æ–¹æ³•ï¼Œè°ƒç”¨ Controller æ–¹æ³•ä¹‹åæ‰§è¡Œã€‚</li><li><code>#afterCompletion(...)</code> æ–¹æ³•ï¼Œå¤„ç†å®Œ Controller æ–¹æ³•è¿”å›ç»“æœä¹‹åæ‰§è¡Œã€‚</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜œé¢è¯•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å……åˆ†åˆ©ç”¨ä½ çš„24å°æ—¶</title>
      <link href="/2019/10/09/time-mgt/"/>
      <url>/2019/10/09/time-mgt/</url>
      
        <content type="html"><![CDATA[<p><strong>å¦‚æœä½ å¯¹ â€œå¦‚ä½•å……åˆ†åˆ©ç”¨ä½ çš„24å°æ—¶â€æ„Ÿå…´è¶£ï¼Œæˆ‘æ¨èä½ è¯»ã€Šæ—¶é—´ç®¡ç† å¦‚ä½•å……åˆ†åˆ©ç”¨ä½ çš„24å°æ—¶ã€‹æ¼«ç”»ç‰ˆã€‚</strong></p><p>ä»¥ä¸‹æ˜¯æˆ‘ä¸ªäººä»ä¹¦ä¸­å­¦åˆ°çš„ä»¥åŠä¸€äº›è‡ªå·±çš„ä½“ä¼šã€‚</p><h3 id="æ„è¯†åˆ°è‡ªå·±çš„æ—¶é—´èŠ±è´¹åœ¨ä»€ä¹ˆåœ°æ–¹"><a href="#æ„è¯†åˆ°è‡ªå·±çš„æ—¶é—´èŠ±è´¹åœ¨ä»€ä¹ˆåœ°æ–¹" class="headerlink" title="æ„è¯†åˆ°è‡ªå·±çš„æ—¶é—´èŠ±è´¹åœ¨ä»€ä¹ˆåœ°æ–¹"></a>æ„è¯†åˆ°è‡ªå·±çš„æ—¶é—´èŠ±è´¹åœ¨ä»€ä¹ˆåœ°æ–¹</h3><p>æ¯å¤©ç¡è§‰ä¹‹å‰çš„æ—¶é—´ï¼Œå¯ä»¥æ€»ç»“ä¸€ä¸‹å½“å¤©éƒ½åšä»€ä¹ˆäº‹æƒ…ï¼Œåˆ†åˆ«èŠ±è´¹äº†å¤šå°‘æ—¶é—´ã€‚ç”»ä¸€ä¸ªå¦‚ä¸‹ç±»ä¼¼çš„è¡¨æ ¼ï¼š</p><table><thead><tr><th style="text-align:center">æ—¶é—´æ®µ</th><th style="text-align:center">å†…å®¹</th><th style="text-align:center">æ—¶é—´</th></tr></thead><tbody><tr><td style="text-align:center">02:30-12:00</td><td style="text-align:center">ç¡è§‰</td><td style="text-align:center">9.5å°æ—¶</td></tr><tr><td style="text-align:center">14:00-20:00</td><td style="text-align:center">æ‰“ç‹è€…è£è€€</td><td style="text-align:center">6å°æ—¶</td></tr><tr><td style="text-align:center">â€¦</td><td style="text-align:center">â€¦</td><td style="text-align:center">â€¦</td></tr><tr><td style="text-align:center">19:00-22:00</td><td style="text-align:center">çœ‹ç”µè§†å‰§</td><td style="text-align:center">5å°æ—¶</td></tr><tr><td style="text-align:center">23:00-24:00</td><td style="text-align:center">å®šå¤–å–åƒé¥­</td><td style="text-align:center">3å°æ—¶</td></tr></tbody></table><p>è¿™æ ·å¯ä»¥æ¸…æ™°çœ‹åˆ°è‡ªå·±åœ¨æŸä»¶äº‹æƒ…ä¸ŠèŠ±è´¹çš„æ—¶é—´ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µåœ¨è®¡åˆ’è¡¨ä¸­å‡å°‘æˆ–è€…å¢åŠ ã€‚</p><a id="more"></a><h3 id="ç¡®å®šè‡ªå·±çš„ç›®æ ‡"><a href="#ç¡®å®šè‡ªå·±çš„ç›®æ ‡" class="headerlink" title="ç¡®å®šè‡ªå·±çš„ç›®æ ‡"></a>ç¡®å®šè‡ªå·±çš„ç›®æ ‡</h3><p>æ‰¾è‡ªå·±å–œæ¬¢çš„æ–¹å¼ç»™è‡ªå·±åˆ¶å®šæ˜ç¡®çš„è®¡åˆ’è¡¨ï¼Œæ¯”å¦‚ï¼š</p><table><thead><tr><th style="text-align:center">æ—¶é—´</th><th style="text-align:center">å†…å®¹ </th></tr></thead><tbody><tr><td style="text-align:center">01:00-08:00</td><td style="text-align:center">ç¡è§‰</td></tr><tr><td style="text-align:center">08:30-09:00</td><td style="text-align:center">åƒæ—©é¤</td></tr><tr><td style="text-align:center">09:00-12:00</td><td style="text-align:center">å­¦ä¹ æ•°æ®ç»“æ„</td></tr><tr><td style="text-align:center">â€¦</td><td style="text-align:center">â€¦</td></tr><tr><td style="text-align:center">23:00-24:00</td><td style="text-align:center">æ´—æ¾¡ã€åšå½“å¤©æ€»ç»“ã€åšç¬¬äºŒå¤©è®¡åˆ’</td></tr></tbody></table><p>å¯¹æ¯”è‡ªå·±çš„è®¡åˆ’è¡¨å’Œå®é™…èŠ±è´¹çš„æ—¶é—´è¡¨ï¼Œæ€»ç»“è‡ªå·±çš„è¡Œä¸ºï¼Œæ”¹è¿›è‡ªå·±çš„æ—¶é—´ç®¡ç†ã€‚</p><h3 id="é€‰æ‹©å¯¹è‡ªå·±ç›®æ ‡æœ‰å¸®åŠ©çš„äº‹æƒ…å»åšï¼Œæ”¾å¼ƒé‚£äº›å½±å“è‡ªå·±è¾¾æˆç›®æ ‡çš„äº‹æƒ…"><a href="#é€‰æ‹©å¯¹è‡ªå·±ç›®æ ‡æœ‰å¸®åŠ©çš„äº‹æƒ…å»åšï¼Œæ”¾å¼ƒé‚£äº›å½±å“è‡ªå·±è¾¾æˆç›®æ ‡çš„äº‹æƒ…" class="headerlink" title="é€‰æ‹©å¯¹è‡ªå·±ç›®æ ‡æœ‰å¸®åŠ©çš„äº‹æƒ…å»åšï¼Œæ”¾å¼ƒé‚£äº›å½±å“è‡ªå·±è¾¾æˆç›®æ ‡çš„äº‹æƒ…"></a>é€‰æ‹©å¯¹è‡ªå·±ç›®æ ‡æœ‰å¸®åŠ©çš„äº‹æƒ…å»åšï¼Œæ”¾å¼ƒé‚£äº›å½±å“è‡ªå·±è¾¾æˆç›®æ ‡çš„äº‹æƒ…</h3><h4 id="ä¹ æƒ¯å…»æˆ"><a href="#ä¹ æƒ¯å…»æˆ" class="headerlink" title="ä¹ æƒ¯å…»æˆ"></a>ä¹ æƒ¯å…»æˆ</h4><ul><li>é—¹é’Ÿå“èµ·ï¼Œç«‹å³ä¸‹åºŠ</li><li>ä¸Šåˆæ—¶é—´ï¼Œå­¦ä¹ æ•°æ®ç»“æ„ä¸ç®—æ³•ç›¸å…³</li><li>è§„å¾‹ã€å¥åº·çš„é¥®é£Ÿå’Œè¿åŠ¨</li><li>å¿«é€ŸåšæŠ‰æ‹©</li><li>å¿«é€Ÿé˜…è¯»</li><li>åˆ©ç”¨ç¢ç‰‡æ—¶é—´ï¼Œåœ°é“ä¸Šã€ç­‰å¤–å–ã€æ’é˜Ÿçš„æ—¶å€™ï¼Œå¯ä»¥çœ‹å…¬ä¼—å·ã€æå®¢æ—¶é—´<br>ã€çŸ¥è¯†æ˜Ÿçƒ</li><li>ä¸æ‹–å»¶ï¼ŒæŒ‰ç…§è®¡åˆ’è¡¨å»åšã€‚å¤§ä»»åŠ¡ï¼Œåˆ†è§£æˆå°ä»»åŠ¡ï¼Œæ”¾åˆ°è®¡åˆ’è¡¨ä¸­ã€‚</li><li>æ‹’ç»æ‚ä¹±æ— ç« ï¼Œç‰©åº”å„æœ‰å…¶æ‰€ï¼Œäº¦åº”å„åœ¨å…¶æ‰€</li><li>æ¯å‘¨å¯¹è‡ªå·±çš„æ—¶é—´èŠ±è´¹è¡Œä¸ºè¿›è¡Œæ€»ç»“ï¼Œæ¯æœˆä¹Ÿè¦æ€»ç»“ï¼Œå·²ç»åˆ¶å®šä¸‹æœˆè®¡åˆ’</li></ul><h4 id="æ—¶é—´ç®¡ç†æŠ€å·§"><a href="#æ—¶é—´ç®¡ç†æŠ€å·§" class="headerlink" title="æ—¶é—´ç®¡ç†æŠ€å·§"></a>æ—¶é—´ç®¡ç†æŠ€å·§</h4><ul><li>åˆ©ç”¨å¥½ç¢ç‰‡æ—¶é—´</li><li>åšäº‹å‰èŠ±ç‰¹å®šæ—¶é—´æ€è€ƒï¼Œæ€è€ƒæ—¶é—´è¿‡åå¼€å§‹è¡ŒåŠ¨</li><li>åšäº‹ä¸“æ³¨</li><li>åšäº‹ä¸åŠé€”è€ŒåºŸï¼Œåšå®Œä¹‹åï¼Œä¸å†æ‰“å¼€</li><li>æ³¨æ„åœ¨é‡è¦çš„äº‹æƒ…ä¸Šå¤šèŠ±è´¹æ—¶é—´</li><li>æ³¨æ„ä¼˜å…ˆé¡ºåºï¼Œåœ¨ç²¾åŠ›å……æ²›çš„æ—¶é—´ï¼Œåšå½“å¤©æœ€å›°éš¾çš„äº‹æƒ…</li><li>ä¿ä¼¼æ°´ä¹‹å¿ƒ</li><li>æ‹’ç»æ‚ä¹±æ— ç« </li><li>æ€»ç»“ã€åˆ¶å®šè®¡åˆ’</li><li>è§„å¾‹ã€å¥åº·çš„é¥®é£Ÿå’Œè¿åŠ¨</li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜®å¿ƒå¾—ä½“ä¼š </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¶é—´ç®¡ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å‡†å¤‡ç³»åˆ—ä¹‹Javaé›†åˆ</title>
      <link href="/2019/10/02/interview-java-collection/"/>
      <url>/2019/10/02/interview-java-collection/</url>
      
        <content type="html"><![CDATA[<h3 id="Javaé›†åˆæ¡†æ¶éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#Javaé›†åˆæ¡†æ¶éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Javaé›†åˆæ¡†æ¶éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>Javaé›†åˆæ¡†æ¶éƒ½æœ‰å“ªäº›ï¼Ÿ</h3><h4 id="å®ç°Collectionæ¥å£çš„ï¼Œå­˜æ”¾ç‰¹å®šå…ƒç´ çš„é›†åˆçš„å¯¹è±¡"><a href="#å®ç°Collectionæ¥å£çš„ï¼Œå­˜æ”¾ç‰¹å®šå…ƒç´ çš„é›†åˆçš„å¯¹è±¡" class="headerlink" title="å®ç°Collectionæ¥å£çš„ï¼Œå­˜æ”¾ç‰¹å®šå…ƒç´ çš„é›†åˆçš„å¯¹è±¡"></a>å®ç°<code>Collection</code>æ¥å£çš„ï¼Œå­˜æ”¾ç‰¹å®šå…ƒç´ çš„é›†åˆçš„å¯¹è±¡</h4><p><img src="https://static001.geekbang.org/resource/image/67/c7/675536edf1563b11ab7ead0def1215c7.png" alt></p><a id="more"></a><h4 id="å®ç°Mapæ¥å£çš„ï¼Œå°†é”®æ˜ å°„åˆ°å€¼çš„å¯¹è±¡"><a href="#å®ç°Mapæ¥å£çš„ï¼Œå°†é”®æ˜ å°„åˆ°å€¼çš„å¯¹è±¡" class="headerlink" title="å®ç°Mapæ¥å£çš„ï¼Œå°†é”®æ˜ å°„åˆ°å€¼çš„å¯¹è±¡"></a>å®ç°<code>Map</code>æ¥å£çš„ï¼Œå°†é”®æ˜ å°„åˆ°å€¼çš„å¯¹è±¡</h4><p><img src="https://static001.geekbang.org/resource/image/26/7c/266cfaab2573c9777b1157816784727c.png" alt></p><h4 id="é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„æ€»ç»“"><a href="#é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„æ€»ç»“" class="headerlink" title="é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„æ€»ç»“"></a>é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„æ€»ç»“</h4><h5 id="List"><a href="#List" class="headerlink" title="List"></a>List</h5><ul><li>ArrayList ï¼šObject æ•°ç»„ã€‚</li><li>Vector ï¼šObject æ•°ç»„ã€‚</li><li>LinkedList ï¼šåŒå‘é“¾è¡¨(JDK6 ä¹‹å‰ä¸ºå¾ªç¯é“¾è¡¨ï¼ŒJDK7 å–æ¶ˆäº†å¾ªç¯)ã€‚</li></ul><h5 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h5><ul><li>HashSet ï¼šæ— åºï¼Œå”¯ä¸€ï¼ŒåŸºäº HashMap å®ç°çš„ï¼Œåº•å±‚é‡‡ç”¨ HashMap æ¥ä¿å­˜å…ƒç´ ã€‚ï¼ˆï¼‰</li><li>LinkedHashSet ï¼šLinkedHashSet ç»§æ‰¿è‡ª HashSetï¼Œå¹¶ä¸”å…¶å†…éƒ¨æ˜¯é€šè¿‡ LinkedHashMap æ¥å®ç°çš„ã€‚æœ‰ç‚¹ç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰è¯´çš„LinkedHashMap å…¶å†…éƒ¨æ˜¯åŸºäº HashMap å®ç°ä¸€æ ·ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹åŒºåˆ«çš„ã€‚</li><li>TreeSet ï¼šæœ‰åºï¼Œå”¯ä¸€ï¼Œçº¢é»‘æ ‘(è‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘)ã€‚</li></ul><h5 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h5><ul><li>HashMapï¼šHashMap ç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼ˆâ€œæ‹‰é“¾æ³•â€è§£å†³å†²çªï¼‰ã€‚</li></ul><p>JDK8 ä»¥åï¼Œåœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 8 ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚</p><ul><li>LinkedHashMapï¼šLinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ä»ç„¶æ˜¯åŸºäºæ‹‰é“¾å¼æ•£åˆ—ç»“æ„å³ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚</li><li>Hashtable ï¼šæ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ã€‚</li><li>TreeMap ï¼šçº¢é»‘æ ‘ï¼ˆè‡ªå¹³è¡¡çš„æ’åºäºŒå‰æ ‘ï¼‰ã€‚</li></ul><h4 id="List-å’Œ-Set-åŒºåˆ«ï¼Ÿ"><a href="#List-å’Œ-Set-åŒºåˆ«ï¼Ÿ" class="headerlink" title="List å’Œ Set åŒºåˆ«ï¼Ÿ"></a>List å’Œ Set åŒºåˆ«ï¼Ÿ</h4><p>Listï¼ŒSet éƒ½æ˜¯ç»§æ‰¿è‡ª Collection æ¥å£ã€‚</p><ul><li>List ç‰¹ç‚¹ï¼šå…ƒç´ æœ‰æ”¾å…¥é¡ºåºï¼Œå…ƒç´ å¯é‡å¤ã€‚å¯ä»¥ç”¨ä¸‹æ ‡éå†æˆ–è€…è¿­ä»£å™¨éå†ã€‚</li><li>Set ç‰¹ç‚¹ï¼šå…ƒç´ æ— æ”¾å…¥é¡ºåºï¼Œå…ƒç´ ä¸å¯é‡å¤ï¼Œé‡å¤å…ƒç´ ä¼šè¦†ç›–æ‰ã€‚åªèƒ½ç”¨è¿­ä»£å™¨éå†ã€‚</li></ul><h4 id="ArrayList-ä¸-LinkedList-åŒºåˆ«ï¼Ÿ"><a href="#ArrayList-ä¸-LinkedList-åŒºåˆ«ï¼Ÿ" class="headerlink" title="ArrayList ä¸ LinkedList åŒºåˆ«ï¼Ÿ"></a>ArrayList ä¸ LinkedList åŒºåˆ«ï¼Ÿ</h4><h5 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h5><ul><li>ä¼˜ç‚¹ï¼šArrayList æ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œå› ä¸ºåœ°å€è¿ç»­ï¼Œä¸€æ—¦æ•°æ®å­˜å‚¨å¥½äº†ï¼ŒæŸ¥è¯¢æ“ä½œæ•ˆç‡ä¼šæ¯”è¾ƒé«˜ï¼ˆåœ¨å†…å­˜é‡Œæ˜¯è¿ç€æ”¾çš„ï¼‰ã€‚</li><li>ç¼ºç‚¹ï¼šå› ä¸ºåœ°å€è¿ç»­ï¼ŒArrayList è¦ç§»åŠ¨æ•°æ®ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡æ¯”è¾ƒä½ã€‚</li></ul><h5 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h5><ul><li>ä¼˜ç‚¹ï¼šLinkedList åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œåœ°å€æ˜¯ä»»æ„çš„ï¼Œæ‰€ä»¥åœ¨å¼€è¾Ÿå†…å­˜ç©ºé—´çš„æ—¶å€™ä¸éœ€è¦ç­‰ä¸€ä¸ªè¿ç»­çš„åœ°å€ã€‚å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œ add å’Œ remove ï¼ŒLinedList æ¯”è¾ƒå ä¼˜åŠ¿ã€‚LinkedList é€‚ç”¨äºè¦å¤´å°¾æ“ä½œæˆ–æ’å…¥æŒ‡å®šä½ç½®çš„åœºæ™¯ã€‚</li><li>ç¼ºç‚¹ï¼šå› ä¸º LinkedList è¦ç§»åŠ¨æŒ‡é’ˆï¼Œæ‰€ä»¥æŸ¥è¯¢æ“ä½œæ€§èƒ½æ¯”è¾ƒä½ã€‚</li></ul><h5 id="é€‚ç”¨åœºæ™¯åˆ†æï¼š"><a href="#é€‚ç”¨åœºæ™¯åˆ†æï¼š" class="headerlink" title="é€‚ç”¨åœºæ™¯åˆ†æï¼š"></a>é€‚ç”¨åœºæ™¯åˆ†æï¼š</h5><ul><li>å½“éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¯¹éšæœºè®¿é—®çš„æƒ…å†µä¸‹ï¼Œé€‰ç”¨ ArrayList ã€‚</li><li>å½“éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤šæ¬¡å¢åŠ åˆ é™¤ä¿®æ”¹æ—¶ï¼Œé‡‡ç”¨ LinkedList ã€‚</li></ul><h4 id="ArrayList-æ˜¯å¦‚ä½•æ‰©å®¹çš„ï¼Ÿ"><a href="#ArrayList-æ˜¯å¦‚ä½•æ‰©å®¹çš„ï¼Ÿ" class="headerlink" title="ArrayList æ˜¯å¦‚ä½•æ‰©å®¹çš„ï¼Ÿ"></a>ArrayList æ˜¯å¦‚ä½•æ‰©å®¹çš„ï¼Ÿ</h4><p>å¦‚æœé€šè¿‡æ— å‚æ„é€ çš„è¯ï¼Œåˆå§‹æ•°ç»„å®¹é‡ä¸º 0 ï¼Œå½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ æ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚æ¯æ¬¡æŒ‰ç…§ 1.5 å€ï¼ˆä½è¿ç®—ï¼‰çš„æ¯”ç‡é€šè¿‡ copeOf çš„æ–¹å¼æ‰©å®¹ã€‚</p><h4 id="HashSet-å’Œ-TreeSet-çš„åŒºåˆ«ï¼Ÿ"><a href="#HashSet-å’Œ-TreeSet-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="HashSet å’Œ TreeSet çš„åŒºåˆ«ï¼Ÿ"></a>HashSet å’Œ TreeSet çš„åŒºåˆ«ï¼Ÿ</h4><ul><li>HashSetåº•å±‚ç”¨HashMapå®ç°çš„</li><li>TreeSetåº•å±‚ç”¨TreeMapå®ç°çš„</li></ul><h4 id="HashMap-å’Œ-TreeMap-çš„åŒºåˆ«ï¼Ÿ"><a href="#HashMap-å’Œ-TreeMap-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="HashMap å’Œ TreeMap çš„åŒºåˆ«ï¼Ÿ"></a>HashMap å’Œ TreeMap çš„åŒºåˆ«ï¼Ÿ</h4><ul><li>HashMapåº•å±‚å®ç°æ˜¯æ•°ç»„+é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ï¼ŒTreeMapåº•å±‚å®ç°æ˜¯çº¢é»‘æ ‘</li><li>Map ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ è¿™ç±»æ“ä½œï¼ŒHashMap æ¯”è¾ƒé€‚åˆ</li><li>å‡å¦‚ä½ éœ€è¦å¯¹ä¸€ä¸ªæœ‰åºçš„ key é›†åˆè¿›è¡Œéå†ï¼Œ TreeMap æ›´é€‚åˆã€‚</li></ul><h4 id="HashMap-å’Œ-ConcurrentHashMap-çš„åŒºåˆ«ï¼Ÿ"><a href="#HashMap-å’Œ-ConcurrentHashMap-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="HashMap å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ"></a>HashMap å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ</h4><p>ConcurrentHashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„ HashMap çš„å®ç°ã€‚</p><h3 id="HashMapåŸç†"><a href="#HashMapåŸç†" class="headerlink" title="HashMapåŸç†"></a>HashMapåŸç†</h3><p>æˆ‘ä»¬çŸ¥é“åœ¨ Java ä¸­æœ€å¸¸ç”¨çš„ä¸¤ç§ç»“æ„æ˜¯æ•°ç»„å’Œæ¨¡æ‹ŸæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥åˆ©ç”¨è¿™ä¸¤ç§æ¥ç»„åˆå®ç°ï¼ŒHashMap ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å®é™…ä¸Š HashMap æ˜¯ä¸€ä¸ª<strong>é“¾è¡¨æ•£åˆ—</strong>ã€‚</p><p>HashMap æ˜¯åŸºäº hashing çš„åŸç†ã€‚</p><p><img src="http://dl2.iteye.com/upload/attachment/0017/7479/3f05dd61-955e-3eb2-bf8e-31da8a361148.jpg" alt></p><h4 id="HashMap-çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯-2-çš„å¹‚æ¬¡æ–¹ï¼Ÿ"><a href="#HashMap-çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯-2-çš„å¹‚æ¬¡æ–¹ï¼Ÿ" class="headerlink" title="HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ"></a>HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h4><p>ä¸ºäº†èƒ½è®© HashMap å­˜å–é«˜æ•ˆï¼Œå°½é‡è¾ƒå°‘ç¢°æ’ï¼Œä¹Ÿå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ï¼Œæ¯ä¸ªé“¾è¡¨/çº¢é»‘æ ‘é•¿åº¦å¤§è‡´ç›¸åŒã€‚è¿™ä¸ªå®ç°å°±æ˜¯æŠŠæ•°æ®å­˜åˆ°å“ªä¸ªé“¾è¡¨/çº¢é»‘æ ‘ä¸­çš„ç®—æ³•ã€‚</p><p>è¿™ä¸ªç®—æ³•åº”è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿæˆ‘ä»¬é¦–å…ˆå¯èƒ½ä¼šæƒ³åˆ°é‡‡ç”¨ % å–ä½™çš„æ“ä½œæ¥å®ç°ã€‚ä½†æ˜¯ï¼Œé‡ç‚¹æ¥äº†ï¼š</p><ul><li>å–ä½™(%)æ“ä½œä¸­å¦‚æœé™¤æ•°æ˜¯ 2 çš„å¹‚æ¬¡åˆ™ç­‰ä»·äºä¸å…¶é™¤æ•°å‡ä¸€çš„ä¸(&amp;)æ“ä½œï¼ˆä¹Ÿå°±æ˜¯è¯´ <code>hash % length == hash &amp; (length - 1)</code> çš„å‰ææ˜¯ length æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼›ï¼‰ã€‚</li><li>å¹¶ä¸”ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &amp;ï¼Œç›¸å¯¹äº % èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œ<br>è¿™å°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯è¿­ä»£å™¨-Iterator-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è¿­ä»£å™¨-Iterator-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è¿­ä»£å™¨(Iterator)ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è¿­ä»£å™¨(Iterator)ï¼Ÿ</h3><p>Iterator æ¥å£ï¼Œæä¾›äº†å¾ˆå¤šå¯¹é›†åˆå…ƒç´ è¿›è¡Œè¿­ä»£çš„æ–¹æ³•ã€‚æ¯ä¸€ä¸ªé›†åˆç±»éƒ½åŒ…å«äº†å¯ä»¥è¿”å›è¿­ä»£å™¨å®ä¾‹çš„è¿­ä»£æ–¹æ³•ã€‚è¿­ä»£å™¨å¯ä»¥åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­åˆ é™¤åº•å±‚é›†åˆçš„å…ƒç´ ï¼Œä½†æ˜¯ä¸å¯ä»¥ç›´æ¥è°ƒç”¨é›†åˆçš„ <code>#remove(Object Obj)</code> æ–¹æ³•åˆ é™¤ï¼Œå¯ä»¥é€šè¿‡è¿­ä»£å™¨çš„ <code>#remove()</code> æ–¹æ³•åˆ é™¤ã€‚</p><h4 id="Iterator-å’Œ-ListIterator-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Iterator-å’Œ-ListIterator-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Iterator å’Œ ListIterator çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Iterator å’Œ ListIterator çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul><li>Iterator å¯ç”¨æ¥éå† Set å’Œ List é›†åˆï¼Œä½†æ˜¯ ListIterator åªèƒ½ç”¨æ¥éå† Listã€‚</li><li>Iterator å¯¹é›†åˆåªèƒ½æ˜¯å‰å‘éå†ï¼ŒListIterator æ—¢å¯ä»¥å‰å‘ä¹Ÿå¯ä»¥åå‘ã€‚</li><li>ListIterator å®ç°äº† Iterator æ¥å£ï¼Œå¹¶åŒ…å«å…¶ä»–çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼šå¢åŠ å…ƒç´ ï¼Œæ›¿æ¢å…ƒç´ ï¼Œè·å–å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ç­‰ç­‰ã€‚</li></ul><h4 id="å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰å’Œå®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰å’Œå®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰å’Œå®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰å’Œå®‰å…¨å¤±è´¥ï¼ˆfail-safeï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>å·®åˆ«åœ¨äº ConcurrentModification å¼‚å¸¸ï¼š</p><ul><li>å¿«é€Ÿå¤±è´¥ï¼šå½“ä½ åœ¨è¿­ä»£ä¸€ä¸ªé›†åˆçš„æ—¶å€™ï¼Œå¦‚æœæœ‰å¦ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ä¿®æ”¹ä½ æ­£åœ¨è®¿é—®çš„é‚£ä¸ªé›†åˆæ—¶ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ª ConcurrentModification å¼‚å¸¸ã€‚ åœ¨ <code>java.util</code> åŒ…ä¸‹çš„éƒ½æ˜¯å¿«é€Ÿå¤±è´¥ã€‚</li><li>å®‰å…¨å¤±è´¥ï¼šä½ åœ¨è¿­ä»£çš„æ—¶å€™ä¼šå»åº•å±‚é›†åˆåšä¸€ä¸ªæ‹·è´ï¼Œæ‰€ä»¥ä½ åœ¨ä¿®æ”¹ä¸Šå±‚é›†åˆçš„æ—¶å€™æ˜¯ä¸ä¼šå—å½±å“çš„ï¼Œä¸ä¼šæŠ›å‡º <code>ConcurrentModification</code> å¼‚å¸¸ã€‚åœ¨ <code>java.util.concurrent</code> åŒ…ä¸‹çš„å…¨æ˜¯å®‰å…¨å¤±è´¥çš„ã€‚</li></ul><h4 id="å¦‚ä½•åˆ é™¤-List-ä¸­çš„æŸä¸ªå…ƒç´ ï¼Ÿ"><a href="#å¦‚ä½•åˆ é™¤-List-ä¸­çš„æŸä¸ªå…ƒç´ ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ é™¤ List ä¸­çš„æŸä¸ªå…ƒç´ ï¼Ÿ"></a>å¦‚ä½•åˆ é™¤ List ä¸­çš„æŸä¸ªå…ƒç´ ï¼Ÿ</h4><p>æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼Œä½¿ç”¨ Iterator ï¼Œé¡ºåºå‘ä¸‹ï¼Œå¦‚æœæ‰¾åˆ°å…ƒç´ ï¼Œåˆ™ä½¿ç”¨ remove æ–¹æ³•è¿›è¡Œç§»é™¤ã€‚</li><li>æ–¹å¼äºŒï¼Œå€’åºéå† List ï¼Œå¦‚æœæ‰¾åˆ°å…ƒç´ ï¼Œåˆ™ä½¿ç”¨ remove æ–¹æ³•è¿›è¡Œç§»é™¤ã€‚</li></ul><h3 id="Comparable-å’Œ-Comparator-çš„åŒºåˆ«"><a href="#Comparable-å’Œ-Comparator-çš„åŒºåˆ«" class="headerlink" title="Comparable å’Œ Comparator çš„åŒºåˆ«?"></a>Comparable å’Œ Comparator çš„åŒºåˆ«?</h3><ul><li>Comparable æ¥å£ï¼Œ<code>åœ¨ java.lang</code> åŒ…ä¸‹ï¼Œç”¨äºå½“å‰å¯¹è±¡å’Œå…¶å®ƒå¯¹è±¡çš„æ¯”è¾ƒï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ª <code>#compareTo(Object obj)</code> æ–¹æ³•ç”¨æ¥æ’åºï¼Œè¯¥æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ã€‚</li><li>Comparator æ¥å£ï¼Œåœ¨ <code>java.util</code> åŒ…ä¸‹ï¼Œç”¨äºä¼ å…¥çš„ä¸¤ä¸ªå¯¹è±¡çš„æ¯”è¾ƒï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ª <code>#compare(Object obj1, Object obj2)</code> æ–¹æ³•ç”¨æ¥æ’åºï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜œé¢è¯•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaé›†åˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å‡†å¤‡ç³»åˆ—ä¹‹JavaåŸºç¡€</title>
      <link href="/2019/09/24/interview-java-basic/"/>
      <url>/2019/09/24/interview-java-basic/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ</h3><p><strong>é¢å‘è¿‡ç¨‹</strong>æ˜¯åˆ†æå‡ºå®ç°éœ€æ±‚æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œé€šè¿‡å‡½æ•°ä¸€æ­¥ä¸€æ­¥å®ç°è¿™äº›æ­¥éª¤ï¼Œç„¶åä¾æ¬¡è°ƒç”¨ã€‚<strong>å°†å®ç°æ­¥éª¤åŒ–</strong>ã€‚</p><p><strong>é¢å‘å¯¹è±¡</strong>æ˜¯æŠŠæ•´ä¸ªéœ€æ±‚æŒ‰ç…§ç‰¹ç‚¹ã€åŠŸèƒ½åˆ’åˆ†ï¼Œå°†è¿™äº›å­˜åœ¨å…±æ€§çš„éƒ¨åˆ†å°è£…æˆå¯¹è±¡ã€‚åˆ›å»ºå¯¹è±¡ä¸æ˜¯ä¸ºäº†å®ŒæˆæŸä¸€ä¸ªæ­¥éª¤ï¼Œè€Œæ˜¯æè¿°æŸä¸ªäº‹ç‰©åœ¨è§£å†³é—®é¢˜ä¸­çš„è¡Œæ–‡ã€‚<strong>å°†å®ç°è¡Œä¸ºåŒ–</strong>ã€‚</p><h4 id="é¢å‘å¯¹è±¡çš„ç‰¹å¾"><a href="#é¢å‘å¯¹è±¡çš„ç‰¹å¾" class="headerlink" title="é¢å‘å¯¹è±¡çš„ç‰¹å¾"></a>é¢å‘å¯¹è±¡çš„ç‰¹å¾</h4><ul><li>å°è£…ï¼šéšè—å¯¹è±¡å†…éƒ¨çš„ç‰¹æ€§å’Œè¡Œä¸ºã€‚</li><li>ç»§æ‰¿ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»çš„ç‰¹æ€§å’Œè¡Œä¸ºã€‚</li><li>å¤šæ€ï¼šä¸åŒç±»çš„å¯¹è±¡ï¼Œå¯¹åŒä¸€æ¶ˆæ¯ï¼Œåšå‡ºä¸åŒå“åº”ã€‚</li><li>æŠ½è±¡ï¼šæŠŠä¸€ç±»äº‹ç‰©å…±æœ‰çš„å±æ€§å’Œè¡Œä¸ºæå‡ºæ¥ï¼Œå½¢æˆä¸€ä¸ªæ¨¡æ¿ã€‚</li></ul><h4 id="é‡è½½å’Œé‡å†™çš„åŒºåˆ«"><a href="#é‡è½½å’Œé‡å†™çš„åŒºåˆ«" class="headerlink" title="é‡è½½å’Œé‡å†™çš„åŒºåˆ«"></a>é‡è½½å’Œé‡å†™çš„åŒºåˆ«</h4><ul><li>é‡å†™ override<ul><li>æ–¹æ³•åã€å‚æ•°ã€è¿”å›å€¼ç›¸åŒ</li><li>æ–¹æ³•è¢«å®šä¹‰ä¸ºfinal ä¸èƒ½è¢«é‡å†™</li><li>å­˜åœ¨äºçˆ¶ç±»å’Œå­ç±»ä¹‹é—´</li></ul></li><li>é‡è½½ overload<ul><li>å‚æ•°ç±»å‹ã€ä¸ªæ•°ã€é¡ºåºè‡³å°‘æœ‰ä¸€ä¸ªä¸åŒ</li><li>ä¸èƒ½é‡è½½åªæœ‰è¿”å›å€¼ä¸åŒçš„æ–¹æ³•å</li><li>å­˜åœ¨äºçˆ¶ç±»å’Œå­ç±»ã€åŒç±»ä¸­</li></ul></li></ul><a id="more"></a><h4 id="ä»€ä¹ˆæ˜¯å­—èŠ‚ç "><a href="#ä»€ä¹ˆæ˜¯å­—èŠ‚ç " class="headerlink" title="ä»€ä¹ˆæ˜¯å­—èŠ‚ç "></a>ä»€ä¹ˆæ˜¯å­—èŠ‚ç </h4><blockquote><p>è¡ç”Ÿé—®é¢˜ï¼ŒJava æ˜¯ç¼–è¯‘æ‰§è¡Œçš„è¯­è¨€ï¼Œè¿˜æ˜¯è§£é‡Šæ‰§è¡Œçš„è¯­è¨€ã€‚</p></blockquote><ul><li>ç¼–è¯‘å‹è¯­è¨€ï¼šåœ¨è¢«æ‰§è¡Œä¹‹å‰éœ€è¦ä¸€ä¸ªä¸“é—¨çš„ç¼–è¯‘è¿‡ç¨‹ï¼ŒæŠŠç¨‹åºç¼–è¯‘ä¸ºæœºå™¨è¯­è¨€çš„æ–‡ä»¶ï¼Œæ¯”å¦‚windowsä¸‹çš„exeæ–‡ä»¶ã€‚ä¸‹æ¬¡ä¸éœ€è¦å†ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥åœ¨æœºå™¨ä¸Šè¿è¡Œã€‚æ•ˆç‡æ¯”è¾ƒé«˜ã€‚ç¼–è¯‘å‹è¯­è¨€æœ‰Cã€C++ç­‰ã€‚</li><li>è§£é‡Šå‹è¯­è¨€ï¼šä¸éœ€è¦ç¼–è¯‘ã€‚åœ¨è¿è¡Œæ—¶ç¿»è¯‘æˆæœºå™¨è¯†åˆ«çš„æœºå™¨è¯­è¨€ã€‚æ¯æ¬¡æ‰§è¡Œéƒ½éœ€è¦ä¸€æ¬¡ç¿»è¯‘çš„è¿‡ç¨‹ã€‚æ•ˆç‡æ¯”è¾ƒä½ã€‚è§£é‡Šå‹è¯­è¨€æœ‰C#ã€Pythonç­‰ã€‚</li></ul><p>Javaä¸­å¼•å…¥è™šæ‹Ÿæœºçš„æ¦‚å¿µï¼Œå³åœ¨æœºå™¨å’Œç¼–è¯‘ç¨‹åºä¹‹é—´åŠ å…¥äº†ä¸€å±‚æŠ½è±¡çš„è™šæ‹Ÿçš„æœºå™¨ã€‚è¿™å°è™šæ‹Ÿçš„æœºå™¨åœ¨ä»»ä½•å¹³å°ä¸Šéƒ½æä¾›ç»™ç¼–è¯‘ç¨‹åºä¸€ä¸ªå…±åŒçš„æ¥å£ã€‚</p><p>ç¼–è¯‘ç¨‹åºåªéœ€è¦é¢å‘è™šæ‹Ÿæœºï¼Œç”Ÿæˆè™šæ‹Ÿæœºèƒ½å¤Ÿç†è§£çš„ä»£ç ï¼Œç„¶åç”±è§£é‡Šå™¨æ¥å°†è™šæ‹Ÿæœºè½¬åŒ–ä¸ºç‰¹å®šç³»ç»Ÿçš„æœºå™¨ç æ‰§è¡Œã€‚åœ¨Javaä¸­è¿™ç§è™šæ‹Ÿæœºç†è§£çš„ä»£ç å«åš<strong>å­—èŠ‚ç ï¼ˆå³æ‰©å±•åä¸º.classçš„æ–‡ä»¶ï¼‰</strong>ï¼Œå®ƒä¸é¢å‘ä»»ä½•çš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚</p><p>æ¯ä¸€ç§å¹³å°çš„è§£é‡Šå™¨æ˜¯ä¸åŒçš„ã€‚ä½†æ˜¯å®ç°çš„è™šæ‹Ÿæœºæ˜¯ç›¸åŒçš„ã€‚Javaæºç¨‹åºç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘åç¼–ç¨‹å­—èŠ‚ç ï¼Œå­—èŠ‚ç ç”±è™šæ‹Ÿæœºè§£é‡Šå™¨æ‰§è¡Œï¼Œè™šæ‹Ÿæœºå°†æ¯ä¸€æ¡è¦æ‰§è¡Œçš„å­—èŠ‚ç é€ç»™è§£é‡Šå™¨ï¼Œè§£é‡Šå™¨å°†å…¶ç¿»è¯‘æˆç‰¹å®šæœºå™¨ä¸Šçš„æœºå™¨ç ï¼Œç„¶ååœ¨ç‰¹å®šçš„æœºå™¨ä¸Šè¿è¡Œã€‚<strong>è¿™ä¹Ÿå°±è§£é‡Šäº†Javaçš„ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜çš„ç‰¹ç‚¹ã€‚</strong></p><h3 id="ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†è£…ç®±"><a href="#ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†è£…ç®±" class="headerlink" title="ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†è£…ç®±"></a>ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†è£…ç®±</h3><p>è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Œå°±æ˜¯åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚</p><ul><li>ä¸ºäº†è®©ä»£ç ç®€ç»ƒï¼ŒJava5 å¼•å…¥äº†å…·æœ‰åœ¨åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹è‡ªåŠ¨è½¬æ¢çš„è£…ç®±å’Œæ‹†ç®±æœºåˆ¶ã€‚</li></ul><h3 id="å¯¹Object-å¯¹è±¡ä¸­-hashCode-å’Œ-equals-æ–¹æ³•çš„ç†è§£"><a href="#å¯¹Object-å¯¹è±¡ä¸­-hashCode-å’Œ-equals-æ–¹æ³•çš„ç†è§£" class="headerlink" title="å¯¹Object å¯¹è±¡ä¸­ hashCode å’Œ equals æ–¹æ³•çš„ç†è§£"></a>å¯¹Object å¯¹è±¡ä¸­ hashCode å’Œ equals æ–¹æ³•çš„ç†è§£</h3><ul><li>equals æ–¹æ³•ï¼Œç”¨äºæ¯”è¾ƒå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚å½“å­ç±»è¦†ç›–äº† equals æ–¹æ³•æ—¶ï¼Œæ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰å°†é€šè¿‡è¦†ç›–åçš„ equals æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼ˆåˆ¤æ–­å¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼‰ã€‚</li><li>hashCode æ–¹æ³•ï¼Œå¤§å¤šåœ¨é›†åˆä¸­ç”¨åˆ°ã€‚å¦‚æœé‡å†™äº† equals æ–¹æ³•ï¼Œå°±å¿…é¡»é‡å†™ hashCode æ–¹æ³•ï¼Œå¦åˆ™å°±ä¼šé™ä½ Map ç­‰é›†åˆçš„ç´¢å¼•é€Ÿåº¦ã€‚</li></ul><p>hashCode æ–¹æ³•çš„é‡å†™ï¼Œå¯ä»¥çœ‹çœ‹ <a href="https://segmentfault.com/a/1190000010799123" target="_blank" rel="noopener">ã€Šç§‘æ™®ï¼šä¸ºä»€ä¹ˆ String hashCode æ–¹æ³•é€‰æ‹©æ•°å­—31ä½œä¸ºä¹˜å­ã€‹</a>æ–¹æ³•ã€‚</p><h3 id="è®²è®²ç±»çš„å®ä¾‹åŒ–é¡ºåº"><a href="#è®²è®²ç±»çš„å®ä¾‹åŒ–é¡ºåº" class="headerlink" title="è®²è®²ç±»çš„å®ä¾‹åŒ–é¡ºåº"></a>è®²è®²ç±»çš„å®ä¾‹åŒ–é¡ºåº</h3><p>åˆå§‹åŒ–é¡ºåºå¦‚ä¸‹ï¼š</p><ul><li>çˆ¶ç±»é™æ€å˜é‡</li><li>çˆ¶ç±»é™æ€ä»£ç å—</li><li>å­ç±»é™æ€å˜é‡ã€</li><li>å­ç±»é™æ€ä»£ç å—</li><li>çˆ¶ç±»éé™æ€å˜é‡ï¼ˆçˆ¶ç±»å®ä¾‹æˆå‘˜å˜é‡ï¼‰</li><li>çˆ¶ç±»æ„é€ å‡½æ•°</li><li>å­ç±»éé™æ€å˜é‡ï¼ˆå­ç±»å®ä¾‹æˆå‘˜å˜é‡ï¼‰</li><li>å­ç±»æ„é€ å‡½æ•°</li></ul><h3 id="Java-IO"><a href="#Java-IO" class="headerlink" title="Java IO"></a>Java IO</h3><p>Java IO ç›¸å…³çš„ç±»åœ¨<code>java.io</code>åŒ…ä¸‹ï¼Œå…·ä½“æ“ä½œåˆ†æˆé¢å‘å­—èŠ‚ï¼ˆByteï¼‰å’Œé¢å‘å­—ç¬¦ï¼ˆCharacterï¼‰ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/images/java-io.png" alt></p><h4 id="Javaæä¾›äº†å“ªäº›IOæ–¹å¼ï¼Ÿ-NIOå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨ï¼Ÿ"><a href="#Javaæä¾›äº†å“ªäº›IOæ–¹å¼ï¼Ÿ-NIOå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨ï¼Ÿ" class="headerlink" title="Javaæä¾›äº†å“ªäº›IOæ–¹å¼ï¼Ÿ NIOå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨ï¼Ÿ"></a>Javaæä¾›äº†å“ªäº›IOæ–¹å¼ï¼Ÿ NIOå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨ï¼Ÿ</h4><p>é¦–å…ˆï¼Œä¼ ç»Ÿçš„ <code>java.io</code> åŒ…ï¼Œå®ƒåŸºäºæµæ¨¡å‹å®ç°ï¼Œæä¾›äº†æˆ‘ä»¬æœ€ç†ŸçŸ¥çš„ä¸€äº› IO åŠŸèƒ½ï¼Œæ¯”å¦‚ File æŠ½è±¡ã€è¾“å…¥è¾“å‡ºæµç­‰ã€‚äº¤äº’æ–¹å¼æ˜¯åŒæ­¥ã€é˜»å¡çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¯»å–è¾“å…¥æµæˆ–è€…å†™å…¥è¾“å‡ºæµæ—¶ï¼Œåœ¨è¯»ã€å†™åŠ¨ä½œå®Œæˆä¹‹å‰ï¼Œçº¿ç¨‹ä¼šä¸€ç›´é˜»å¡åœ¨é‚£é‡Œï¼Œå®ƒä»¬ä¹‹é—´çš„è°ƒç”¨æ˜¯å¯é çš„çº¿æ€§é¡ºåºã€‚</p><p><code>java.io</code> åŒ…çš„å¥½å¤„æ˜¯ä»£ç æ¯”è¾ƒç®€å•ã€ç›´è§‚ï¼Œç¼ºç‚¹åˆ™æ˜¯ IO æ•ˆç‡å’Œæ‰©å±•æ€§å­˜åœ¨å±€é™æ€§ï¼Œå®¹æ˜“æˆä¸ºåº”ç”¨æ€§èƒ½çš„ç“¶é¢ˆã€‚</p><p>å¾ˆå¤šæ—¶å€™ï¼Œäººä»¬ä¹ŸæŠŠ <code>java.net</code> ä¸‹é¢æä¾›çš„éƒ¨åˆ†ç½‘ç»œ APIï¼Œæ¯”å¦‚ Socketã€ServerSocketã€HttpURLConnection ä¹Ÿå½’ç±»åˆ°åŒæ­¥é˜»å¡ IO ç±»åº“ï¼Œå› ä¸ºç½‘ç»œé€šä¿¡åŒæ ·æ˜¯ IO è¡Œä¸ºã€‚</p><p>ç¬¬äºŒï¼Œåœ¨ Java  1.4 ä¸­å¼•å…¥äº† NIO æ¡†æ¶ï¼ˆ<code>java.nio</code> åŒ…ï¼‰ï¼Œæä¾›äº† Channelã€Selectorã€Buffer ç­‰æ–°çš„æŠ½è±¡ï¼Œå¯ä»¥æ„å»ºå¤šè·¯å¤ç”¨çš„ã€åŒæ­¥éé˜»å¡ IO ç¨‹åºï¼ŒåŒæ—¶æä¾›äº†æ›´æ¥è¿‘æ“ä½œç³»ç»Ÿåº•å±‚çš„é«˜æ€§èƒ½æ•°æ®æ“ä½œæ–¹å¼ã€‚</p><p>ç¬¬ä¸‰ï¼Œåœ¨ Java 7 ä¸­ï¼ŒNIO æœ‰äº†è¿›ä¸€æ­¥çš„æ”¹è¿›ï¼Œä¹Ÿå°±æ˜¯ NIO 2ï¼Œå¼•å…¥äº†å¼‚æ­¥éé˜»å¡ IO æ–¹å¼ï¼Œä¹Ÿæœ‰å¾ˆå¤šäººå«å®ƒ AIOï¼ˆAsynchronous IOï¼‰ã€‚å¼‚æ­¥ IO æ“ä½œåŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œåº”ç”¨æ“ä½œç›´æ¥è¿”å›ï¼Œè€Œä¸ä¼šé˜»å¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çº¿ç¨‹è¿›è¡Œåç»­å·¥ä½œã€‚</p><h3 id="Errorå’ŒExceptionåŒºåˆ«"><a href="#Errorå’ŒExceptionåŒºåˆ«" class="headerlink" title="Errorå’ŒExceptionåŒºåˆ«"></a>Errorå’ŒExceptionåŒºåˆ«</h3><ul><li>Errorï¼ˆé”™è¯¯ï¼‰ï¼Œè¡¨ç¤ºç³»ç»Ÿçº§çš„é”™è¯¯å’Œç¨‹åºä¸å¿…å¤„ç†çš„å¼‚å¸¸ï¼Œæ˜¯ Java è¿è¡Œç¯å¢ƒä¸­çš„å†…éƒ¨é”™è¯¯æˆ–è€…ç¡¬ä»¶é—®é¢˜ã€‚<ul><li>ä¾‹å¦‚ï¼šå†…å­˜èµ„æºä¸è¶³ç­‰ã€‚</li><li>å¯¹äºè¿™ç§é”™è¯¯ï¼Œç¨‹åºåŸºæœ¬æ— èƒ½ä¸ºåŠ›ï¼Œé™¤äº†é€€å‡ºè¿è¡Œå¤–åˆ«æ— é€‰æ‹©ï¼Œå®ƒæ˜¯ç”± Java è™šæ‹ŸæœºæŠ›å‡ºçš„ã€‚</li></ul></li><li>Exceptionï¼ˆå¼‚å¸¸ï¼‰ï¼Œè¡¨ç¤ºéœ€è¦æ•æ‰æˆ–è€…éœ€è¦ç¨‹åºè¿›è¡Œå¤„ç†çš„å¼‚å¸¸ï¼Œå®ƒå¤„ç†çš„æ˜¯å› ä¸ºç¨‹åºè®¾è®¡çš„ç‘•ç–µè€Œå¼•èµ·çš„é—®é¢˜æˆ–è€…åœ¨å¤–çš„è¾“å…¥ç­‰å¼•èµ·çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œæ˜¯ç¨‹åºå¿…é¡»å¤„ç†çš„ã€‚Exception åˆåˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå—æ£€æŸ¥å¼‚å¸¸ã€‚<ul><li>RuntimeException(è¿è¡Œæ—¶å¼‚å¸¸)ï¼Œè¡¨ç¤ºæ— æ³•è®©ç¨‹åºæ¢å¤çš„å¼‚å¸¸ï¼Œå¯¼è‡´çš„åŸå› é€šå¸¸æ˜¯å› ä¸ºæ‰§è¡Œäº†é”™è¯¯çš„æ“ä½œï¼Œå»ºè®®ç»ˆæ­¢é€»è¾‘ï¼Œå› æ­¤ï¼Œç¼–è¯‘å™¨ä¸æ£€æŸ¥è¿™äº›å¼‚å¸¸ã€‚</li><li>CheckedException(å—æ£€æŸ¥å¼‚å¸¸)ï¼Œæ˜¯è¡¨ç¤ºç¨‹åºå¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œä¹Ÿå³è¡¨ç¤ºç¨‹åºå¯ä»¥ä¿®å¤ï¼ˆç”±ç¨‹åºè‡ªå·±æ¥å—å¼‚å¸¸å¹¶ä¸”åšå‡ºå¤„ç†ï¼‰ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºå—æ£€æŸ¥å¼‚å¸¸ã€‚</li></ul></li></ul><p><img src="https://static001.geekbang.org/resource/image/ac/00/accba531a365e6ae39614ebfa3273900.png" alt></p><h3 id="åå°„çš„ç”¨é€”ä»¥åŠå®ç°"><a href="#åå°„çš„ç”¨é€”ä»¥åŠå®ç°" class="headerlink" title="åå°„çš„ç”¨é€”ä»¥åŠå®ç°"></a>åå°„çš„ç”¨é€”ä»¥åŠå®ç°</h3><p>åå°„ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>åœ¨è¿è¡Œæ—¶æ„é€ ä¸€ä¸ªç±»çš„å¯¹è±¡</li><li>è°ƒç”¨ç±»çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</li><li>ç”ŸæˆåŠ¨æ€ä»£ç†</li></ul><h4 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ</h4><p>åŠ¨æ€ä»£ç†æ˜¯è®¾è®¡æ¨¡å¼ä¸­ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªåˆ†ç±»ã€‚ä»£ç†æ¨¡å¼åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚</p><p>è¯¦ç»†ä»‹ç»ä½ å¯ä»¥çœ‹è¿™ç¯‡<a href="https://iisheng.cn/2019/08/14/proxy-pattern/">è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</a></p><h3 id="Javaå¯¹è±¡åˆ›å»ºçš„æ–¹å¼"><a href="#Javaå¯¹è±¡åˆ›å»ºçš„æ–¹å¼" class="headerlink" title="Javaå¯¹è±¡åˆ›å»ºçš„æ–¹å¼"></a>Javaå¯¹è±¡åˆ›å»ºçš„æ–¹å¼</h3><ol><li>ä½¿ç”¨<code>new</code>å…³é”®å­—åˆ›å»ºå¯¹è±¡</li><li>ä½¿ç”¨<code>Class</code>ç±»çš„<code>newIntance</code>æ–¹æ³•ï¼ˆåå°„æœºåˆ¶ï¼‰</li><li>ä½¿ç”¨ <code>Constructor</code> ç±»çš„ <code>newInstance</code> æ–¹æ³•(åå°„æœºåˆ¶)ã€‚</li><li>ä½¿ç”¨ clone æ–¹æ³•åˆ›å»ºå¯¹è±¡ã€‚</li><li>ä½¿ç”¨(å)åºåˆ—åŒ–æœºåˆ¶åˆ›å»ºå¯¹è±¡ã€‚</li></ol><h3 id="å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨ï¼ˆå¹»è±¡å¼•ç”¨ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨ï¼ˆå¹»è±¡å¼•ç”¨ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨ï¼ˆå¹»è±¡å¼•ç”¨ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>å¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨ï¼ˆå¹»è±¡å¼•ç”¨ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ä¸åŒçš„å¼•ç”¨ç±»å‹ï¼Œä¸»è¦æç°çš„æ˜¯å¯¹è±¡ä¸åŒçš„å¯è¾¾æ€§ï¼ˆreachableï¼‰çŠ¶æ€å’Œå¯¹åƒåœ¾æ”¶é›†çš„å½±å“ã€‚</p><ul><li><p>å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰<br>æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„æ™®é€šå¯¹è±¡å¼•ç”¨ï¼Œåªè¦è¿˜æœ‰å¼ºå¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå°±èƒ½è¡¨æ˜å¯¹è±¡è¿˜â€œæ´»ç€â€ï¼Œåƒåœ¾æ”¶é›†å™¨ä¸ä¼šç¢°è¿™ç§å¯¹è±¡ã€‚å¯¹äºä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¼•ç”¨å…³ç³»ï¼Œåªè¦è¶…è¿‡äº†å¼•ç”¨çš„ä½œç”¨åŸŸæˆ–è€…æ˜¾å¼çš„å°†å¯¹åº”ï¼ˆå¼ºï¼‰å¼•ç”¨èµ‹å€¼ä¸ºnullï¼Œå°±æ˜¯å¯ä»¥è¢«åƒåœ¾æ”¶é›†çš„äº†ï¼Œå½“ç„¶å…·ä½“å›æ”¶æ—¶æœºè¿˜æ˜¯è¦çœ‹åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚</p></li><li><p>è½¯å¼•ç”¨ï¼ˆSort Referenceï¼‰<br>æ˜¯ä¸€ç§ç›¸å¯¹å¼ºå¼•ç”¨å¼±åŒ–ä¸€äº›çš„å¼•ç”¨ï¼Œå¯ä»¥è®©å¯¹è±¡è±å…ä¸€äº›åƒåœ¾æ”¶é›†ã€‚åªæœ‰å½“JVMè®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚JVMä¼šç¡®ä¿åœ¨æŠ›å‡ºOutOfMemoryErrorä¹‹å‰ï¼Œæ¸…ç†è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚è½¯å¼•ç”¨é€šå¸¸ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜ï¼Œå¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚</p></li><li><p>å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰<br>å¹¶ä¸èƒ½ä½¿å¯¹è±¡è±å…åƒåœ¾æ”¶é›†ï¼Œä»…ä»…æ˜¯æä¾›ä¸€ç§åœ¨å¼±å¼•ç”¨çŠ¶æ€ä¸‹å¯¹è±¡çš„è®¿é—®é€”å¾„ã€‚è¿™å°±å¯ä»¥ç”¨æ¥æ„å»ºä¸€ç§æ²¡æœ‰ç‰¹å®šçº¦æŸçš„å…³ç³»ï¼Œæ¯”å¦‚ï¼Œç»´æŠ¤ä¸€ç§éå¼ºåˆ¶æ€§çš„æ˜ å°„å…³ç³»ï¼Œå¦‚æœè¯•å›¾è·å–æ—¶å¯¹è±¡è¿˜åœ¨ï¼Œå°±ä½¿ç”¨å®ƒï¼Œå¦åˆ™é‡æ–°å®ä¾‹åŒ–ã€‚å®ƒåŒæ ·æ˜¯å¾ˆå¤šç¼“å­˜å®ç°çš„é€‰æ‹©ã€‚</p></li><li><p>è™šå¼•ç”¨ï¼Œä¹Ÿå«å¹»è±¡å¼•ç”¨<br>ä½ ä¸èƒ½é€šè¿‡å®ƒè®¿é—®å¯¹è±¡ã€‚è™šå¼•ç”¨ä»…ä»…æ˜¯æä¾›ä¸€ç§ç¡®ä¿å¯¹è±¡è¢«finalizeä»¥åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºæ™ºï¼Œæ¯”å¦‚ï¼Œé€šå¸¸ç”¨æ¥åšæ‰€è°“çš„Post-Mortemæ¸…ç†æœºæ™ºï¼Œä¹Ÿæœ‰äººåˆ©ç”¨è™šå¼•ç”¨ç›‘æ§å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜œé¢è¯•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨ç®—æ³•æ€»ç»“ä¹‹è´ªå¿ƒç®—æ³•</title>
      <link href="/2019/09/17/greedy/"/>
      <url>/2019/09/17/greedy/</url>
      
        <content type="html"><![CDATA[<h3 id="è´ªå¿ƒç®—æ³•æ€æƒ³"><a href="#è´ªå¿ƒç®—æ³•æ€æƒ³" class="headerlink" title="è´ªå¿ƒç®—æ³•æ€æƒ³"></a>è´ªå¿ƒç®—æ³•æ€æƒ³</h3><p><strong>è´ªå¿ƒç®—æ³•</strong>å°±æ˜¯è¿™æ ·çš„ç®—æ³•ï¼Œå®ƒåœ¨æ¯ä¸€æ­¥éƒ½åšå‡ºå½“æ—¶çœ‹èµ·æ¥æœ€ä½³çš„é€‰æ‹©ã€‚ä¹Ÿå°±æ˜¯è¯´<strong>å®ƒæ€»æ˜¯åšå‡ºå±€éƒ¨æœ€ä¼˜çš„é€‰æ‹©ï¼Œå¯„å¸Œæœ›è¿™æ ·çš„é€‰æ‹©å¯¼è‡´å…¨å±€æœ€ä¼˜è§£ã€‚</strong></p><blockquote><p>è´ªå¿ƒç®—æ³•å¹¶ä¸ä¿è¯å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†å¾ˆå¤šé—®é¢˜ç¡®å®å¯ä»¥æ±‚å¾—æœ€ä¼˜è§£ã€‚</p></blockquote><h3 id="æˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ­¥éª¤è®¾è®¡è´ªå¿ƒç®—æ³•ï¼š"><a href="#æˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ­¥éª¤è®¾è®¡è´ªå¿ƒç®—æ³•ï¼š" class="headerlink" title="æˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ­¥éª¤è®¾è®¡è´ªå¿ƒç®—æ³•ï¼š"></a>æˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ­¥éª¤è®¾è®¡è´ªå¿ƒç®—æ³•ï¼š</h3><ol><li>å°†æœ€ä¼˜åŒ–é—®é¢˜è½¬åŒ–ä¸ºè¿™æ ·çš„å½¢å¼ï¼šå¯¹å…¶åšå‡ºä¸€æ¬¡é€‰æ‹©åï¼Œåªå‰©ä¸‹ä¸€ä¸ªå­é—®é¢˜éœ€è¦æ±‚è§£ã€‚</li><li>è¯æ˜åšå‡ºè´ªå¿ƒé€‰æ‹©åï¼ŒåŸé—®é¢˜æ€»æ˜¯å­˜åœ¨æœ€ä¼˜è§£ï¼Œå³è´ªå¿ƒé€‰æ‹©æ€»æ˜¯å®‰å…¨çš„ã€‚</li><li>è¯æ˜åšå‡ºé€‰æ‹©åï¼Œå‰©ä½™çš„å­é—®é¢˜æ»¡è¶³æ€§è´¨ï¼šå…¶æœ€ä¼˜è§£ä¸è´ªå¿ƒé€‰æ‹©ç»„åˆå³å¯å¾—åˆ°åŸé—®é¢˜çš„æœ€ä¼˜è§£ï¼Œè¿™æ ·å°±å¾—åˆ°äº†æœ€ä¼˜å­ç»“æ„ã€‚</li></ol><a id="more"></a><h3 id="è´ªå¿ƒç®—æ³•ä¸åŠ¨æ€è§„åˆ’çš„åŒºåˆ«"><a href="#è´ªå¿ƒç®—æ³•ä¸åŠ¨æ€è§„åˆ’çš„åŒºåˆ«" class="headerlink" title="è´ªå¿ƒç®—æ³•ä¸åŠ¨æ€è§„åˆ’çš„åŒºåˆ«"></a>è´ªå¿ƒç®—æ³•ä¸åŠ¨æ€è§„åˆ’çš„åŒºåˆ«</h3><h4 id="0-1èƒŒåŒ…é—®é¢˜"><a href="#0-1èƒŒåŒ…é—®é¢˜" class="headerlink" title="0-1èƒŒåŒ…é—®é¢˜"></a>0-1èƒŒåŒ…é—®é¢˜</h4><p>ä¸€ä¸ªæ­£åœ¨æŠ¢åŠ«å•†åº—çš„å°å·ï¼Œå‘ç°äº†nä¸ªå•†å“ï¼Œç¬¬iä¸ªå•†å“ä»·å€¼v<sub>i</sub>ç¾å…ƒï¼Œé‡w<sub>i</sub>ç£…ï¼Œv<sub>i</sub>å’Œw<sub>i</sub>éƒ½æ˜¯æ•´æ•°ã€‚è¿™ä¸ªå°å·å¸Œæœ›æ‹¿èµ°ä»·å€¼å°½é‡é«˜çš„å•†å“ï¼Œä½†ä»–çš„èƒŒåŒ…æœ€å¤šèƒ½å®¹çº³Wç£…é‡çš„å•†å“ï¼ŒWæ˜¯ä¸€ä¸ªæ•´æ•°ã€‚ä»–åº”è¯¥æ‹¿å“ªäº›å•†å“ï¼Ÿï¼ˆæˆ‘ä»¬ç§°è¿™ä¸ªé—®é¢˜ä¸º0-1èƒŒåŒ…é—®é¢˜ï¼Œå› ä¸ºå¯¹æ¯ä¸ªå•†å“ï¼Œå°å·è¦ä¹ˆæŠŠä»–å®Œæ•´æ‹¿èµ°ï¼Œè¦ä¹ˆæŠŠä»–ç•™ä¸‹ï¼›ä»–ä¸èƒ½åªæ‹¿èµ°å•†å“çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…æŠŠä¸€ä¸ªå•†å“æ‹¿èµ°å¤šæ¬¡ã€‚ï¼‰</p><h4 id="åˆ†æ•°èƒŒåŒ…é—®é¢˜"><a href="#åˆ†æ•°èƒŒåŒ…é—®é¢˜" class="headerlink" title="åˆ†æ•°èƒŒåŒ…é—®é¢˜"></a>åˆ†æ•°èƒŒåŒ…é—®é¢˜</h4><p>è®¾å®šä¸0-1èƒŒåŒ…é—®é¢˜ä¸€æ ·çš„ï¼Œä½†å¯¹æ¯ä¸ªå•†å“ï¼Œå°å·å¯ä»¥æ‹¿èµ°å…¶ä¸€éƒ¨åˆ†ã€‚ä½ å¯ä»¥å°†0-1èƒŒåŒ…ä¸­çš„å•†å“æƒ³è±¡ä¸ºé‡‘é”­ï¼Œè€Œåˆ†æ•°èƒŒåŒ…é—®é¢˜ä¸­çš„å•†å“æ›´åƒé‡‘ç ‚ã€‚</p><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>æˆ‘ä»¬å¯ä»¥ç”¨<strong>è´ªå¿ƒç­–ç•¥è§£å†³åˆ†æ•°èƒŒåŒ…é—®é¢˜</strong>ã€‚æˆ‘ä»¬é¦–å…ˆè®¡ç®—æ¯ä¸ªå•†å“çš„æ¯ç£…ä»·å€¼v<sub>i</sub>/w<sub>i</sub>ã€‚éµå¾ªè´ªå¿ƒç­–ç•¥ï¼Œå°å·é¦–å…ˆå°½é‡å¤šçš„æ‹¿èµ°æ¯ç£…ä»·å€¼æœ€é«˜çš„å•†å“ã€‚å¦‚æœæ­¤å•†å“å·²ç»å…¨éƒ¨æ‹¿èµ°è€ŒèƒŒåŒ…æœªæ»¡ï¼Œä»–ç»§ç»­å°½é‡å¤šçš„æ‹¿èµ°æ¯ç£…ä»·å€¼ç¬¬äºŒé«˜çš„å•†å“ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°è¾¾åˆ°é‡é‡ä¸Šé™Wã€‚</p><p>å¯¹äºåˆ†æ•°èƒŒåŒ…é—®é¢˜ï¼Œä¸Šè¿°è´ªå¿ƒç­–ç•¥é¦–å…ˆæ‹¿èµ°æ¯ç£…ä»·å€¼æœ€å¤§çš„å•†å“ï¼Œæ˜¯å¯ä»¥ç”Ÿæˆæœ€ä¼˜è§£çš„ã€‚è¯¥ç­–ç•¥å¯¹0-1èƒŒåŒ…æ— æ•ˆæ˜¯å› ä¸ºå°å·<strong>æ— æ³•è£…æ»¡èƒŒåŒ…ï¼Œç©ºé—²ç©ºé—´é™ä½äº†æ–¹æ¡ˆçš„æœ‰æ•ˆæ¯ç£…ä»·å€¼</strong>ã€‚</p><p>åœ¨0-1èƒŒåŒ…é—®é¢˜ä¸­ï¼Œå½“æˆ‘ä»¬è€ƒè™‘æ˜¯å¦å°†ä¸€ä¸ªå•†å“åŠ å…¥èƒŒåŒ…æ—¶ï¼Œ<strong>å¿…é¡»æ¯”è¾ƒåŒ…å«æ­¤å•†å“çš„å­é—®é¢˜çš„è§£ä¸ä¸åŒ…å«å®ƒçš„å­é—®é¢˜çš„è§£</strong>ï¼Œç„¶åæ‰èƒ½åšå‡ºé€‰æ‹©ã€‚<strong>è¿™ä¼šå¯¼è‡´å¤§é‡çš„é‡å å­é—®é¢˜â€“åŠ¨æ€è§„åˆ’çš„æ ‡è¯†</strong>ã€‚è¿™ç§é—®é¢˜å°±é€‚åˆç”¨åŠ¨æ€è§„åˆ’å»åšã€‚</p><h4 id="åˆ†ç³–æœé—®é¢˜"><a href="#åˆ†ç³–æœé—®é¢˜" class="headerlink" title="åˆ†ç³–æœé—®é¢˜"></a>åˆ†ç³–æœé—®é¢˜</h4><p><a href="https://leetcode.com/problems/candy/" target="_blank" rel="noopener">leetcode 135. Candy</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">candy2</span><span class="params">(<span class="keyword">int</span>[] ratings)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ratings.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] candies = <span class="keyword">new</span> <span class="keyword">int</span>[ratings.length];</span><br><span class="line">        candies[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; ratings.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ratings[i] &gt; ratings[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                candies[i] = candies[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                candies[i] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = candies[ratings.length - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = ratings.length - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (ratings[i] &gt; ratings[i + <span class="number">1</span>]) &#123;</span><br><span class="line">                temp = candies[i + <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            candies[i] = Math.max(candies[i], temp);</span><br><span class="line">            result += candies[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜’ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨ç®—æ³•æ€»ç»“ä¹‹åŠ¨æ€è§„åˆ’</title>
      <link href="/2019/09/10/dp/"/>
      <url>/2019/09/10/dp/</url>
      
        <content type="html"><![CDATA[<h4 id="åŠ¨æ€è§„åˆ’ç®—æ³•æ€æƒ³"><a href="#åŠ¨æ€è§„åˆ’ç®—æ³•æ€æƒ³" class="headerlink" title="åŠ¨æ€è§„åˆ’ç®—æ³•æ€æƒ³"></a>åŠ¨æ€è§„åˆ’ç®—æ³•æ€æƒ³</h4><p>åŠ¨æ€è§„åˆ’ï¼ˆdynamic programmingï¼‰ä¸åˆ†æ²»æ–¹æ³•ç›¸ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡ç»„åˆå­é—®é¢˜çš„è§£æ¥æ±‚è§£åŸé—®é¢˜ï¼ˆåœ¨è¿™é‡Œï¼Œprogramming æŒ‡çš„æ˜¯ä¸€ç§è¡¨æ ¼æ³•ï¼‰ã€‚åˆ†æ²»æ³•å°†é—®é¢˜åˆ’åˆ†ä¸ºäº’ä¸ç›¸äº¤çš„å­é—®é¢˜ï¼Œå†å°†ä»–ä»¬çš„è§£ç»„åˆèµ·æ¥ï¼Œæ±‚å‡ºåŸé—®é¢˜çš„è§£ã€‚ä¸ä¹‹ç›¸åï¼ŒåŠ¨æ€è§„åˆ’åº”ç”¨äºå­é—®é¢˜é‡å çš„æƒ…å†µï¼Œå³<strong>ä¸åŒçš„å­é—®é¢˜å…·æœ‰å…¬å…±çš„å­é—®é¢˜</strong>ï¼ˆå­é—®é¢˜çš„æ±‚è§£é‡Šé€’å½’è¿›è¡Œçš„ï¼Œå°†å…¶åˆ’åˆ†ä¸ºæ›´å°çš„å­å­é—®é¢˜ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ†æ²»æ³•ä¼šåšè®¸å¤šä¸å¿…è¦çš„å·¥ä½œï¼Œå®ƒä¼šåå¤æ±‚è§£é‚£äº›å…¬å…±å­é—®é¢˜ã€‚è€ŒåŠ¨æ€è§„åˆ’ç®—æ³•å¯¹æ¯ä¸ªå­é—®é¢˜åªæ±‚è§£ä¸€æ¬¡ï¼Œå°†å…¶è§£ä¿å­˜åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œä»è€Œæ— éœ€æ¯æ¬¡æ±‚è§£ä¸€ä¸ªå­é—®é¢˜æ—¶éƒ½é‡æ–°è®¡ç®—ï¼Œé¿å…äº†è¿™ç§ä¸å¿…è¦çš„è®¡ç®—å·¥ä½œã€‚</p><h4 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h4><p>åŠ¨æ€è§„åˆ’æ–¹æ³•é€šå¸¸ç”¨æ¥æ±‚è§£<strong>æœ€ä¼˜åŒ–é—®é¢˜</strong>ã€‚è¿™ç±»é—®é¢˜å¯ä»¥æœ‰å¾ˆå¤šå¯è¡Œè§£ï¼Œæ¯ä¸ªè§£éƒ½æœ‰ä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬å¸Œæœ›å¯»æ‰¾å…·æœ‰æœ€ä¼˜å€¼ï¼ˆæœ€å°å€¼æˆ–æœ€å¤§å€¼ï¼‰çš„è§£ã€‚æˆ‘ä»¬ç§°è¿™æ ·çš„è§£ä¸ºé—®é¢˜çš„ä¸€ä¸ªæœ€ä¼˜è§£ï¼ˆan optimal solutionï¼‰ï¼Œè€Œä¸æ˜¯æœ€ä¼˜è§£ï¼ˆthe optimal solutionï¼‰ï¼Œå› ä¸ºå¯èƒ½æœ‰å¤šä¸ªè§£éƒ½è¾¾åˆ°æœ€ä¼˜å€¼ã€‚</p><a id="more"></a><h4 id="è®¾è®¡åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ­¥éª¤"><a href="#è®¾è®¡åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ­¥éª¤" class="headerlink" title="è®¾è®¡åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ­¥éª¤"></a>è®¾è®¡åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ­¥éª¤</h4><p>æˆ‘ä»¬é€šå¸¸æŒ‰å¦‚ä¸‹4ä¸ªæ­¥éª¤æ¥è®¾è®¡ä¸€ä¸ªåŠ¨æ€è§„åˆ’ç®—æ³•ï¼š</p><ol><li>åˆ»ç”»ä¸€ä¸ªæœ€ä¼˜è§£çš„ç»“æ„ç‰¹å¾</li><li>é€’å½’åœ°å®šä¹‰æœ€ä¼˜è§£çš„å€¼</li><li>è®¡ç®—æœ€ä¼˜è§£çš„å€¼ï¼Œé€šå¸¸é‡‡ç”¨è‡ªåº•å‘ä¸Šçš„æ–¹æ³•</li><li>åˆ©ç”¨è®¡ç®—å‡ºçš„ä¿¡æ¯æ„é€ ä¸€ä¸ªæœ€ä¼˜è§£</li></ol><p>æ­¥éª¤1~3æ˜¯åŠ¨æ€è§„åˆ’ç®—æ³•æ±‚è§£é—®é¢˜çš„åŸºç¡€ã€‚å¦‚æœæˆ‘ä»¬ä»…ä»…éœ€è¦ä¸€ä¸ªæœ€ä¼˜è§£çš„å€¼ï¼Œè€Œéè§£æœ¬èº«ï¼Œå¯ä»¥å¿½ç•¥æ­¥éª¤4.å¦‚æœç¡®å®è¦åšæ­¥éª¤4ï¼Œæœ‰æ—¶å°±éœ€è¦æ­¥éª¤3çš„è¿‡ç¨‹ä¸­ç»´æŠ¤ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œä»¥ä¾¿ç”¨æ¥æ„é€ ä¸€ä¸ªæœ€ä¼˜è§£ã€‚</p><h4 id="æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜"></a>æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜</h4><p><a href="https://leetcode.com/problems/maximum-length-of-repeated-subarray/" target="_blank" rel="noopener">leetcode 583. Delete Operation for Two Strings</a></p><p>åŸºæœ¬è§£æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = word1.length();</span><br><span class="line">        <span class="keyword">int</span> len2 = word2.length();</span><br><span class="line">        <span class="keyword">if</span> (len1 == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> len2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (len2 == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> len1;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// äºŒç»´æ•°ç»„å¯ç”¨ ä¸€ä½æ•°ç»„ + ä¸´æ—¶ä¸€ä½æ•°ç»„ æ›¿æ¢æ‰</span></span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len1][len2];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = word1.charAt(<span class="number">0</span>) == word2.charAt(<span class="number">0</span>) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len1; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[i - <span class="number">1</span>][<span class="number">0</span>] == <span class="number">1</span> || word1.charAt(i) == word2.charAt(<span class="number">0</span>)) &#123;</span><br><span class="line">                dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; len2; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[<span class="number">0</span>][j - <span class="number">1</span>] == <span class="number">1</span> || word1.charAt(<span class="number">0</span>) == word2.charAt(j)) &#123;</span><br><span class="line">                dp[<span class="number">0</span>][j] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len1; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; len2; j++) &#123;</span><br><span class="line">                <span class="comment">// æ­¤å¤„èµ‹å€¼è¯­å¥å¯ä¼˜åŒ–</span></span><br><span class="line">                <span class="comment">// dp[i - 1][j - 1] + 1 &gt;=  Math.max(dp[i - 1][j], dp[i][j - 1])</span></span><br><span class="line">                dp[i][j] = Math.max(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">if</span> (word1.charAt(i) == word2.charAt(j)) &#123;</span><br><span class="line">                    dp[i][j] = Math.max(dp[i][j], dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; dp.length; i++) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(Arrays.toString(dp[i]));</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> len1 - dp[len1 - <span class="number">1</span>][len2 - <span class="number">1</span>] + len2 - dp[len1 - <span class="number">1</span>][len2 - <span class="number">1</span>];</span><br></pre></td></tr></table></figure></p><p>ä¼˜åŒ–è§£æ³•ï¼š</p><ul><li>å€Ÿç”¨ä¸´æ—¶æ•°ç»„tempï¼Œå°†äºŒç»´dpæ•°ç»„é™ç»´</li><li>ä¼˜åŒ–èµ‹å€¼åˆ¤æ–­é€»è¾‘<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">minDistanceDpQuick</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> len1 = word1.length();</span><br><span class="line">       <span class="keyword">int</span> len2 = word2.length();</span><br><span class="line"></span><br><span class="line">       <span class="comment">// ä½¿ç”¨ä¸€ç»´æ•°ç»„</span></span><br><span class="line">       <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len2 + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len1; i++) &#123;</span><br><span class="line">           <span class="comment">// å€Ÿç”¨ä¸´æ—¶æ•°ç»„tempï¼Œå°†äºŒç»´dpæ•°ç»„é™ç»´</span></span><br><span class="line">           <span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[len2 + <span class="number">1</span>];</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len2; j++) &#123;</span><br><span class="line">               <span class="comment">// ä¼˜åŒ–åŸºæœ¬è§£æ³•çš„ èµ‹å€¼é€»è¾‘</span></span><br><span class="line">               <span class="keyword">if</span> (word1.charAt(i) == word2.charAt(j)) &#123;</span><br><span class="line">                   temp[j + <span class="number">1</span>] = Math.max(temp[j + <span class="number">1</span>], dp[j] + <span class="number">1</span>);</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   temp[j + <span class="number">1</span>] = Math.max(dp[j + <span class="number">1</span>], temp[j]);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           dp = temp;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> len1 - dp[len2] + len2 - dp[len2];</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="æœ€é•¿å…¬å…±å­ä¸²é—®é¢˜"><a href="#æœ€é•¿å…¬å…±å­ä¸²é—®é¢˜" class="headerlink" title="æœ€é•¿å…¬å…±å­ä¸²é—®é¢˜"></a>æœ€é•¿å…¬å…±å­ä¸²é—®é¢˜</h4><p><a href="https://leetcode.com/problems/maximum-length-of-repeated-subarray/" target="_blank" rel="noopener">leetcode 718. Maximum Length of Repeated Subarray</a></p><p>åŸºæœ¬è§£æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findLength</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (A.length == <span class="number">0</span> || B.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[A.length][B.length];</span><br><span class="line"></span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = A[<span class="number">0</span>] == B[<span class="number">0</span>] ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> result = dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; B.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A[<span class="number">0</span>] == B[i]) &#123;</span><br><span class="line">                dp[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (dp[<span class="number">0</span>][i] &gt; result) &#123;</span><br><span class="line">                    result = dp[<span class="number">0</span>][i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A[i] == B[<span class="number">0</span>]) &#123;</span><br><span class="line">                dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (dp[i][<span class="number">0</span>] &gt; result) &#123;</span><br><span class="line">                    result = dp[i][<span class="number">0</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; B.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (A[i] == B[j]) &#123;</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (dp[i][j] &gt; result) &#123;</span><br><span class="line">                    result = dp[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; dp.length; i++) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(Arrays.toString(dp[i]));</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p>ä¼˜åŒ–è§£æ³•ï¼šä½¿ç”¨å€’åºéå†çš„æ–¹å¼å°†ä¸€ç»´æ•°ç»„é™ç»´<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findLengthDpQuick</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> l1 = A.length;</span><br><span class="line">       <span class="keyword">int</span> l2 = B.length;</span><br><span class="line">       <span class="keyword">if</span> (l1 == <span class="number">0</span> || l2 == <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[l2 + <span class="number">1</span>];</span><br><span class="line">       <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l1; i++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> j = l2 - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">               <span class="keyword">if</span> (A[i] == B[j]) &#123;</span><br><span class="line">                   dp[j + <span class="number">1</span>] = dp[j] + <span class="number">1</span>;</span><br><span class="line">                   <span class="keyword">if</span> (dp[j + <span class="number">1</span>] &gt; max) &#123;</span><br><span class="line">                       max = dp[j + <span class="number">1</span>];</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   dp[j + <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> max;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜’ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨ç®—æ³•æ€»ç»“ä¹‹åˆ†æ²»ç®—æ³•</title>
      <link href="/2019/09/03/divide-conquer/"/>
      <url>/2019/09/03/divide-conquer/</url>
      
        <content type="html"><![CDATA[<h4 id="åˆ†æ²»æ³•æ€æƒ³"><a href="#åˆ†æ²»æ³•æ€æƒ³" class="headerlink" title="åˆ†æ²»æ³•æ€æƒ³"></a>åˆ†æ²»æ³•æ€æƒ³</h4><p>å°†åŸé—®é¢˜åˆ†è§£ä¸ºå‡ ä¸ªè§„æ¨¡è¾ƒå°ä½†ç±»ä¼¼äºåŸé—®é¢˜çš„å­é—®é¢˜ï¼Œé€’å½’åœ°æ±‚è§£è¿™äº›å­é—®é¢˜ï¼Œç„¶åå†åˆå¹¶è¿™äº›å­é—®é¢˜çš„è§£æ¥å»ºç«‹åŸé—®é¢˜çš„è§£ã€‚</p><h4 id="åˆ†æ²»æ¨¡å¼åœ¨æ¯å±‚é€’å½’æ—¶éƒ½æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š"><a href="#åˆ†æ²»æ¨¡å¼åœ¨æ¯å±‚é€’å½’æ—¶éƒ½æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š" class="headerlink" title="åˆ†æ²»æ¨¡å¼åœ¨æ¯å±‚é€’å½’æ—¶éƒ½æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š"></a>åˆ†æ²»æ¨¡å¼åœ¨æ¯å±‚é€’å½’æ—¶éƒ½æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š</h4><ul><li><strong>åˆ†è§£</strong>åŸé—®é¢˜ä¸ºè‹¥å¹²ä¸ªå­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜æ˜¯åŸé—®é¢˜è§„æ¨¡è¾ƒå°çš„å®ä¾‹ã€‚</li><li><strong>è§£å†³</strong>è¿™äº›å­é—®é¢˜ï¼Œé€’å½’åœ°æ±‚è§£å„å­é—®é¢˜ã€‚ç„¶è€Œï¼Œè‹¥å­é—®é¢˜è§„æ¨¡è¶³å¤Ÿå°ï¼Œåˆ™ç›´æ¥æ±‚è§£ã€‚</li><li><strong>åˆå¹¶</strong>è¿™äº›å­é—®é¢˜çš„è§£æˆåŸé—®é¢˜çš„è§£ã€‚</li></ul><h4 id="å½’å¹¶æ’åºä¸­çš„åˆ†æ²»æ¨¡å¼"><a href="#å½’å¹¶æ’åºä¸­çš„åˆ†æ²»æ¨¡å¼" class="headerlink" title="å½’å¹¶æ’åºä¸­çš„åˆ†æ²»æ¨¡å¼"></a>å½’å¹¶æ’åºä¸­çš„åˆ†æ²»æ¨¡å¼</h4><ol><li><strong>åˆ†è§£</strong>ï¼šåˆ†è§£å¾…æ’åºçš„nä¸ªå…ƒç´ çš„åºåˆ—æˆå„å…·n/2å„å…ƒç´ çš„ä¸¤ä¸ªå­åºåˆ—ã€‚</li><li><strong>è§£å†³</strong>ï¼šä½¿ç”¨å½’å¹¶æ’åºé€’å½’åœ°æ’åºä¸¤ä¸ªå­åºåˆ—ã€‚</li><li><strong>åˆå¹¶</strong>ï¼šåˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„å­åºåˆ—ä»¥äº§ç”Ÿå·²æ’åºçš„ç­”æ¡ˆã€‚</li></ol><a id="more"></a><p>æˆ‘ä»¬ç”¨ä»£ç å®ç°ä¸€ä¸‹ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹å†™ä¸€ä¸ªå½’å¹¶æ’åº-</span></span><br><span class="line"><span class="comment"> * å½’å¹¶æ’åºéµå¾ª å½’å¹¶æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * åˆ†è§£ï¼šå°†nä¸ªå…ƒç´ çš„æ•°ç»„åˆ†è§£ä¸º2ä¸ª n/2ä¸ªå…ƒç´ çš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> * è§£å†³ï¼šåˆ†åˆ«å¯¹2ä¸ªå­æ•°ç»„æ’åº</span></span><br><span class="line"><span class="comment"> * åˆå¹¶ï¼šåˆå¹¶2ä¸ªå·²ç»æ’åºçš„å­æ•°ç»„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">        mergeSort(array, left, mid);</span><br><span class="line">        mergeSort(array, mid + <span class="number">1</span>, right);</span><br><span class="line">        merge(array, left, mid, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†ä¸¤ä¸ªæ•°ç»„ åˆå¹¶ [min, mid] [mid+1, max]</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> left</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> right</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> left, <span class="keyword">int</span> mid, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[right - left + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">int</span> i = left;</span><br><span class="line">    <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array[i] &lt;= array[j]) &#123;</span><br><span class="line">            temp[k++] = array[i++];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            temp[k++] = array[j++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid) &#123;</span><br><span class="line">        temp[k++] = array[i++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (j &lt;= right) &#123;</span><br><span class="line">        temp[k++] = array[j++];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> p = <span class="number">0</span>; p &lt; temp.length; p++) &#123;</span><br><span class="line">        array[left + p] = temp[p];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">9</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    System.out.println(<span class="string">"æ’åºå‰æ•°ç»„"</span> + Arrays.toString(array));</span><br><span class="line">    mergeSort(array, <span class="number">0</span>, array.length - <span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">"æ’åºåæ•°ç»„"</span> + Arrays.toString(array));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="é€’å½’å¼"><a href="#é€’å½’å¼" class="headerlink" title="é€’å½’å¼"></a>é€’å½’å¼</h4><p>å½“ä¸€ä¸ªç®—æ³•åŒ…å«å¯¹å…¶è‡ªèº«çš„é€’å½’è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€å¯ä»¥ç”¨<strong>é€’å½’æ–¹ç¨‹</strong>æˆ–<strong>é€’å½’å¼</strong>æ¥æè¿°å…¶è¿è¡Œæ—¶é—´ï¼Œè¯¥æ–¹ç¨‹æ ¹æ®åœ¨è¾ƒå°ä¸Šçš„è¿è¡Œæ—¶é—´æ¥æè¿°åœ¨è§„æ¨¡ä¸ºnçš„é—®é¢˜ä¸Šçš„æ€»è¿è¡Œæ—¶é—´ã€‚</p><h4 id="æœ€å¤§å­æ•°ç»„é—®é¢˜"><a href="#æœ€å¤§å­æ•°ç»„é—®é¢˜" class="headerlink" title="æœ€å¤§å­æ•°ç»„é—®é¢˜"></a>æœ€å¤§å­æ•°ç»„é—®é¢˜</h4><p>ç»™ä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾å‡ºä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼Œè¿”å›æœ€å¤§å’Œã€‚</p><p> <a href="https://leetcode.com/problems/maximum-subarray/" target="_blank" rel="noopener">leetcode 53. Maximum Subarray</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ€è·¯</span></span><br><span class="line"><span class="comment"> * åˆ†è§£ï¼šå°†æ•°ç»„åˆ†ä¸º2ä¸ª å­æ•°ç»„</span></span><br><span class="line"><span class="comment"> * è§£å†³ï¼šä¸¤ä¸ªå­æ•°ç»„çš„ æœ€å¤§å’Œ å¯ä»¥ç›´æ¥æ±‚å¾—ï¼Œ åŒ…å«ä¸­é—´ç‚¹ çš„ æœ€å¤§å’Œ ç»è¿‡ç‰¹æ®Šè®¡ç®—ä¸€ä¸‹</span></span><br><span class="line"><span class="comment"> * åˆå¹¶ï¼šè¿”å›ä¸¤ä¸ªå­æ•°ç»„ æœ€å¤§å’Œ ä¸­ æœ€å¤§çš„ä¸€ä¸ª æˆ–è€… è¿”å› åŒ…å«ä¸­é—´ç‚¹ çš„æœ€å¤§å’Œ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> nums</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> calcMaxSubarray(nums, <span class="number">0</span>, (nums.length - <span class="number">1</span>) / <span class="number">2</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—æœ€å¤§å­æ•°ç»„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> left</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> right</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calcMaxSubarray</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> left, <span class="keyword">int</span> mid, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// left &gt;= right è·³å‡ºé€’å½’</span></span><br><span class="line">    <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">        <span class="keyword">return</span> array[left];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å·¦é¢å­æ•°ç»„ æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">int</span> leftMax = calcMaxSubarray(array, left, (left + mid) / <span class="number">2</span>, mid);</span><br><span class="line">    <span class="comment">// å³é¢å­æ•°ç»„ æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">int</span> rightMax = calcMaxSubarray(array, mid + <span class="number">1</span>, (mid + <span class="number">1</span> + right) / <span class="number">2</span>, right);</span><br><span class="line">    <span class="comment">// åŒ…å«ä¸­é—´ç‚¹çš„ ä¸¤ä¸ªå­æ•°ç»„ çš„æœ€å¤§å€¼ åˆå§‹å€¼ è®¾ä¸º ä¸­ç‚¹çš„å€¼</span></span><br><span class="line">    <span class="keyword">int</span> midMax = array[mid], temp = midMax;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = mid - <span class="number">1</span>; i &gt;= left; i--) &#123;</span><br><span class="line">        temp += array[i];</span><br><span class="line">        midMax = Math.max(temp, midMax);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    temp = midMax;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = mid + <span class="number">1</span>; i &lt;= right; i++) &#123;</span><br><span class="line">        temp += array[i];</span><br><span class="line">        midMax = Math.max(temp, midMax);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Math.max(midMax, Math.max(leftMax, rightMax));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜’ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²»ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ–¹æ³•æ¨¡å¼</title>
      <link href="/2019/08/16/factory-method-pattern/"/>
      <url>/2019/08/16/factory-method-pattern/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼</h3><p>å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚</p><h3 id="UMLå›¾"><a href="#UMLå›¾" class="headerlink" title="UMLå›¾"></a>UMLå›¾</h3><p><img src="/images/factory-method-pattern.png" alt></p><a id="more"></a><h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼ç®€å•ä»£ç å®ç°"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼ç®€å•ä»£ç å®ç°" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼ç®€å•ä»£ç å®ç°"></a>å·¥å‚æ–¹æ³•æ¨¡å¼ç®€å•ä»£ç å®ç°</h3><h4 id="æŠ½è±¡äº§å“ç±»"><a href="#æŠ½è±¡äº§å“ç±»" class="headerlink" title="æŠ½è±¡äº§å“ç±»"></a>æŠ½è±¡äº§å“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/21 21:36:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">// äº§å“ç±»çš„å…¬å…±æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…·ä½“äº§å“ç±»"><a href="#å…·ä½“äº§å“ç±»" class="headerlink" title="å…·ä½“äº§å“ç±»"></a>å…·ä½“äº§å“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/21 21:37:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct1</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŠ½è±¡å·¥å‚ç±»"><a href="#æŠ½è±¡å·¥å‚ç±»" class="headerlink" title="æŠ½è±¡å·¥å‚ç±»"></a>æŠ½è±¡å·¥å‚ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/21 21:38:35</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Creator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> &lt;T extends Product&gt; <span class="function">T <span class="title">createProduct</span><span class="params">(Class&lt;T&gt; c)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…·ä½“å·¥å‚ç±»"><a href="#å…·ä½“å·¥å‚ç±»" class="headerlink" title="å…·ä½“å·¥å‚ç±»"></a>å…·ä½“å·¥å‚ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/21 21:40:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteCreator</span> <span class="keyword">extends</span> <span class="title">Creator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T extends Product&gt; <span class="function">T <span class="title">createProduct</span><span class="params">(Class&lt;T&gt; c)</span> </span>&#123;</span><br><span class="line">        Product product = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            product = (Product) Class.forName(c.getName()).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// å¼‚å¸¸å¤„ç†</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> â˜ºï¸è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å‚æ–¹æ³•æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</title>
      <link href="/2019/08/14/proxy-pattern/"/>
      <url>/2019/08/14/proxy-pattern/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼</h3><p>ä»£ç†æ¨¡å¼ï¼ˆå§”æ‰˜æ¨¡å¼ï¼‰å°±æ˜¯ï¼š<strong>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</strong></p><h3 id="UMLå›¾"><a href="#UMLå›¾" class="headerlink" title="UMLå›¾"></a>UMLå›¾</h3><p><img src="/images/proxy-pattern.png" alt></p><a id="more"></a><h3 id="ä»£ç†æ¨¡å¼ç®€å•ä»£ç å®ç°"><a href="#ä»£ç†æ¨¡å¼ç®€å•ä»£ç å®ç°" class="headerlink" title="ä»£ç†æ¨¡å¼ç®€å•ä»£ç å®ç°"></a>ä»£ç†æ¨¡å¼ç®€å•ä»£ç å®ç°</h3><p>ä»£ç†ä¸»é¢˜æ¥å£<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/12 23:21:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>çœŸæ­£çš„ä¸»é¢˜ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/12 23:21:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Real Subject!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»£ç†ä¸»é¢˜ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/12 23:22:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxySubject</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RealSubject subject;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxySubject</span><span class="params">(RealSubject subject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subject = subject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        subject.visit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å®¢æˆ·ç«¯<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/12 23:23:27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ„é€ ä¸€ä¸ªçœŸå®çš„ä¸»é¢˜å¯¹è±¡</span></span><br><span class="line">        RealSubject real = <span class="keyword">new</span> RealSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šè¿‡çœŸå®ä¸»é¢˜å¯¹è±¡æ„é€ ä¸€ä¸ªä»£ç†å¯¹è±¡</span></span><br><span class="line">        ProxySubject proxy = <span class="keyword">new</span> ProxySubject(real);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨ä»£ç†çš„ç›¸å…³æ–¹æ³•</span></span><br><span class="line">        proxy.visit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"><a href="#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"></a>ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†</h3><p>ä»£ç†æ¨¡å¼å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œä¸€æ˜¯é™æ€ä»£ç†ï¼ŒäºŒæ˜¯åŠ¨æ€ä»£ç†ã€‚</p><ul><li>é™æ€ä»£ç†ï¼šä»£ç†è€…çš„ä»£ç æå‰å·²ç»å†™å¥½äº†ï¼Œç„¶åå†å¯¹å…¶è¿›è¡Œç¼–è¯‘ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä»£ç è¿è¡Œå‰ï¼Œclassç¼–è¯‘æ–‡ä»¶å°±å·²ç»å­˜åœ¨ã€‚</li><li>ä¸é™æ€ä»£ç†ç›¸åï¼Œä»£ç æ‰§è¡Œå‰æˆ‘ä»¬å¹¶ä¸çŸ¥é“è¦ä»£ç†è°ï¼Œè€Œæ˜¯é€šè¿‡åå°„æœºåˆ¶åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„ç”Ÿæˆä»£ç†è€…çš„å¯¹è±¡ã€‚</li></ul><h3 id="Javaä¸­åŠ¨æ€ä»£ç†ä»£ç å®ç°"><a href="#Javaä¸­åŠ¨æ€ä»£ç†ä»£ç å®ç°" class="headerlink" title="Javaä¸­åŠ¨æ€ä»£ç†ä»£ç å®ç°"></a>Javaä¸­åŠ¨æ€ä»£ç†ä»£ç å®ç°</h3><p>å®ç°InvocationHandleræ¥å£ï¼Œé‡å†™invoke()æ–¹æ³•ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/12 23:37:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Object result = method.invoke(proxy, args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Javaå®ç°åŠ¨æ€ä»£ç†çš„ä»£ç "><a href="#Javaå®ç°åŠ¨æ€ä»£ç†çš„ä»£ç " class="headerlink" title="Javaå®ç°åŠ¨æ€ä»£ç†çš„ä»£ç "></a>Javaå®ç°åŠ¨æ€ä»£ç†çš„ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/12 23:40:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicProxyClient</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ„é€ çœŸå®çš„å¯¹è±¡</span></span><br><span class="line">        RealSubject realSubject = <span class="keyword">new</span> RealSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ ä¸€ä¸ªåŠ¨æ€ä»£ç†</span></span><br><span class="line">        DynamicProxy dynamicProxy = <span class="keyword">new</span> DynamicProxy(realSubject);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–çœŸå®å¯¹è±¡çš„lassLoader</span></span><br><span class="line">        ClassLoader classLoader = realSubject.getClass().getClassLoader();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ¨æ€æ„é€ ä¸€ä¸ª ä»£ç†å¯¹è±¡</span></span><br><span class="line">        Subject subject = (Subject) Proxy.newProxyInstance(classLoader, <span class="keyword">new</span> Class[]&#123;Subject.class&#125;, dynamicProxy);</span><br><span class="line">        subject.visit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> â˜ºï¸è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç†æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼</title>
      <link href="/2019/07/20/strategy-pattern/"/>
      <url>/2019/07/20/strategy-pattern/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼</h3><p>ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œè€Œä¸”ä½¿ä»–ä»¬è¿˜å¯ä»¥ç›¸äº’äº’æ¢ã€‚</p><h3 id="UML-å›¾"><a href="#UML-å›¾" class="headerlink" title="UML å›¾"></a>UML å›¾</h3><p><img src="/images/strategy-pattern.png" alt></p><a id="more"></a><h3 id="ç®€å•å®ç°"><a href="#ç®€å•å®ç°" class="headerlink" title="ç®€å•å®ç°"></a>ç®€å•å®ç°</h3><h4 id="ç­–ç•¥æ¥å£"><a href="#ç­–ç•¥æ¥å£" class="headerlink" title="ç­–ç•¥æ¥å£"></a>ç­–ç•¥æ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/18 16:09:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç­–ç•¥å…·ä½“å®ç°1"><a href="#ç­–ç•¥å…·ä½“å®ç°1" class="headerlink" title="ç­–ç•¥å…·ä½“å®ç°1"></a>ç­–ç•¥å…·ä½“å®ç°1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/18 16:09:49</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategy1</span> <span class="keyword">implements</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç­–ç•¥1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/18 16:10:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Strategy strategy;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Context</span><span class="params">(Strategy strategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.strategy = strategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAnyThing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        strategy.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> â˜ºï¸è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç­–ç•¥æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¹‹é˜Ÿåˆ—</title>
      <link href="/2019/07/05/queue/"/>
      <url>/2019/07/05/queue/</url>
      
        <content type="html"><![CDATA[<h3 id="å®šä¹‰ï¼š"><a href="#å®šä¹‰ï¼š" class="headerlink" title="å®šä¹‰ï¼š"></a>å®šä¹‰ï¼š</h3><p><strong>é˜Ÿåˆ—ï¼ˆqueueï¼‰</strong>æ˜¯ä¸€ç§çº¿æ€§é›†åˆï¼Œå…¶å…ƒç´ ä»ä¸€ç«¯è¿›å…¥ï¼Œä»å¦ä¸€ç«¯åˆ é™¤ã€‚é˜Ÿåˆ—å…ƒç´ æ˜¯æŒ‰ç…§<strong>å…ˆè¿›å…ˆå‡ºï¼ˆFirst In First Out, FIFOï¼‰</strong>æ–¹å¼å¤„ç†çš„ã€‚ä»é˜Ÿåˆ—åˆ é™¤å…ƒç´ çš„æ¬¡åºï¼Œä¸å¾€é˜Ÿåˆ—æ”¾ç½®å…ƒç´ çš„æ¬¡åºæ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="é˜Ÿåˆ—æŠ½è±¡æ•°æ®ç±»å‹"><a href="#é˜Ÿåˆ—æŠ½è±¡æ•°æ®ç±»å‹" class="headerlink" title="é˜Ÿåˆ—æŠ½è±¡æ•°æ®ç±»å‹"></a>é˜Ÿåˆ—æŠ½è±¡æ•°æ®ç±»å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.iisheng.queue;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/07/30 23:11:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">QueueADT</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é˜Ÿåˆ—æœ«ç«¯æ·»åŠ ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(T element)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»é˜Ÿåˆ—å‰ç«¯åˆ é™¤ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">T <span class="title">dequeue</span><span class="params">(T element)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›é˜Ÿåˆ—æœ€å‰ç«¯çš„å…ƒç´ ï¼Œä½†ä¸ç§»å‡º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">T <span class="title">first</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœé˜Ÿåˆ—ä¸ºç©ºè¿”å›true</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›é˜Ÿåˆ—å­—ç¬¦ä¸²è¡¨ç¤º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">toString</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—"><a href="#ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—" class="headerlink" title="ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—"></a>ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—</h3><p><code>LinearNode&lt;T&gt;</code>æ˜¯é“¾è¡¨ä¸€ä¸ªèŠ‚ç‚¹çš„å®ç°ï¼Œ<a href="https://github.com/iisheng/java-algorithm/blob/master/src/main/java/cn/iisheng/common/LinearNode.java" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æºç </a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.iisheng.queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.iisheng.common.LinearNode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/07/31 08:07:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedQueue</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">QueueADT</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LinearNode&lt;T&gt; head, tail;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">        head = tail = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(T element)</span> </span>&#123;</span><br><span class="line">        LinearNode&lt;T&gt; node = <span class="keyword">new</span> LinearNode(element);</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            head = node;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tail.setNext(node);</span><br><span class="line">        &#125;</span><br><span class="line">        tail = node;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">dequeue</span><span class="params">(T element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Queue is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        T result = head.getElement();</span><br><span class="line">        head = head.getNext();</span><br><span class="line">        count--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            tail = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">first</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Queue is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.getElement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—"><a href="#ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—" class="headerlink" title="ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—"></a>ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.iisheng.queue;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/09/02 21:39:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CircularArrayQueue</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">QueueADT</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> front, rear, count;</span><br><span class="line">    <span class="keyword">private</span> T[] queue;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CircularArrayQueue</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        front = rear = count = <span class="number">0</span>;</span><br><span class="line">        queue = (T[]) <span class="keyword">new</span> Object[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CircularArrayQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(DEFAULT_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(T element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size() == queue.length) &#123;</span><br><span class="line">            expandCapacity();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        queue[rear] = element;</span><br><span class="line">        rear = (rear + <span class="number">1</span>) % queue.length;</span><br><span class="line"></span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">dequeue</span><span class="params">(T element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Queue is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        T result = queue[front];</span><br><span class="line">        front = (front + <span class="number">1</span>) % queue.length;</span><br><span class="line"></span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">first</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Queue is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> queue[front];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">expandCapacity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        T[] larger = (T[]) <span class="keyword">new</span> Object[queue.length * <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            larger[i] = queue[front];</span><br><span class="line">            front = (front + <span class="number">1</span>) % queue.length;</span><br><span class="line">        &#125;</span><br><span class="line">        front = <span class="number">0</span>;</span><br><span class="line">        rear = count;</span><br><span class="line">        queue = larger;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆlevel-order-travelsalï¼‰"><a href="#äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆlevel-order-travelsalï¼‰" class="headerlink" title="äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆlevel-order travelsalï¼‰"></a>äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆlevel-order travelsalï¼‰</h3><p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè®¿é—®æ¯ä¸€å±‚çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œä¸€æ¬¡ä¸€å±‚ã€‚</p><p><a href="https://leetcode.com/problems/binary-tree-level-order-traversal/" target="_blank" rel="noopener">leetcode 102. Binary Tree Level Order Traversal</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123;</span><br><span class="line"></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(root);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> size = queue.size();</span><br><span class="line">            List&lt;Integer&gt; currentRes = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">            <span class="comment">// å½“å‰é˜Ÿåˆ—çš„å¤§å°å°±æ˜¯ä¸Šä¸€å±‚èŠ‚ç‚¹ä¸ªæ•°ï¼Œä¾æ¬¡å‡ºé˜Ÿ</span></span><br><span class="line">            <span class="keyword">while</span> (size &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                TreeNode current = queue.poll();</span><br><span class="line">                <span class="keyword">if</span> (current == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                currentRes.add(current.val);</span><br><span class="line">                <span class="comment">// å·¦å­æ ‘å’Œå³å­æ ‘å…¥é˜Ÿ</span></span><br><span class="line">                <span class="keyword">if</span> (current.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    queue.add(current.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (current.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    queue.add(current.right);</span><br><span class="line">                &#125;</span><br><span class="line">                size--;</span><br><span class="line">            &#125;</span><br><span class="line">            res.add(currentRes);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜¨æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¹‹æ ˆ</title>
      <link href="/2019/06/24/stack/"/>
      <url>/2019/06/24/stack/</url>
      
        <content type="html"><![CDATA[<h3 id="å®šä¹‰ï¼š"><a href="#å®šä¹‰ï¼š" class="headerlink" title="å®šä¹‰ï¼š"></a>å®šä¹‰ï¼š</h3><p><strong>æ ˆ</strong>æ˜¯ä¸€ç§çº¿æ€§é›†åˆï¼Œæ ˆçš„å…ƒç´ æ˜¯æŒ‰ç…§åè¿›å…ˆå‡º(LIFO)(Last in, first out)çš„æ–¹æ³•è¿›è¡Œå¤„ç†çš„ï¼Œæœ€åè¿›å…¥æ ˆä¸­çš„å…ƒç´ æœ€å…ˆè¢«ç§»å‡ºã€‚</p><h3 id="æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹"><a href="#æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹" class="headerlink" title="æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹"></a>æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.iisheng.stack;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/07/29 23:17:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StackADT</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(T element)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">T <span class="title">pop</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ä¸”ä¸ç§»é™¤æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">T <span class="title">peek</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœæ ˆé‡Œé¢æ²¡æœ‰å…ƒç´ è¿”å›true</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æ ˆä¸­å…ƒç´ çš„æ€»æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰æ ˆçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">toString</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="ç”¨æ•°ç»„å®ç°æ ˆ"><a href="#ç”¨æ•°ç»„å®ç°æ ˆ" class="headerlink" title="ç”¨æ•°ç»„å®ç°æ ˆ"></a>ç”¨æ•°ç»„å®ç°æ ˆ</h3><p>æ ˆçš„æ•°ç»„å®ç°å¯ä»¥é€šè¿‡4ä¸ªå‡è®¾æ¥è®¾è®¡ï¼š</p><ul><li>è¯¥æ•°ç»„æ˜¯ä¸€ä¸ªå¯¹è±¡å¼•ç”¨çš„æ•°ç»„ï¼ˆå…¶æ•°æ®ç±»å‹åœ¨æ ˆå®ä¾‹åŒ–çš„æ—¶å€™ç¡®å®šï¼‰</li><li>æ ˆåº•æ€»æ˜¯åœ¨æ•°ç»„çš„ç´¢å¼•0å¤„</li><li>æ ˆçš„å…ƒç´ æ˜¯æŒ‰ç…§é¡ºåºå¹¶è¿ç»­åœ°å­˜å‚¨åœ¨æ•°ç»„ä¸­</li><li>æœ‰ä¸€ä¸ªæ•´æ•°å˜é‡topï¼Œè¯¥å˜é‡ä¿å­˜äº†ç´§è·Ÿæ ˆé¡¶å…ƒç´ åçš„æ•°ç»„ç´¢å¼•å·</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.iisheng.stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/07/29 23:18:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">StackADT</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é»˜è®¤å®¹é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ˆé¡¶å…ƒç´ ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> top;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨æ ˆå…ƒç´ çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> T[] stack;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨é»˜è®¤å®¹é‡åˆ›å»ºä¸€ä¸ªç©ºæ ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayStack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        top = <span class="number">0</span>;</span><br><span class="line">        stack = (T[]) (<span class="keyword">new</span> Object[DEFAULT_CAPACITY]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨æŒ‡å®šå®¹é‡åˆ›å»ºä¸€ä¸ªç©ºæ ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayStack</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">        top = <span class="number">0</span>;</span><br><span class="line">        stack = (T[]) (<span class="keyword">new</span> Object[initialCapacity]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     * ç¡®ä¿ è¯¥æ•°ç»„ä¸æ˜¯æ»¡çš„</span></span><br><span class="line"><span class="comment">     * æŠŠæ•°ç»„çš„topå¼•ç”¨è®¾ç½®ä¸ºè¦åŠ å…¥åˆ°æ ˆä¸­çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * å¢åŠ topçš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(T element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size() == stack.length) &#123;</span><br><span class="line">            expandCapacity();</span><br><span class="line">        &#125;</span><br><span class="line">        stack[top] = element;</span><br><span class="line">        top++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">expandCapacity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stack = Arrays.copyOf(stack, stack.length * <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     * ç¡®ä¿ æ ˆä¸ä¸ºç©º</span></span><br><span class="line"><span class="comment">     * å‡å°topè®¡æ•°å™¨</span></span><br><span class="line"><span class="comment">     * è®¾ç½®ä¸€ä¸ªä¸´æ—¶å¼•ç”¨ç­‰äºstack[top]çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     * è®¾ç½®stack[top]ä¸ºç©º</span></span><br><span class="line"><span class="comment">     * è¿”å›è¯¥ä¸´æ—¶å¼•ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">pop</span><span class="params">()</span> <span class="keyword">throws</span> RuntimeException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"The stack is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        top--;</span><br><span class="line">        T result = stack[top];</span><br><span class="line">        stack[top] = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ä¸”ä¸ç§»é™¤æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"The stack is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack[top - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœæ ˆä¸ºç©ºè¿”å›true</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> top == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æ ˆä¸­å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ä»£è¡¨æ ˆçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.toString(stack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”¨é“¾è¡¨å®ç°æ ˆ"><a href="#ç”¨é“¾è¡¨å®ç°æ ˆ" class="headerlink" title="ç”¨é“¾è¡¨å®ç°æ ˆ"></a>ç”¨é“¾è¡¨å®ç°æ ˆ</h3><p><code>LinearNode&lt;T&gt;</code>æ˜¯é“¾è¡¨ä¸€ä¸ªèŠ‚ç‚¹çš„å®ç°ï¼Œ<a href="https://github.com/iisheng/java-algorithm/blob/master/src/main/java/cn/iisheng/common/LinearNode.java" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æºç </a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.iisheng.common.LinearNode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/07/29 23:32:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedStack</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">StackADT</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨æ ˆä¸­å­˜å‚¨å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å‘æ ˆé¡¶çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> LinearNode&lt;T&gt; top;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedStack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">        top = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(T element)</span> </span>&#123;</span><br><span class="line">        LinearNode&lt;T&gt; temp = <span class="keyword">new</span> LinearNode&lt;&gt;(element);</span><br><span class="line"></span><br><span class="line">        temp.setNext(top);</span><br><span class="line">        top = temp;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Stack is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        T result = top.getElement();</span><br><span class="line">        top = top.getNext();</span><br><span class="line">        count--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"The stack is empty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> top.getElement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ ˆæ¥è®¡ç®—åç¼€è¡¨è¾¾å¼"><a href="#ä½¿ç”¨æ ˆæ¥è®¡ç®—åç¼€è¡¨è¾¾å¼" class="headerlink" title="ä½¿ç”¨æ ˆæ¥è®¡ç®—åç¼€è¡¨è¾¾å¼"></a>ä½¿ç”¨æ ˆæ¥è®¡ç®—åç¼€è¡¨è¾¾å¼</h3><p><a href="https://leetcode.com/problems/basic-calculator/" target="_blank" rel="noopener">leetcode 224. Basic Calculator</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">       <span class="keyword">int</span> operand = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">int</span> result = <span class="number">0</span>; <span class="comment">// For the on-going result</span></span><br><span class="line">       <span class="keyword">int</span> sign = <span class="number">1</span>;  <span class="comment">// 1 means positive, -1 means negative</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">char</span> ch = s.charAt(i);</span><br><span class="line">           <span class="keyword">if</span> (Character.isDigit(ch)) &#123;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Forming operand, since it could be more than one digit</span></span><br><span class="line">               operand = <span class="number">10</span> * operand + (<span class="keyword">int</span>) (ch - <span class="string">'0'</span>);</span><br><span class="line"></span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'+'</span>) &#123;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Evaluate the expression to the left,</span></span><br><span class="line">               <span class="comment">// with result, sign, operand</span></span><br><span class="line">               result += sign * operand;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Save the recently encountered '+' sign</span></span><br><span class="line">               sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Reset operand</span></span><br><span class="line">               operand = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'-'</span>) &#123;</span><br><span class="line"></span><br><span class="line">               result += sign * operand;</span><br><span class="line">               sign = -<span class="number">1</span>;</span><br><span class="line">               operand = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">'('</span>) &#123;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Push the result and sign on to the stack, for later</span></span><br><span class="line">               <span class="comment">// We push the result first, then sign</span></span><br><span class="line">               stack.push(result);</span><br><span class="line">               stack.push(sign);</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Reset operand and result, as if new evaluation begins for the new sub-expression</span></span><br><span class="line">               sign = <span class="number">1</span>;</span><br><span class="line">               result = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">')'</span>) &#123;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Evaluate the expression to the left</span></span><br><span class="line">               <span class="comment">// with result, sign and operand</span></span><br><span class="line">               result += sign * operand;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// ')' marks end of expression within a set of parenthesis</span></span><br><span class="line">               <span class="comment">// Its result is multiplied with sign on top of stack</span></span><br><span class="line">               <span class="comment">// as stack.pop() is the sign before the parenthesis</span></span><br><span class="line">               result *= stack.pop();</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Then add to the next operand on the top.</span></span><br><span class="line">               <span class="comment">// as stack.pop() is the result calculated before this parenthesis</span></span><br><span class="line">               <span class="comment">// (operand on stack) + (sign on stack * (result from parenthesis))</span></span><br><span class="line">               result += stack.pop();</span><br><span class="line"></span><br><span class="line">               <span class="comment">// Reset the operand</span></span><br><span class="line">               operand = <span class="number">0</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> result + (sign * operand);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ ˆæ¥éå†æ ‘"><a href="#ä½¿ç”¨æ ˆæ¥éå†æ ‘" class="headerlink" title="ä½¿ç”¨æ ˆæ¥éå†æ ‘"></a>ä½¿ç”¨æ ˆæ¥éå†æ ‘</h3><h4 id="äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆpreorder-travelsalï¼‰"><a href="#äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆpreorder-travelsalï¼‰" class="headerlink" title="äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆpreorder travelsalï¼‰"></a>äºŒå‰æ ‘çš„å‰åºéå†ï¼ˆpreorder travelsalï¼‰</h4><p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè®¿é—®æ¯ä¸€ä¸ªèŠ‚ç‚¹åŠå…¶å­©å­ã€‚ï¼ˆæ ¹ -&gt; å·¦ -&gt; å³ï¼‰</p><p><a href="https://leetcode.com/problems/binary-tree-preorder-traversal/" target="_blank" rel="noopener">leetcode 144. Binary Tree Preorder Traversal</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> result;</span><br><span class="line">       &#125;</span><br><span class="line">       Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack();</span><br><span class="line">       <span class="comment">// æ ¹èŠ‚ç‚¹ æœ€å…ˆå…¥æ ˆ</span></span><br><span class="line">       stack.push(root);</span><br><span class="line">       <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">           root = stack.pop();</span><br><span class="line">           <span class="comment">// éå† æ ¹èŠ‚ç‚¹</span></span><br><span class="line">           result.add(root.val);</span><br><span class="line">           <span class="comment">// å³èŠ‚ç‚¹å…ˆå…¥æ ˆ åéå†</span></span><br><span class="line">           <span class="keyword">if</span> (root.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">               stack.push(root.right);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">// å·¦èŠ‚ç‚¹åå…¥æ ˆ å…ˆéå†</span></span><br><span class="line">           <span class="keyword">if</span> (root.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">               stack.push(root.left);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> result;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆinorder-travelsalï¼‰"><a href="#äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆinorder-travelsalï¼‰" class="headerlink" title="äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆinorder travelsalï¼‰"></a>äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆinorder travelsalï¼‰</h4><p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè®¿é—®èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œç„¶åæ˜¯è¯¥èŠ‚ç‚¹ï¼Œå†ç„¶åæ˜¯ä»»ä½•å‰©ä½™èŠ‚ç‚¹ã€‚ï¼ˆå·¦ -&gt; æ ¹ -&gt; å³ï¼‰</p><p><a href="https://leetcode.com/problems/binary-tree-inorder-traversal/" target="_blank" rel="noopener">leetcode 94. Binary Tree Inorder Traversal</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversalWithStack</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (root != <span class="keyword">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// æ ¹å…ˆè¿› å·¦å­©å­åè¿› å·¦å­©å­å…ˆå‡º æ ¹åå‡º</span></span><br><span class="line">                stack.push(root);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">            root = stack.pop();</span><br><span class="line">            result.add(root.val);</span><br><span class="line">            <span class="comment">// æ ¹ å‡º  å³å­©å­ è¿›</span></span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘çš„ååºéå†ï¼ˆinorder-travelsalï¼‰"><a href="#äºŒå‰æ ‘çš„ååºéå†ï¼ˆinorder-travelsalï¼‰" class="headerlink" title="äºŒå‰æ ‘çš„ååºéå†ï¼ˆinorder travelsalï¼‰"></a>äºŒå‰æ ‘çš„ååºéå†ï¼ˆinorder travelsalï¼‰</h4><p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè®¿é—®èŠ‚ç‚¹çš„å­©å­ï¼Œç„¶åæ˜¯è¯¥èŠ‚ç‚¹ã€‚ï¼ˆå·¦ -&gt; å³ -&gt; æ ¹ï¼‰</p><p><a href="https://leetcode.com/problems/binary-tree-postorder-traversal/" target="_blank" rel="noopener">leetcode 145. Binary Tree Postorder Traversal</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">postorderTraversalWithStack</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">      List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">      <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> result;</span><br><span class="line">      &#125;</span><br><span class="line">      Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack();</span><br><span class="line">      <span class="comment">// æ ¹å…ˆè¿›</span></span><br><span class="line">      stack.push(root);</span><br><span class="line">      <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">          root = stack.pop();</span><br><span class="line">          <span class="comment">// æ’åœ¨listç¬¬0ä½</span></span><br><span class="line">          result.add(<span class="number">0</span>, root.val);</span><br><span class="line">          <span class="comment">// å·¦å­©å­ å…ˆè¿› åå‡º æœ€åæ’åœ¨ ç¬¬0ä½</span></span><br><span class="line">          <span class="keyword">if</span> (root.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">              stack.push(root.left);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// å³å­©å­ åè¿› å…ˆå‡º å…ˆæ’åœ¨ç¬¬0ä½</span></span><br><span class="line">          <span class="keyword">if</span> (root.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">              stack.push(root.right);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ ˆè®¡ç®—ç›´æ–¹å›¾æœ€å¤§é¢ç§¯"><a href="#ä½¿ç”¨æ ˆè®¡ç®—ç›´æ–¹å›¾æœ€å¤§é¢ç§¯" class="headerlink" title="ä½¿ç”¨æ ˆè®¡ç®—ç›´æ–¹å›¾æœ€å¤§é¢ç§¯"></a>ä½¿ç”¨æ ˆè®¡ç®—ç›´æ–¹å›¾æœ€å¤§é¢ç§¯</h3><p><a href="https://leetcode.com/problems/largest-rectangle-in-histogram/" target="_blank" rel="noopener">leetcode 84. Largest Rectangle in Histogram</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">       Stack&lt;Integer&gt; st = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">       <span class="keyword">int</span> maxArea = <span class="number">0</span>, n = heights.length;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; heights.length; i++) &#123;</span><br><span class="line">           <span class="keyword">while</span> (!st.isEmpty() &amp;&amp; heights[st.peek()] &gt;= heights[i]) &#123;</span><br><span class="line">               <span class="keyword">int</span> area = heights[st.pop()] * (st.isEmpty() ? i : i - st.peek() - <span class="number">1</span>);</span><br><span class="line">               maxArea = Math.max(maxArea, area);</span><br><span class="line">           &#125;</span><br><span class="line">           st.push(i);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">while</span> (!st.isEmpty()) &#123;</span><br><span class="line">           <span class="keyword">int</span> area = heights[st.pop()] * (st.isEmpty() ? n : n - st.peek() - <span class="number">1</span>);</span><br><span class="line">           maxArea = Math.max(maxArea, area);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> maxArea;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜¨æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼</title>
      <link href="/2019/06/18/singleton-pattern/"/>
      <url>/2019/06/18/singleton-pattern/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼</h3><p>ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚</p><h3 id="UMLå›¾"><a href="#UMLå›¾" class="headerlink" title="UMLå›¾"></a>UMLå›¾</h3><p><img src="/images/singleton-pattern.png" alt></p><a id="more"></a><h3 id="æ™®é€šå•ä¾‹æ¨¡å¼ä»£ç "><a href="#æ™®é€šå•ä¾‹æ¨¡å¼ä»£ç " class="headerlink" title="æ™®é€šå•ä¾‹æ¨¡å¼ä»£ç "></a>æ™®é€šå•ä¾‹æ¨¡å¼ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/17 13:11:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> çº¿ç¨‹ä¸å®‰å…¨çš„å•ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™åˆ¶äº§ç”Ÿå¤šä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡è¯¥æ–¹æ³•è·å–å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;</span><br><span class="line">            singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼"><a href="#æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼" class="headerlink" title="æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼"></a>æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/17 13:11:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> çº¿ç¨‹ä¸å®‰å…¨çš„å•ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> LazySingleton singleton = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™åˆ¶äº§ç”Ÿå¤šä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    // é€šè¿‡è¯¥æ–¹æ³•è·å–å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">//    public static synchronized LazySingleton getSingleton() &#123;</span></span><br><span class="line"><span class="comment">//        if (singleton == null) &#123;</span></span><br><span class="line"><span class="comment">//            singleton = new LazySingleton();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        return singleton;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡è¯¥æ–¹æ³•è·å–å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LazySingleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    singleton = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼"><a href="#é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼" class="headerlink" title="é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼"></a>é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> iisheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/10/17 13:11:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> çº¿ç¨‹ä¸å®‰å…¨çš„å•ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HungrySingleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HungrySingleton singleton = <span class="keyword">new</span> HungrySingleton();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™åˆ¶äº§ç”Ÿå¤šä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HungrySingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡è¯¥æ–¹æ³•è·å–å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HungrySingleton <span class="title">getSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> â˜ºï¸è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨æ’åºç®—æ³•æ€»ç»“</title>
      <link href="/2019/05/13/sort/"/>
      <url>/2019/05/13/sort/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€å†’æ³¡æ’åº"><a href="#ä¸€ã€å†’æ³¡æ’åº" class="headerlink" title="ä¸€ã€å†’æ³¡æ’åº"></a>ä¸€ã€å†’æ³¡æ’åº</h3><p>ä¸´è¿‘çš„æ•°å­—ä¸¤ä¸¤è¿›è¡Œæ¯”è¾ƒï¼ŒæŒ‰ç…§ä»å°åˆ°å¤§æˆ–è€…ä»å¤§åˆ°å°çš„é¡ºåºäº¤æ¢ï¼Œè¿™æ ·ä¸€è¶Ÿåï¼Œæœ€å¤§æˆ–è€…æœ€å°çš„æ•°å­—è¢«äº¤æ¢åˆ°æœ€åä¸€ä½ã€‚<br>ç„¶åå†ä»å¤´å¼€å§‹ä¸¤ä¸¤è¿›è¡Œæ¯”è¾ƒäº¤æ¢ï¼Œç›´åˆ°æ’åºå®Œæˆã€‚</p><p>ã€€ã€€äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„æ–¹æ³•ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> swap=arr[i];</span><br><span class="line">arr[i]=arr[j];</span><br><span class="line">arr[j]=swap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å†’æ³¡æ’åºç®—æ³•ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = arr.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j + <span class="number">1</span>] &lt; arr[j])</span><br><span class="line">swap(arr, j + <span class="number">1</span>, j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="äºŒã€é€‰æ‹©æ’åº"><a href="#äºŒã€é€‰æ‹©æ’åº" class="headerlink" title="äºŒã€é€‰æ‹©æ’åº"></a>äºŒã€é€‰æ‹©æ’åº</h3><p>ç›´æ¥ä»å¾…é€‰æ‹©æ’åºæ•°ç»„é‡Œé¢é€‰æ‹©ä¸€ä¸ªæœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰çš„æ•°å­—ï¼Œä¸ç¬¬ä¸€ä¸ªä½ç½®çš„æ•°äº¤æ¢ã€‚<br>ç„¶åå†åœ¨å‰©ä¸‹çš„æ•°ä¸­é€‰æ‹©æœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰çš„æ•°å­—ï¼Œä¸ç¬¬äºŒä¸ªä½ç½®çš„æ•°å­—äº¤æ¢ï¼Œå¦‚æ­¤å¾ªç¯åˆ°åªå‰©ä¸‹ä¸€ä¸ªæ•°å­—ä¸ºæ­¢ã€‚</p><p>é€‰æ‹©æ’åºä»£ç å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">selectSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> len = arr.length;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> min = arr[i];</span><br><span class="line"><span class="keyword">int</span> min_index = i;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (arr[j] &lt; min) &#123;</span><br><span class="line">min = arr[j];</span><br><span class="line">min_index = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">swap(arr, min_index, i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€æ’å…¥æ’åº"><a href="#ä¸‰ã€æ’å…¥æ’åº" class="headerlink" title="ä¸‰ã€æ’å…¥æ’åº"></a>ä¸‰ã€æ’å…¥æ’åº</h3><p>ã€€ã€€æ¯ä¸€æ­¥å°†ä¸€ä¸ªå¾…æ’åºæ•°æ®æŒ‰å…¶å¤§å°æ’å…¥åˆ°å·²ç»æ’åºçš„æ•°ç»„ä¸­çš„é€‚å½“ä½ç½®ï¼Œç›´åˆ°å…¨éƒ¨æ’å…¥å®Œæ¯•ã€‚<br>ã€€ã€€æ’å…¥æ’åºä»£ç å®ç°ï¼š<br>ã€€ã€€<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> len = arr.length;</span><br><span class="line"><span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> temp = arr[i];</span><br><span class="line"><span class="keyword">for</span> (j = i; j &gt; <span class="number">0</span> &amp;&amp; temp &lt; arr[j - <span class="number">1</span>]; j--) &#123;</span><br><span class="line">arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">arr[j] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å››ã€å¿«é€Ÿæ’åº"><a href="#å››ã€å¿«é€Ÿæ’åº" class="headerlink" title="å››ã€å¿«é€Ÿæ’åº"></a>å››ã€å¿«é€Ÿæ’åº</h3><p>é€‰æ‹©ä¸€ä¸ªåŸºæœ¬å…ƒç´ ï¼Œé€šå¸¸é€‰æ‹©ç¬¬ä¸€ä¸ªå…ƒç´ æˆ–è€…æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé€šè¿‡ä¸€è¶Ÿæ‰«æï¼Œå°†å¾…æ’åºåˆ—åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ¯”åŸºå‡†å…ƒç´ å°ï¼Œå¦ä¸€éƒ¨åˆ†å¤§äºæˆ–ç­‰äºåŸºå‡†å…ƒç´ ã€‚<br>è¿™ä¸€è¶Ÿæ‰«æç»“æŸåï¼Œè¯¥åŸºå‡†å°±å¤„äºåºåˆ—çš„ä¸­é—´ä½ç½®ã€‚ç„¶åå†ç”¨åŒæ ·çš„æ–¹æ³•é€’å½’çš„æ’åºåˆ’åˆ†è¿™ä¸¤éƒ¨åˆ†ã€‚</p><p>å¿«é€Ÿæ’åºä»£ç å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">recursion(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recursion</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line"><span class="keyword">int</span> pivot = partition(arr, low, high);</span><br><span class="line">recursion(arr, low, pivot - <span class="number">1</span>);</span><br><span class="line">recursion(arr, pivot + <span class="number">1</span>, high);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿”å› åŸºæ•° åœ¨æ•°ç»„ ä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> pivot = arr[low];</span><br><span class="line"><span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line"><span class="keyword">while</span> (low &lt; high &amp;&amp; arr[high] &gt;= pivot)</span><br><span class="line">--high;</span><br><span class="line">arr[low] = arr[high];</span><br><span class="line"><span class="keyword">while</span> (low &lt; high &amp;&amp; arr[low] &lt; pivot)</span><br><span class="line">++low;</span><br><span class="line">arr[high] = arr[low];</span><br><span class="line">&#125;</span><br><span class="line">arr[low] = pivot;</span><br><span class="line"><span class="keyword">return</span> low;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜’ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UMLä¹ç§å›¾å…³ç³»æ€»ç»“</title>
      <link href="/2019/05/06/uml/"/>
      <url>/2019/05/06/uml/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯UML"><a href="#ä»€ä¹ˆæ˜¯UML" class="headerlink" title="ä»€ä¹ˆæ˜¯UML"></a>ä»€ä¹ˆæ˜¯UML</h3><p>UMLæ˜¯Unified Model Languageçš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§å»ºæ¨¡è¯­è¨€ã€‚é€šè¿‡ä½¿ç”¨UMLä½¿å¾—åœ¨è½¯ä»¶å¼€å‘ä¹‹å‰ï¼Œ<br>å¯¹æ•´ä¸ªè½¯ä»¶è®¾è®¡æœ‰æ›´å¥½çš„å¯è¯»æ€§ï¼Œå¯ç†è§£æ€§ï¼Œä»è€Œé™ä½å¼€å‘é£é™©ã€‚åŒæ—¶ï¼Œä¹Ÿèƒ½æ–¹ä¾¿å„ä¸ªå¼€å‘äººå‘˜ä¹‹é—´çš„äº¤æµã€‚</p><h3 id="UMLä¹ç§å›¾"><a href="#UMLä¹ç§å›¾" class="headerlink" title="UMLä¹ç§å›¾"></a>UMLä¹ç§å›¾</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒUMLå›¾åˆ†ä¸ºï¼Œç”¨ä¾‹å›¾ã€é™æ€å›¾ã€äº¤äº’å›¾ã€è¡Œä¸ºå›¾ã€å®ç°å›¾ã€‚é™æ€å›¾åŒ…æ‹¬ç±»å›¾å’Œå¯¹è±¡å›¾ï¼Œ<br>äº¤äº’å›¾åŒ…æ‹¬åºåˆ—å›¾å’Œåä½œå›¾ï¼Œè¡Œä¸ºå›¾åŒ…æ‹¬çŠ¶æ€å›¾å’Œæ´»åŠ¨å›¾ï¼Œå®ç°å›¾åŒ…æ‹¬æ„ä»¶å›¾å’Œéƒ¨ç½²å›¾ã€‚</p><h4 id="ç”¨ä¾‹å›¾"><a href="#ç”¨ä¾‹å›¾" class="headerlink" title="ç”¨ä¾‹å›¾"></a>ç”¨ä¾‹å›¾</h4><pre><code>ã€æ¦‚å¿µã€‘æè¿°ç”¨æˆ·çš„éœ€æ±‚ï¼Œä»ç”¨æˆ·çš„è§’åº¦æè¿°ç³»ç»Ÿçš„åŠŸèƒ½ã€æè¿°æ–¹å¼ã€‘æ¤­åœ†è¡¨ç¤ºæŸä¸ªç”¨ä¾‹ï¼Œäººå½¢ç¬¦å·è¡¨ç¤ºè§’è‰²ã€ç›®çš„ã€‘å¸®åŠ©å¼€å‘å›¢é˜Ÿä»¥ä¸€ç§å¯è§†åŒ–çš„æ–¹å¼ç†è§£ç³»ç»Ÿçš„åŠŸèƒ½éœ€æ±‚</code></pre><a id="more"></a><p><img src="/images/use-case-diagram.png" alt="image"></p><h4 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h4><pre><code>ã€æ¦‚å¿µã€‘æ ¹æ®ç”¨ä¾‹å›¾æŠ½è±¡æˆç±»ï¼Œæè¿°ç±»çš„å†…éƒ¨ç»“æ„å’Œç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»ã€æè¿°æ–¹å¼ã€‘çŸ©å½¢è¡¨ç¤ºç±»æˆ–è€…æ¥å£ï¼Œä¹‹é—´çš„å…³ç³»ä½¿ç”¨ç®­å¤´ã€ä¸‰è§’å½¢å’Œè™šçº¿æˆ–è€…å®çº¿è¡¨ç¤ºã€ç›®çš„ã€‘æ˜¾ç¤ºç³»ç»Ÿçš„é™æ€ç»“æ„ï¼Œè¡¨ç¤ºä¸åŒçš„å®ä½“æ˜¯å¦‚ä½•å…³è”çš„ åœ¨UMLå…³ç³»ä¸­ï¼Œå¸¸è§çš„æœ‰ä¸€ä¸‹å‡ ç§å…³ç³»ã€‚æ³›åŒ–ï¼ˆGeneralizationï¼‰,å®ç°ï¼ˆRealizationï¼‰,å…³è”ï¼ˆAssociationï¼‰,èšåˆï¼ˆAggregationï¼‰,ç»„åˆï¼ˆCompositionï¼‰,ä¾èµ–ï¼ˆDependencyï¼‰</code></pre><h5 id="ã€æ³›åŒ–å…³ç³»ã€‘-æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œè¡¨ç¤ºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºã€‚"><a href="#ã€æ³›åŒ–å…³ç³»ã€‘-æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œè¡¨ç¤ºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºã€‚" class="headerlink" title="ã€æ³›åŒ–å…³ç³»ã€‘:æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œè¡¨ç¤ºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºã€‚"></a>ã€æ³›åŒ–å…³ç³»ã€‘:æ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œè¡¨ç¤ºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºã€‚</h5><h5 id="ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦ä¸‰è§’ç®­å¤´çš„å®ç°çº¿ï¼Œç®­å¤´æŒ‡å‘çˆ¶ç±»ã€‚"><a href="#ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦ä¸‰è§’ç®­å¤´çš„å®ç°çº¿ï¼Œç®­å¤´æŒ‡å‘çˆ¶ç±»ã€‚" class="headerlink" title="ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦ä¸‰è§’ç®­å¤´çš„å®ç°çº¿ï¼Œç®­å¤´æŒ‡å‘çˆ¶ç±»ã€‚"></a>ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦ä¸‰è§’ç®­å¤´çš„å®ç°çº¿ï¼Œç®­å¤´æŒ‡å‘çˆ¶ç±»ã€‚</h5><p><img src="/images/generalization.png" alt="image"></p><h5 id="ã€å®ç°å…³ç³»ã€‘-æ˜¯ä¸€ç§ç±»ä¸æ¥å£çš„å…³ç³»ï¼Œè¡¨ç¤ºç±»æ˜¯æ¥å£æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºçš„å®ç°ã€‚"><a href="#ã€å®ç°å…³ç³»ã€‘-æ˜¯ä¸€ç§ç±»ä¸æ¥å£çš„å…³ç³»ï¼Œè¡¨ç¤ºç±»æ˜¯æ¥å£æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºçš„å®ç°ã€‚" class="headerlink" title="ã€å®ç°å…³ç³»ã€‘:æ˜¯ä¸€ç§ç±»ä¸æ¥å£çš„å…³ç³»ï¼Œè¡¨ç¤ºç±»æ˜¯æ¥å£æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºçš„å®ç°ã€‚"></a>ã€å®ç°å…³ç³»ã€‘:æ˜¯ä¸€ç§ç±»ä¸æ¥å£çš„å…³ç³»ï¼Œè¡¨ç¤ºç±»æ˜¯æ¥å£æ‰€æœ‰ç‰¹å¾å’Œè¡Œä¸ºçš„å®ç°ã€‚</h5><h5 id="ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦ä¸‰è§’ç®­å¤´çš„è™šçº¿ï¼Œç®­å¤´æŒ‡å‘æ¥å£ã€‚"><a href="#ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦ä¸‰è§’ç®­å¤´çš„è™šçº¿ï¼Œç®­å¤´æŒ‡å‘æ¥å£ã€‚" class="headerlink" title="ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦ä¸‰è§’ç®­å¤´çš„è™šçº¿ï¼Œç®­å¤´æŒ‡å‘æ¥å£ã€‚"></a>ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦ä¸‰è§’ç®­å¤´çš„è™šçº¿ï¼Œç®­å¤´æŒ‡å‘æ¥å£ã€‚</h5><p><img src="/images/realization.png" alt="image"></p><h5 id="ã€å…³è”å…³ç³»ã€‘-æ˜¯ä¸€ç§æ‹¥æœ‰å…³ç³»ï¼Œå®ƒä½¿å¾—ä¸€ä¸ªç±»çŸ¥é“å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚"><a href="#ã€å…³è”å…³ç³»ã€‘-æ˜¯ä¸€ç§æ‹¥æœ‰å…³ç³»ï¼Œå®ƒä½¿å¾—ä¸€ä¸ªç±»çŸ¥é“å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚" class="headerlink" title="ã€å…³è”å…³ç³»ã€‘:æ˜¯ä¸€ç§æ‹¥æœ‰å…³ç³»ï¼Œå®ƒä½¿å¾—ä¸€ä¸ªç±»çŸ¥é“å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚"></a>ã€å…³è”å…³ç³»ã€‘:æ˜¯ä¸€ç§æ‹¥æœ‰å…³ç³»ï¼Œå®ƒä½¿å¾—ä¸€ä¸ªç±»çŸ¥é“å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚</h5><h5 id="ã€ä»£ç ä½“ç°ã€‘-æˆå‘˜å˜é‡"><a href="#ã€ä»£ç ä½“ç°ã€‘-æˆå‘˜å˜é‡" class="headerlink" title="ã€ä»£ç ä½“ç°ã€‘:æˆå‘˜å˜é‡"></a>ã€ä»£ç ä½“ç°ã€‘:æˆå‘˜å˜é‡</h5><h5 id="ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦æ™®é€šç®­å¤´çš„å®çº¿ï¼ŒæŒ‡å‘è¢«æ‹¥æœ‰è€…ã€‚åŒå‘çš„å…³è”å¯ä»¥æœ‰ä¸¤ä¸ªç®­å¤´ï¼Œæˆ–è€…æ²¡æœ‰ç®­å¤´ã€‚å•å‘çš„å…³è”æœ‰ä¸€ä¸ªç®­å¤´ã€‚"><a href="#ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦æ™®é€šç®­å¤´çš„å®çº¿ï¼ŒæŒ‡å‘è¢«æ‹¥æœ‰è€…ã€‚åŒå‘çš„å…³è”å¯ä»¥æœ‰ä¸¤ä¸ªç®­å¤´ï¼Œæˆ–è€…æ²¡æœ‰ç®­å¤´ã€‚å•å‘çš„å…³è”æœ‰ä¸€ä¸ªç®­å¤´ã€‚" class="headerlink" title="ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦æ™®é€šç®­å¤´çš„å®çº¿ï¼ŒæŒ‡å‘è¢«æ‹¥æœ‰è€…ã€‚åŒå‘çš„å…³è”å¯ä»¥æœ‰ä¸¤ä¸ªç®­å¤´ï¼Œæˆ–è€…æ²¡æœ‰ç®­å¤´ã€‚å•å‘çš„å…³è”æœ‰ä¸€ä¸ªç®­å¤´ã€‚"></a>ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦æ™®é€šç®­å¤´çš„å®çº¿ï¼ŒæŒ‡å‘è¢«æ‹¥æœ‰è€…ã€‚åŒå‘çš„å…³è”å¯ä»¥æœ‰ä¸¤ä¸ªç®­å¤´ï¼Œæˆ–è€…æ²¡æœ‰ç®­å¤´ã€‚å•å‘çš„å…³è”æœ‰ä¸€ä¸ªç®­å¤´ã€‚</h5><p><img src="/images/association.png" alt="image"></p><h5 id="ã€èšåˆå…³ç³»ã€‘-æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä¸”éƒ¨åˆ†å¯ä»¥ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ã€‚èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯å¼ºçš„å…³è”å…³ç³»ï¼›å…³è”å’Œèšåˆåœ¨è¯­æ³•ä¸Šæ— æ³•åŒºåˆ†ï¼Œå¿…é¡»è€ƒå¯Ÿå…·ä½“çš„é€»è¾‘å…³æœºã€‚"><a href="#ã€èšåˆå…³ç³»ã€‘-æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä¸”éƒ¨åˆ†å¯ä»¥ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ã€‚èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯å¼ºçš„å…³è”å…³ç³»ï¼›å…³è”å’Œèšåˆåœ¨è¯­æ³•ä¸Šæ— æ³•åŒºåˆ†ï¼Œå¿…é¡»è€ƒå¯Ÿå…·ä½“çš„é€»è¾‘å…³æœºã€‚" class="headerlink" title="ã€èšåˆå…³ç³»ã€‘:æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä¸”éƒ¨åˆ†å¯ä»¥ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ã€‚èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯å¼ºçš„å…³è”å…³ç³»ï¼›å…³è”å’Œèšåˆåœ¨è¯­æ³•ä¸Šæ— æ³•åŒºåˆ†ï¼Œå¿…é¡»è€ƒå¯Ÿå…·ä½“çš„é€»è¾‘å…³æœºã€‚"></a>ã€èšåˆå…³ç³»ã€‘:æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä¸”éƒ¨åˆ†å¯ä»¥ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ã€‚èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯å¼ºçš„å…³è”å…³ç³»ï¼›å…³è”å’Œèšåˆåœ¨è¯­æ³•ä¸Šæ— æ³•åŒºåˆ†ï¼Œå¿…é¡»è€ƒå¯Ÿå…·ä½“çš„é€»è¾‘å…³æœºã€‚</h5><h5 id="ã€ä»£ç ä½“ç°ã€‘-æˆå‘˜å˜é‡-1"><a href="#ã€ä»£ç ä½“ç°ã€‘-æˆå‘˜å˜é‡-1" class="headerlink" title="ã€ä»£ç ä½“ç°ã€‘:æˆå‘˜å˜é‡"></a>ã€ä»£ç ä½“ç°ã€‘:æˆå‘˜å˜é‡</h5><h5 id="ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦ç©ºå¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œç©ºå¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚"><a href="#ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦ç©ºå¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œç©ºå¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚" class="headerlink" title="ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦ç©ºå¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œç©ºå¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚"></a>ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦ç©ºå¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œç©ºå¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚</h5><p><img src="/images/aggregation.png" alt="image"></p><h5 id="ã€ç»„åˆå…³ç³»ã€‘-æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä½†éƒ¨åˆ†ä¸èƒ½ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ï¼Œç»„åˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯æ¯”èšåˆå…³ç³»è¿˜è¦å¼ºçš„å…³ç³»ã€‚"><a href="#ã€ç»„åˆå…³ç³»ã€‘-æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä½†éƒ¨åˆ†ä¸èƒ½ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ï¼Œç»„åˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯æ¯”èšåˆå…³ç³»è¿˜è¦å¼ºçš„å…³ç³»ã€‚" class="headerlink" title="ã€ç»„åˆå…³ç³»ã€‘:æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä½†éƒ¨åˆ†ä¸èƒ½ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ï¼Œç»„åˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯æ¯”èšåˆå…³ç³»è¿˜è¦å¼ºçš„å…³ç³»ã€‚"></a>ã€ç»„åˆå…³ç³»ã€‘:æ˜¯ä¸€ç§æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚ä½†éƒ¨åˆ†ä¸èƒ½ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨ï¼Œç»„åˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ä¸€ç§ï¼Œæ˜¯æ¯”èšåˆå…³ç³»è¿˜è¦å¼ºçš„å…³ç³»ã€‚</h5><h5 id="ã€ä»£ç ä½“ç°ã€‘-æˆå‘˜å˜é‡-2"><a href="#ã€ä»£ç ä½“ç°ã€‘-æˆå‘˜å˜é‡-2" class="headerlink" title="ã€ä»£ç ä½“ç°ã€‘:æˆå‘˜å˜é‡"></a>ã€ä»£ç ä½“ç°ã€‘:æˆå‘˜å˜é‡</h5><h5 id="ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦å®å¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œå®å¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚"><a href="#ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦å®å¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œå®å¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚" class="headerlink" title="ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦å®å¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œå®å¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚"></a>ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦å®å¿ƒè±å½¢å’Œæ™®é€šç®­å¤´çš„å®çº¿ï¼Œå®å¿ƒè±å½¢æŒ‡å‘æ•´ä½“ï¼Œæ™®é€šç®­å¤´æŒ‡å‘éƒ¨åˆ†ã€‚</h5><p><img src="/images/composition.png" alt="image"></p><h5 id="ã€ä¾èµ–å…³ç³»ã€‘-æ˜¯ä¸€ç§ä½¿ç”¨å…³ç³»ï¼Œå³ä¸€ä¸ªç±»çš„å®ç°éœ€è¦å¦ä¸€ä¸ªç±»çš„ååŠ©ã€‚"><a href="#ã€ä¾èµ–å…³ç³»ã€‘-æ˜¯ä¸€ç§ä½¿ç”¨å…³ç³»ï¼Œå³ä¸€ä¸ªç±»çš„å®ç°éœ€è¦å¦ä¸€ä¸ªç±»çš„ååŠ©ã€‚" class="headerlink" title="ã€ä¾èµ–å…³ç³»ã€‘:æ˜¯ä¸€ç§ä½¿ç”¨å…³ç³»ï¼Œå³ä¸€ä¸ªç±»çš„å®ç°éœ€è¦å¦ä¸€ä¸ªç±»çš„ååŠ©ã€‚"></a>ã€ä¾èµ–å…³ç³»ã€‘:æ˜¯ä¸€ç§ä½¿ç”¨å…³ç³»ï¼Œå³ä¸€ä¸ªç±»çš„å®ç°éœ€è¦å¦ä¸€ä¸ªç±»çš„ååŠ©ã€‚</h5><h5 id="ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦æ™®é€šç®­å¤´çš„è™šçº¿ï¼Œæ™®é€šç®­å¤´æŒ‡å‘è¢«ä½¿ç”¨è€…ã€‚"><a href="#ã€ç®­å¤´æŒ‡å‘ã€‘-å¸¦æ™®é€šç®­å¤´çš„è™šçº¿ï¼Œæ™®é€šç®­å¤´æŒ‡å‘è¢«ä½¿ç”¨è€…ã€‚" class="headerlink" title="ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦æ™®é€šç®­å¤´çš„è™šçº¿ï¼Œæ™®é€šç®­å¤´æŒ‡å‘è¢«ä½¿ç”¨è€…ã€‚"></a>ã€ç®­å¤´æŒ‡å‘ã€‘:å¸¦æ™®é€šç®­å¤´çš„è™šçº¿ï¼Œæ™®é€šç®­å¤´æŒ‡å‘è¢«ä½¿ç”¨è€…ã€‚</h5><p><img src="/images/dependency.png" alt="image"></p><h4 id="å¯¹è±¡å›¾"><a href="#å¯¹è±¡å›¾" class="headerlink" title="å¯¹è±¡å›¾"></a>å¯¹è±¡å›¾</h4><pre><code>ã€æ¦‚å¿µã€‘ç±»å›¾çš„ä¸€ä¸ªå®ä¾‹ï¼Œæè¿°ç³»ç»Ÿåœ¨å…·ä½“æ—¶é—´ç‚¹ä¸Šæ‰€åŒ…å«çš„å¯¹è±¡ä»¥åŠå„ä¸ªå¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€æè¿°æ–¹å¼ã€‘ç”±å¯¹è±¡ï¼ˆObjectï¼‰å’Œé“¾(Link)ç»„æˆã€ç›®çš„ã€‘æ˜¾ç¤ºç³»ç»Ÿçš„é™æ€ç»“æ„ï¼Œè¡¨ç¤ºä¸åŒçš„å®ä¾‹æ˜¯å¦‚ä½•å…³è”çš„</code></pre><p><img src="/images/object-diagram.png" alt="image"></p><h4 id="åºåˆ—å›¾-ä¹Ÿå«-æ—¶åºå›¾-é¡ºåºå›¾"><a href="#åºåˆ—å›¾-ä¹Ÿå«-æ—¶åºå›¾-é¡ºåºå›¾" class="headerlink" title="åºåˆ—å›¾ ä¹Ÿå« æ—¶åºå›¾ é¡ºåºå›¾"></a>åºåˆ—å›¾ ä¹Ÿå« æ—¶åºå›¾ é¡ºåºå›¾</h4><pre><code>ã€æ¦‚å¿µã€‘æè¿°å¯¹è±¡ä¹‹é—´çš„äº¤äº’é¡ºåºï¼Œä¸»è¦æç°å¯¹è±¡é—´æ¶ˆæ¯ä¼ é€’çš„æ—¶é—´å…ˆåé¡ºåºï¼ˆæ—¶é—´ï¼‰ã€æè¿°æ–¹å¼ã€‘ã€ç›®çš„ã€‘æ˜¾ç¤ºæµç¨‹ä¸­ä¸åŒå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨å…³ç³»</code></pre><p><img src="/images/sequence-diagram.png" alt="image"></p><h4 id="åä½œå›¾-ä¹Ÿå«ä½œé€šè®¯å›¾"><a href="#åä½œå›¾-ä¹Ÿå«ä½œé€šè®¯å›¾" class="headerlink" title="åä½œå›¾ ä¹Ÿå«ä½œé€šè®¯å›¾"></a>åä½œå›¾ ä¹Ÿå«ä½œé€šè®¯å›¾</h4><pre><code>ã€æ¦‚å¿µã€‘æè¿°äº†æ”¶å‘æ¶ˆæ¯çš„å¯¹è±¡çš„ç»„ç»‡å…³ç³»ï¼Œå¼ºè°ƒå¯¹è±¡ä¹‹é—´çš„åˆä½œå…³ç³»ï¼ˆç©ºé—´ï¼‰ã€æè¿°æ–¹å¼ã€‘ã€ç›®çš„ã€‘æ˜¾ç¤ºç©ºé—´ä¸­ä¸åŒå¯¹è±¡çš„è°ƒç”¨å…³ç³»</code></pre><p><img src="/images/communication-diagram.png" alt="image"></p><h4 id="çŠ¶æ€å›¾"><a href="#çŠ¶æ€å›¾" class="headerlink" title="çŠ¶æ€å›¾"></a>çŠ¶æ€å›¾</h4><pre><code>ã€æ¦‚å¿µã€‘æè¿°å¯¹è±¡çš„æ‰€æœ‰çŠ¶æ€ä»¥åŠäº‹ä»¶å‘ç”Ÿè€Œå¼•èµ·çš„çŠ¶æ€ä¹‹é—´çš„è½¬ç§»ã€æè¿°æ–¹å¼ã€‘ã€ç›®çš„ã€‘è¡¨ç¤ºæŸä¸ªç±»æ‰€å¤„çš„ä¸åŒçŠ¶æ€ä»¥åŠè¯¥ç±»åœ¨è¿™äº›çŠ¶æ€ä¸­çš„è½¬æ¢è¿‡ç¨‹</code></pre><p><img src="/images/state-machine-diagram.png" alt="iamge"></p><h4 id="æ´»åŠ¨å›¾"><a href="#æ´»åŠ¨å›¾" class="headerlink" title="æ´»åŠ¨å›¾"></a>æ´»åŠ¨å›¾</h4><pre><code>ã€æ¦‚å¿µã€‘æè¿°æ»¡è¶³ç”¨ä¾‹è¦æ±‚æ‰€è¦è¿›è¡Œçš„æ´»åŠ¨ä»¥åŠæ´»åŠ¨æ—¶é—´çš„çº¦æŸå…³ç³»ã€æè¿°æ–¹å¼ã€‘è¡¨ç¤ºä¸¤ä¸ªæˆ–è€…å¤šä¸ªå¯¹è±¡ä¹‹é—´åœ¨å¤„ç†æŸä¸ªæ´»åŠ¨æ—¶çš„è¿‡ç¨‹æ§åˆ¶æµç¨‹ã€ç›®çš„ã€‘</code></pre><p><img src="/images/activity-diagram.png" alt="iamge"></p><h4 id="æ„å»ºå›¾"><a href="#æ„å»ºå›¾" class="headerlink" title="æ„å»ºå›¾"></a>æ„å»ºå›¾</h4><pre><code>ã€æ¦‚å¿µã€‘æè¿°ä»£ç æ„å»ºçš„ç‰©ç†ç»“æ„ä»¥åŠå„ç»“æ„ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€æè¿°æ–¹å¼ã€‘ã€ç›®çš„ã€‘æä¾›ç³»ç»Ÿçš„ç‰©ç†è§†å›¾ï¼Œæ ¹æ®ç³»ç»Ÿçš„ä»£ç æ„å»ºæ˜¾ç¤ºç³»ç»Ÿä»£ç çš„æ•´ä¸ªç‰©ç†ç»“æ„</code></pre><p><img src="/images/component-diagram.png" alt="iamge"></p><h4 id="éƒ¨ç½²å›¾"><a href="#éƒ¨ç½²å›¾" class="headerlink" title="éƒ¨ç½²å›¾"></a>éƒ¨ç½²å›¾</h4><pre><code>ã€æ¦‚å¿µã€‘ç³»ç»Ÿä¸­ç¡¬ä»¶çš„ç‰©ç†ä½“ç³»ç»“æ„ã€æè¿°æ–¹å¼ã€‘ã€ç›®çš„ã€‘æ˜¾ç¤ºç³»ç»Ÿçš„ç¡¬ä»¶å’Œè½¯ä»¶çš„ç‰©ç†ç»“æ„</code></pre><p><img src="/images/deployment-diagram.png" alt="iamge"></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ™„è®¾è®¡æ€æƒ³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisåŸºç¡€çŸ¥è¯†</title>
      <link href="/2019/04/29/redis/"/>
      <url>/2019/04/29/redis/</url>
      
        <content type="html"><![CDATA[<h3 id="RedisåŸºæœ¬æ•°æ®ç±»å‹"><a href="#RedisåŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="RedisåŸºæœ¬æ•°æ®ç±»å‹"></a>RedisåŸºæœ¬æ•°æ®ç±»å‹</h3><h4 id="Binary-safe-strings"><a href="#Binary-safe-strings" class="headerlink" title="Binary-safe strings"></a>Binary-safe strings</h4><p>string ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„.æ„æ€æ˜¯redisçš„stringå¯ä»¥åŒ…å«ä»»æ„æ•°æ®,æ¯”å¦‚jgpå›¾ç‰‡æˆ–è€…å·²ç»åºåˆ—åŒ–çš„çš„å¯¹è±¡.</p><h4 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h4><p>å®è´¨æ˜¯æ¯ä¸€ä¸ªéƒ½æ˜¯stringç±»å‹çš„åŒå‘é“¾è¡¨,pushå’Œpopçš„å‘½ä»¤ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1),listè¿˜ä¼šè®°å½•é“¾è¡¨çš„é•¿åº¦,æ‰€ä»¥llenæ“ä½œä¹Ÿæ˜¯O(1).</p><h4 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a>Sets</h4><p>æ˜¯stringç±»å‹çš„æ— åºé›†åˆ.setæ˜¯é€šè¿‡ hash tableå®ç°çš„,æ‰€ä»¥æ·»åŠ ,æŸ¥æ‰¾,åˆ é™¤çš„å¤æ‚åº¦éƒ½æ˜¯O(1),hash table ä¼šéšç€æ·»åŠ æˆ–è€…åˆ é™¤è‡ªåŠ¨è°ƒæ•´å¤§å°.</p><h4 id="Sorted-sets"><a href="#Sorted-sets" class="headerlink" title="Sorted sets"></a>Sorted sets</h4><p>sorted sets ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„score,å…ƒç´ é¡ºåºæœ‰scoreå†³å®š.sorted setsçš„å®ç°æ˜¯skip listå’Œhash tableçš„æ··åˆä½“.</p><a id="more"></a><h4 id="Hashes"><a href="#Hashes" class="headerlink" title="Hashes"></a>Hashes</h4><p>æ˜¯stringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨.å®ƒçš„æ·»åŠ å’Œåˆ é™¤éƒ½æ˜¯O(1).hashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡</p><h4 id="Bit-arrays"><a href="#Bit-arrays" class="headerlink" title="Bit arrays"></a>Bit arrays</h4><p>å¯ä»¥ç”¨ç‰¹æ®Šçš„å‘½ä»¤,å¤„ç†stringçš„value,åƒå¤„ç†ä¸€ä¸ªä½æ•°ç»„ä¸€æ ·</p><h4 id="HyperLogLogs"><a href="#HyperLogLogs" class="headerlink" title="HyperLogLogs"></a>HyperLogLogs</h4><p>å®ƒæ˜¯ä¸€ä¸ªæ¦‚ç‡æ•°æ®åº“.(ç”¨äºä¼°ç®—é›†åˆçš„åŸºæ•°)</p><h3 id="Redis-åŸºæœ¬å‘½ä»¤"><a href="#Redis-åŸºæœ¬å‘½ä»¤" class="headerlink" title="Redis åŸºæœ¬å‘½ä»¤"></a>Redis åŸºæœ¬å‘½ä»¤</h3><h4 id="æ“ä½œstringçš„å‘½ä»¤"><a href="#æ“ä½œstringçš„å‘½ä»¤" class="headerlink" title="æ“ä½œstringçš„å‘½ä»¤"></a>æ“ä½œstringçš„å‘½ä»¤</h4><ul><li>set key value</li><li>get key value</li><li>mset key1 value1 key2 value2</li><li><p>mget key1 key2</p></li><li><p>incr key å¯¹å€¼åšåŠ åŠ ,è¿”å›æ–°çš„å€¼(å¯¹ä¸å­˜åœ¨çš„keyè¿”å›1,å¯¹éintkeyä¼šæŠ¥é”™)</p></li><li>decr key å¯¹å€¼åšå‡å‡,è¿”å›æ–°çš„å€¼(å¯¹ä¸å­˜åœ¨çš„keyè¿”å›1,å¯¹éintkeyä¼šæŠ¥é”™)</li><li>incrby key integer åŠ æŒ‡å®šå€¼(keyä¸å­˜åœ¨ä¼šè®¤ä¸º,åŸæ¥çš„valueä¸º0)</li><li>decrby key integer å‡æŒ‡å®šå€¼(keyä¸å­˜åœ¨ä¼šè®¤ä¸º,åŸæ¥çš„valueä¸º0)</li><li>append key value ç»™æŒ‡å®škeyçš„å­—ç¬¦ä¸²è¿½åŠ value</li><li>substr key start end è¿”å›æˆªå–è¿‡çš„keyçš„å­—ç¬¦ä¸²å€¼,æ³¨æ„å¹¶ä¸ä¿®æ”¹key,ä¸‹æ ‡ä»0å¼€å§‹,åŒºé—´å‰é—­åé—­</li></ul><h4 id="æ“ä½œlistçš„å‘½ä»¤"><a href="#æ“ä½œlistçš„å‘½ä»¤" class="headerlink" title="æ“ä½œlistçš„å‘½ä»¤"></a>æ“ä½œlistçš„å‘½ä»¤</h4><ul><li>lpush key string åœ¨keyå¯¹åº”çš„å¤´éƒ¨æ·»åŠ å­—ç¬¦ä¸²å…ƒç´ ,è¿”å›1ä»£è¡¨æˆåŠŸ,è¿”å›0è¡¨ç¤ºkeyå­˜åœ¨ä¸”ä¸æ˜¯listç±»å‹</li><li>rpush key string åœ¨keyå¯¹åº”çš„å°¾éƒ¨æ·»åŠ å­—ç¬¦ä¸²å…ƒç´ ,è¿”å›1ä»£è¡¨æˆåŠŸ</li><li>lpop key ä»listçš„å¤´éƒ¨åˆ é™¤å…ƒç´ ,å¹¶è¿”å›åˆ é™¤çš„å…ƒç´ ,å¦‚æœlistä¸å­˜åœ¨æˆ–ä¸ºç©ºè¿”å›nil,å¦‚æœä¸æ˜¯listè¿”å›é”™è¯¯</li><li>rpop key åŒä¸Š,ä½†æ˜¯ä»å°¾éƒ¨åˆ é™¤</li><li>llen key è¿”å›keyå¯¹åº”listçš„é•¿åº¦,keyä¸å­˜åœ¨è¿”å›0,å¦‚æœkeyå¯¹åº”çš„ä¸æ˜¯listè¿”å›é”™è¯¯</li><li>lrange key start end è¿”å›æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ,ä¸‹æ ‡ä»0å¼€å§‹,è´Ÿå€¼è¡¨ç¤ºä»åé¢è®¡ç®—,-1è¡¨ç¤ºå€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ ,keyä¸å­˜åœ¨è¿”å›ç©ºåˆ—è¡¨</li><li>ltrim key start end æˆªå–list,ä¿ç•™æŒ‡å®šåŒºé—´å†…å…ƒç´ ,æˆåŠŸè¿”å›1,keyä¸å­˜åœ¨è¿”å›é”™è¯¯</li><li>lset key index value è®¾ç½®listä¸­æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ å€¼,æˆåŠŸè¿”å›1,keyæˆ–è€…ä¸‹æ ‡ä¸å­˜åœ¨è¿”å›é”™è¯¯</li><li>linsert key before value value2åœ¨å€¼valueå‰æ’å…¥å€¼value2</li></ul><h4 id="æ“ä½œsetsçš„å‘½ä»¤"><a href="#æ“ä½œsetsçš„å‘½ä»¤" class="headerlink" title="æ“ä½œsetsçš„å‘½ä»¤"></a>æ“ä½œsetsçš„å‘½ä»¤</h4><ul><li>saad key value æ·»åŠ ä¸€ä¸ªstringå…ƒç´ åˆ°keyå¯¹åº”çš„seté›†åˆ,æˆåŠŸè¿”å›1,å¦‚æœå…ƒç´ å·²ç»åœ¨å…ƒç´ ä¸­è¿”å›0,å¯ä»¥å¯¹åº”çš„setä¸å­˜åœ¨è¿”å›é”™è¯¯</li><li>srem key value ä»keyå¯¹åº”setä¸­ç§»é™¤ç»™å®šå…ƒç´ ,æˆåŠŸè¿”å›1,å¦‚æœvalueåœ¨é›†åˆä¸­ä¸å­˜åœ¨æˆ–è€…keyä¸å­˜åœ¨è¿”å›0,keyå¯¹åº”çš„ä¸æ˜¯setç±»å‹è¿”å›é”™è¯¯</li><li>spop åˆ é™¤å¹¶è¿”å›setä¸­ä¸€ä¸ªéšæœºå…ƒç´ ,å¦‚æœsetæ˜¯ç©ºæˆ–è€…keyä¸å­˜åœ¨è¿”å›nil</li><li>srandommembe key åŒ spop,ä½†æ˜¯ä¸åˆ é™¤å…ƒç´ </li></ul><h4 id="æ“ä½œsorted-setsçš„å‘½ä»¤"><a href="#æ“ä½œsorted-setsçš„å‘½ä»¤" class="headerlink" title="æ“ä½œsorted setsçš„å‘½ä»¤"></a>æ“ä½œsorted setsçš„å‘½ä»¤</h4><ul><li>zadd key score member æ·»åŠ å…ƒç´ åˆ°é›†åˆ,å½“memberå·²å­˜åœ¨,æ›´æ–°score</li><li>zrem key member åˆ é™¤æŒ‡å®šå…ƒç´ ,1è¡¨ç¤ºæˆåŠŸ,å¦‚æœä¸æˆåŠŸè¿”å›0</li></ul><h4 id="æ“ä½œhashesçš„å‘½ä»¤"><a href="#æ“ä½œhashesçš„å‘½ä»¤" class="headerlink" title="æ“ä½œhashesçš„å‘½ä»¤"></a>æ“ä½œhashesçš„å‘½ä»¤</h4><ul><li>hset key field value è®¾ç½®hash field ä¸ºæŒ‡å®šå€¼,å¦‚æœkeyä¸å­˜åœ¨åˆ™å…ˆåˆ›å»º</li><li>hget key field è·å–æŒ‡å®šhashçš„hash field</li></ul><h3 id="Redisé«˜çº§ç‰¹æ€§"><a href="#Redisé«˜çº§ç‰¹æ€§" class="headerlink" title="Redisé«˜çº§ç‰¹æ€§"></a>Redisé«˜çº§ç‰¹æ€§</h3><h4 id="å®‰å…¨æ€§"><a href="#å®‰å…¨æ€§" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h4><p>è®¾ç½®rediså¯†ç ,å¯ä»¥é…ç½®redis.confä¹Ÿå¯ä»¥ç›´æ¥åœ¨redis-cliä¸­è®¾ç½®<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config set requirepass ******</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹redisæ˜¯å¦è®¾ç½®å¯†ç <br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config get requirepass</span><br></pre></td></tr></table></figure></p><h4 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h4><p>Redisä¸»ä»å¤åˆ¶è¿‡ç¨‹:</p><ul><li>slaveå’Œmasterå»ºç«‹è¿æ¥,å‘é€syncåŒæ­¥å‘½ä»¤</li><li>masterä¼šå¯åŠ¨ä¸€ä¸ªåå°çº¿ç¨‹,å°†æ•°æ®åº“çº¿ç¨‹ä¿å­˜åˆ°æ–‡ä»¶ä¸­,åŒæ—¶masterä¸»çº¿ç¨‹ä¼šå¼€å§‹æ”¶é›†æ–°çš„å†™å‘½ä»¤ç¼“å­˜.</li><li>åå°å®Œæˆä¿å­˜å,å°±å°†æ­¤æ–‡ä»¶å‘é€ç»™slave</li><li>slaveå°†æ­¤æ–‡ä»¶ä¿å­˜åˆ°ç¡¬ç›˜ä¸Š</li></ul><h4 id="äº‹åŠ¡å¤„ç†"><a href="#äº‹åŠ¡å¤„ç†" class="headerlink" title="äº‹åŠ¡å¤„ç†"></a>äº‹åŠ¡å¤„ç†</h4><ul><li><p>rediså¯¹äº‹åŠ¡çš„æ”¯æŒæ¯”è¾ƒç®€å•,redisåªèƒ½ä¿è¯ä¸€ä¸ªclientå‘èµ·çš„äº‹åŠ¡ä¸­çš„å‘½ä»¤å¯ä»¥è¿ç»­æ‰§è¡Œ,è€Œä¸­é—´ä¸ä¼šæ’å…¥å…¶ä»–çš„clientå‘½ä»¤.å½“ä¸€ä¸ªclientåœ¨å‘å‡ºmultiå‘½ä»¤æ—¶,è¿™ä¸ªè¿æ¥ä¼šè¿›å…¥ä¸€ä¸ªäº‹åŠ¡çš„ä¸Šä¸‹æ–‡,è¿ç»­åç»­å‘½ä»¤ä¸ä¼šç«‹å³æ‰§è¡Œ,è€Œæ˜¯å…ˆæ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­,å½“æ‰§è¡Œexecå‘½ä»¤æ—¶,redisä¼šé¡ºåºæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å‘½ä»¤.</p></li><li><p>redisåœ¨äº‹åŠ¡ä¸­å‘ç”Ÿé”™è¯¯ä¸ä¼šå›æ»š.</p></li></ul><h4 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h4><p>redisæä¾›äº†ä¸€ç³»åˆ—ä¸åŒçš„æŒä¹…åŒ–é€‰é¡¹:</p><ul><li>RDBæŒä¹…åŒ–æ–¹å¼ä¼šåœ¨ä¸€ä¸ªç‰¹å®šçš„é—´éš”ä¿å­˜é‚£ä¸ªæ—¶é—´ç‚¹çš„ä¸€ä¸ªæ•°æ®å¿«ç…§.</li><li>AOFæŒä¹…åŒ–æ–¹å¼åˆ™ä¼šè®°å½•æ¯ä¸€ä¸ªæœåŠ¡å™¨æ”¶åˆ°çš„å†™æ“ä½œã€‚åœ¨æœåŠ¡å¯åŠ¨æ—¶ï¼Œè¿™äº›è®°å½•çš„æ“ä½œä¼šé€æ¡æ‰§è¡Œä»è€Œé‡å»ºå‡ºåŸæ¥çš„æ•°æ®ã€‚å†™æ“ä½œå‘½ä»¤è®°å½•çš„æ ¼å¼è·ŸRedisåè®®ä¸€è‡´ï¼Œä»¥è¿½åŠ çš„æ–¹å¼è¿›è¡Œä¿å­˜.</li></ul><h4 id="å‘å¸ƒè®¢é˜…æ¶ˆæ¯"><a href="#å‘å¸ƒè®¢é˜…æ¶ˆæ¯" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¶ˆæ¯"></a>å‘å¸ƒè®¢é˜…æ¶ˆæ¯</h4><p>å‘å¸ƒè®¢é˜…ï¼ˆpub/subï¼‰æ˜¯ä¸€ç§æ¶ˆæ¯é€šçŸ¥æ¨¡å¼ï¼Œä¸»è¦çš„ç›®çš„æ˜¯æˆªé™¤æ¶ˆæ¯å‘å¸ƒè€…å’Œæ¶ˆæ¯è®¢é˜…è€…ä¹‹é—´çš„è€¦åˆï¼ŒRedisä½œä¸ºä¸€ä¸ªpub/subçš„serverï¼Œåœ¨è®¢é˜…è€…å’Œå‘å¸ƒè€…ä¹‹é—´èµ·åˆ°äº†æ¶ˆæ¯è·¯ç”±çš„åŠŸèƒ½ã€‚è®¢é˜…è€…å¯ä»¥é€šè¿‡subscribeå’Œpsubscribeå‘½ä»¤å‘redis serverè®¢é˜…è‡ªå·±æ„Ÿå…´è¶£çš„æ¶ˆæ¯ç±»å‹ï¼Œrediså°†æ¶ˆæ¯ç±»å‹ç§°ä¸ºé€šé“ï¼ˆchannelï¼‰.å½“å‘å¸ƒè€…é€šè¿‡publishå‘½ä»¤å‘redis serverå‘é€ç‰¹å®šç±»å‹çš„ä¿¡æ¯æ—¶ï¼Œè®¢é˜…è¯¥ä¿¡æ¯ç±»å‹çš„å…¨éƒ¨clientéƒ½ä¼šæ”¶åˆ°æ­¤æ¶ˆæ¯.</p><h4 id="è™šæ‹Ÿå†…å­˜"><a href="#è™šæ‹Ÿå†…å­˜" class="headerlink" title="è™šæ‹Ÿå†…å­˜"></a>è™šæ‹Ÿå†…å­˜</h4><p>Redisçš„è™šæ‹Ÿå†…å­˜ä¸æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜ä¸æ˜¯ä¸€å›äº‹ï¼Œä½†æ˜¯æ€è·¯å’Œç›®çš„éƒ½æ˜¯ç›¸åŒçš„.å°±æ˜¯æš‚æ—¶æŠŠä¸ç»å¸¸è®¿é—®çš„æ•°æ®ä»å†…å­˜äº¤æ¢åˆ°ç£ç›˜ä¸­ï¼Œä»è€Œè…¾å‡ºå®è´µçš„å†…å­˜ç©ºé—´ç”¨äºå…¶ä»–éœ€è¦è®¿é—®çš„æ•°æ®.å°¤å…¶æ˜¯å¯¹äºredisè¿™æ ·çš„å†…å­˜æ•°æ®åº“ï¼Œå†…å­˜æ€»æ˜¯ä¸å¤Ÿç”¨çš„.é™¤äº†å¯ä»¥å°†æ•°æ®åˆ†å‰²åˆ°å¤šä¸ªredis serverå¤–.å¦å¤–èƒ½å¤Ÿæé«˜æ•°æ®åº“å®¹é‡çš„åŠæ³•å°±æ˜¯ä½¿ç”¨è™šæ‹Ÿå†…å­˜æŠŠé‚£äº›ä¸ç»å¸¸è®¿é—®çš„æ•°æ®äº¤æ¢åˆ°ç£ç›˜ä¸Š.</p><h3 id="Redisé›†æˆSpring-Boot"><a href="#Redisé›†æˆSpring-Boot" class="headerlink" title="Redisé›†æˆSpring Boot"></a>Redisé›†æˆSpring Boot</h3><p>pomæ–‡ä»¶æ·»åŠ redisä¾èµ–<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- redis --&gt;  </span><br><span class="line">&lt;dependency&gt;  </span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  </span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-redis&lt;/artifactId&gt; </span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p><p>application.propertieså¢åŠ redisç›¸å…³å±æ€§<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#redis  </span><br><span class="line">spring.redis.hostName=goodgoodstate.me</span><br><span class="line">spring.redis.port=<span class="number">6379</span>    </span><br><span class="line">spring.redis.password=xxx  </span><br><span class="line">spring.redis.pool.maxActive=<span class="number">8</span>    </span><br><span class="line">spring.redis.pool.maxWait=-<span class="number">1</span>    </span><br><span class="line">spring.redis.pool.maxIdle=<span class="number">8</span>    </span><br><span class="line">spring.redis.pool.minIdle=<span class="number">0</span>    </span><br><span class="line">spring.redis.timeout=<span class="number">0</span></span><br></pre></td></tr></table></figure></p><p>é…ç½®ç±»<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(value =&#123; StringRedisTemplate.class, RedisTemplate.class&#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> StringRedisTemplate <span class="title">redisTemplate</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">RedisConnectionFactory redisConnectionFactory)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">StringRedisTemplate template = <span class="keyword">new</span> StringRedisTemplate();</span><br><span class="line">template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line"><span class="keyword">return</span> template;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Javaæ“ä½œRedis"><a href="#Javaæ“ä½œRedis" class="headerlink" title="Javaæ“ä½œRedis"></a>Javaæ“ä½œRedis</h3><p>è®¾ç½®Redisä¸­Stringç±»å‹çš„é”®å€¼å¯¹,600ç§’è‡ªåŠ¨å¤±æ•ˆ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redisTemplate.opsForValue().set(<span class="string">"key"</span>, <span class="string">"value"</span>, <span class="number">600</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure></p><p>è·å–Redisä¸­Stringç±»å‹çš„value<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String value = (String) redisTemplate.opsForValue().get(<span class="string">"key"</span>);</span><br></pre></td></tr></table></figure></p><p>è·å–æ“ä½œHashå¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HashOperations&lt;String, String, String&gt; hashOperations = redisTemplate.opsForHash();</span><br></pre></td></tr></table></figure></p><p>putä¸€ä¸ªmapå¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hashOperations.putAll(key, <span class="keyword">new</span> HashMap&lt;&gt;());</span><br></pre></td></tr></table></figure></p><p>è·å–ä¸€ä¸ªhashé‡Œé¢çš„maspKeyå¯¹åº”çš„å€¼<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String value = hashOperations.get(<span class="string">"key"</span>, <span class="string">"mapKey"</span>);</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL è¯­å¥å­¦ä¹ æ€»ç»“</title>
      <link href="/2019/04/22/mysql/"/>
      <url>/2019/04/22/mysql/</url>
      
        <content type="html"><![CDATA[<h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="headerlink" title="ä¿®æ”¹å¯†ç "></a>ä¿®æ”¹å¯†ç </h3><p>ä¿®æ”¹MySQLç™»å½•è®¾ç½®<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/my.cnf  åœ¨æœ€ååŠ ä¸€å¥  skip-grant-tables</span><br></pre></td></tr></table></figure></p><p>é‡å¯MySQL<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;update mysql.user set authentication_string=password(<span class="string">"æ–°å¯†ç "</span>);</span><br><span class="line">mysql&gt;flush privileges;</span><br></pre></td></tr></table></figure><h3 id="èŒƒå¼"><a href="#èŒƒå¼" class="headerlink" title="èŒƒå¼"></a>èŒƒå¼</h3><p>ï¼ˆ1ï¼‰ç¬¬ä¸€èŒƒå¼ï¼ˆæ¯åˆ—éƒ½ä¿æŒåŸå­æ€§)<br>ï¼ˆ2ï¼‰ç¬¬äºŒèŒƒå¼ï¼ˆéä¸»å±æ€§ä¸éƒ¨åˆ†ä¾èµ–äºå€™é€‰ç ï¼‰<br>ï¼ˆ3ï¼‰ç¬¬ä¸‰èŒƒå¼ï¼ˆéä¸»å±æ€§ä¸ä¼ é€’ä¾èµ–äºå€™é€‰ç ï¼‰<br>ï¼ˆ4ï¼‰BCèŒƒå¼ï¼ˆä»»ä½•å±æ€§ä¸éƒ¨åˆ†ä¾èµ–ä¸å€™é€‰ç ï¼Œä¸ä¼ é€’ä¾èµ–ä¸å€™é€‰ç ï¼‰</p><h3 id="åˆ›å»ºè¡¨SQL"><a href="#åˆ›å»ºè¡¨SQL" class="headerlink" title="åˆ›å»ºè¡¨SQL"></a>åˆ›å»ºè¡¨SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">        <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">        <span class="string">`age`</span> <span class="built_in">INT</span> ,</span><br><span class="line">        PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span> = <span class="keyword">INNODB</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> = utf8</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="æ›´æ–°è¡¨ä¸­æ•°æ®SQL"><a href="#æ›´æ–°è¡¨ä¸­æ•°æ®SQL" class="headerlink" title="æ›´æ–°è¡¨ä¸­æ•°æ®SQL"></a>æ›´æ–°è¡¨ä¸­æ•°æ®SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> user.name = <span class="string">"lisheng"</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢è¡¨ä¸­æ•°æ®çš„SQL"><a href="#æŸ¥è¯¢è¡¨ä¸­æ•°æ®çš„SQL" class="headerlink" title="æŸ¥è¯¢è¡¨ä¸­æ•°æ®çš„SQL"></a>æŸ¥è¯¢è¡¨ä¸­æ•°æ®çš„SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> user.name , user.age <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥è¡¨ä¸­æ•°æ®çš„SQL"><a href="#æ’å…¥è¡¨ä¸­æ•°æ®çš„SQL" class="headerlink" title="æ’å…¥è¡¨ä¸­æ•°æ®çš„SQL"></a>æ’å…¥è¡¨ä¸­æ•°æ®çš„SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> (<span class="keyword">id</span> ,<span class="keyword">name</span> ,age) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">"lisheng"</span>,<span class="number">12</span>);</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> user.name ,good.name <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">join</span> good <span class="keyword">on</span> user.id = good.user_id;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤è¡¨ä¸­æ•°æ®çš„SQL"><a href="#åˆ é™¤è¡¨ä¸­æ•°æ®çš„SQL" class="headerlink" title="åˆ é™¤è¡¨ä¸­æ•°æ®çš„SQL"></a>åˆ é™¤è¡¨ä¸­æ•°æ®çš„SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">id</span> =<span class="number">1</span>;</span><br></pre></td></tr></table></figure><h3 id="å¯¼å‡ºæ•°æ®åº“"><a href="#å¯¼å‡ºæ•°æ®åº“" class="headerlink" title="å¯¼å‡ºæ•°æ®åº“"></a>å¯¼å‡ºæ•°æ®åº“</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u dbuser -p dbname &gt; dbname.sql   <span class="comment">// åœ¨/usr/local/mysql/binç›®å½•æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="å¯¼å…¥sqlæ•°æ®åº“"><a href="#å¯¼å…¥sqlæ•°æ®åº“" class="headerlink" title="å¯¼å…¥sqlæ•°æ®åº“"></a>å¯¼å…¥sqlæ•°æ®åº“</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /home/abc/abc.sql;  // ç™»å½•åˆ°æ•°æ®åº“å†…æ‰§è¡Œ</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ•°æ®åº“è¡¨çš„ç¼–ç æ ¼å¼"><a href="#æŸ¥çœ‹æ•°æ®åº“è¡¨çš„ç¼–ç æ ¼å¼" class="headerlink" title="æŸ¥çœ‹æ•°æ®åº“è¡¨çš„ç¼–ç æ ¼å¼"></a>æŸ¥çœ‹æ•°æ®åº“è¡¨çš„ç¼–ç æ ¼å¼</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">table</span>-<span class="keyword">name</span>;</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®å­—æ®µé»˜è®¤å€¼"><a href="#è®¾ç½®å­—æ®µé»˜è®¤å€¼" class="headerlink" title="è®¾ç½®å­—æ®µé»˜è®¤å€¼"></a>è®¾ç½®å­—æ®µé»˜è®¤å€¼</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ALTER</span>  <span class="keyword">COLUMN</span> <span class="keyword">name</span> <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> <span class="string">""</span> ;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è¡¨å­—æ®µ"><a href="#ä¿®æ”¹è¡¨å­—æ®µ" class="headerlink" title="ä¿®æ”¹è¡¨å­—æ®µ"></a>ä¿®æ”¹è¡¨å­—æ®µ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> address <span class="keyword">MODIFY</span> <span class="keyword">COLUMN</span> city <span class="built_in">CHAR</span>(<span class="number">30</span>);</span><br></pre></td></tr></table></figure><h3 id="å¢åŠ ä¸€ä¸ªè¡¨çš„ä¸€ä¸ªå­—æ®µ"><a href="#å¢åŠ ä¸€ä¸ªè¡¨çš„ä¸€ä¸ªå­—æ®µ" class="headerlink" title="å¢åŠ ä¸€ä¸ªè¡¨çš„ä¸€ä¸ªå­—æ®µ"></a>å¢åŠ ä¸€ä¸ªè¡¨çš„ä¸€ä¸ªå­—æ®µ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> wechat_auth <span class="keyword">ADD</span> user_id <span class="built_in">VARCHAR</span>(<span class="number">255</span>)</span><br></pre></td></tr></table></figure><h3 id="æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–"><a href="#æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–" class="headerlink" title="æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–"></a>æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  DATE_FORMAT(t1.create_time,'%Y-%c-%d %h:%i:%s') </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"><span class="comment">### åˆ›å»ºç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">```sql</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> index_name</span><br><span class="line"><span class="keyword">ON</span> table_name (column_name)</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">INDEX</span> index_name <span class="keyword">ON</span> tbl_name</span><br></pre></td></tr></table></figure><h3 id="å¯¼å…¥cvsæ–‡ä»¶"><a href="#å¯¼å…¥cvsæ–‡ä»¶" class="headerlink" title="å¯¼å…¥cvsæ–‡ä»¶"></a>å¯¼å…¥cvsæ–‡ä»¶</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> <span class="keyword">INFILE</span> <span class="string">'[FILE]'</span>  </span><br><span class="line"><span class="keyword">INTO</span> <span class="keyword">TABLE</span> [<span class="keyword">TABLE</span>]ï¼›  </span><br><span class="line">æˆ–è€…  </span><br><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> <span class="keyword">INFILE</span> <span class="string">'[FILE]'</span>  </span><br><span class="line"><span class="keyword">INTO</span> <span class="keyword">TABLE</span> [<span class="keyword">TABLE</span>]  </span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span>   </span><br><span class="line"><span class="keyword">OPTIONALLY</span> <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">'"'</span>   </span><br><span class="line"><span class="keyword">LINES</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\n'</span>ï¼›</span><br></pre></td></tr></table></figure><h3 id="å¯¼å‡ºcvsæ–‡ä»¶"><a href="#å¯¼å‡ºcvsæ–‡ä»¶" class="headerlink" title="å¯¼å‡ºcvsæ–‡ä»¶"></a>å¯¼å‡ºcvsæ–‡ä»¶</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> [<span class="keyword">TABLE</span>]  </span><br><span class="line"><span class="keyword">INTO</span> <span class="keyword">OUTFILE</span> <span class="string">'[FILE]'</span>ï¼›  </span><br><span class="line">æˆ–è€…  </span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> [<span class="keyword">TABLE</span>]  </span><br><span class="line"><span class="keyword">INTO</span> <span class="keyword">OUTFILE</span> <span class="string">'[FILE]'</span>  </span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span>   </span><br><span class="line"><span class="keyword">OPTIONALLY</span> <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">'"'</span>   </span><br><span class="line"><span class="keyword">LINES</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\n'</span>ï¼›</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢æŒ‡å®šå­—æ®µé‡å¤çš„è®°å½•"><a href="#æŸ¥è¯¢æŒ‡å®šå­—æ®µé‡å¤çš„è®°å½•" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šå­—æ®µé‡å¤çš„è®°å½•"></a>æŸ¥è¯¢æŒ‡å®šå­—æ®µé‡å¤çš„è®°å½•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> mobile <span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(mobile)&gt;<span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> create_time <span class="keyword">DESC</span> ;</span><br></pre></td></tr></table></figure><h3 id="å½“æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥è®°å½•çš„æ—¶å€™æ’å…¥"><a href="#å½“æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥è®°å½•çš„æ—¶å€™æ’å…¥" class="headerlink" title="å½“æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥è®°å½•çš„æ—¶å€™æ’å…¥"></a>å½“æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥è®°å½•çš„æ—¶å€™æ’å…¥</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`table`</span> (value1, value2)</span><br><span class="line">  <span class="keyword">SELECT</span></span><br><span class="line">    <span class="string">'stuff for value1'</span>,</span><br><span class="line">    <span class="string">'stuff for value2'</span></span><br><span class="line">  <span class="keyword">FROM</span> DUAL</span><br><span class="line">  <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> *</span><br><span class="line">                   <span class="keyword">FROM</span> <span class="string">`table`</span></span><br><span class="line">                   <span class="keyword">WHERE</span> value1 = <span class="string">'stuff for value1'</span> <span class="keyword">AND</span> value2 = <span class="string">'stuff for value2'</span>)</span><br><span class="line">  <span class="keyword">LIMIT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>ä¾‹å­<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`t_test`</span> (<span class="keyword">id</span>, <span class="keyword">name</span>)</span><br><span class="line">  <span class="keyword">SELECT</span></span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">    <span class="string">'isheng'</span></span><br><span class="line">  <span class="keyword">FROM</span> DUAL</span><br><span class="line">  <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> *</span><br><span class="line">                   <span class="keyword">FROM</span> <span class="string">`t_test`</span></span><br><span class="line">                   <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span> <span class="keyword">AND</span> <span class="keyword">name</span> = <span class="string">'iisheng'</span>)</span><br><span class="line">  <span class="keyword">LIMIT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p><h3 id="ç»™è¡¨ä¸­ä¸¤ä¸ªå­—æ®µæ·»åŠ å”¯ä¸€æ€§çº¦æŸ"><a href="#ç»™è¡¨ä¸­ä¸¤ä¸ªå­—æ®µæ·»åŠ å”¯ä¸€æ€§çº¦æŸ" class="headerlink" title="ç»™è¡¨ä¸­ä¸¤ä¸ªå­—æ®µæ·»åŠ å”¯ä¸€æ€§çº¦æŸ"></a>ç»™è¡¨ä¸­ä¸¤ä¸ªå­—æ®µæ·»åŠ å”¯ä¸€æ€§çº¦æŸ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`table`</span> <span class="keyword">ADD</span> <span class="keyword">unique</span> <span class="keyword">unique</span>-<span class="keyword">name</span> (column1,column2);</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤å”¯ä¸€æ€§çº¦æŸ"><a href="#åˆ é™¤å”¯ä¸€æ€§çº¦æŸ" class="headerlink" title="åˆ é™¤å”¯ä¸€æ€§çº¦æŸ"></a>åˆ é™¤å”¯ä¸€æ€§çº¦æŸ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE è¡¨å DROP KEY çº¦æŸå;</span><br></pre></td></tr></table></figure><h3 id="inner-join-å’Œleft-joinåŒºåˆ«"><a href="#inner-join-å’Œleft-joinåŒºåˆ«" class="headerlink" title="inner join å’Œleft joinåŒºåˆ«"></a>inner join å’Œleft joinåŒºåˆ«</h3><p>left join (å·¦è¿æ¥) è¿”å›åŒ…æ‹¬å·¦è¡¨ä¸­æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•<br><br>right join (å³è¿æ¥) è¿”å›åŒ…æ‹¬å³è¡¨ä¸­æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•<br><br>inner join (ç­‰å€¼è¿æ¥) åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è¿æ¥å­—æ®µç›¸ç­‰çš„è®°å½•</p><h3 id="SQL-ä¼˜åŒ–"><a href="#SQL-ä¼˜åŒ–" class="headerlink" title="SQL ä¼˜åŒ–"></a>SQL ä¼˜åŒ–</h3><ol><li>æŸ¥è¯¢ seeker_job  å»æ‰ seeker_job_suggest  å…³è”</li><li>ä¼˜åŒ–æ¨¡ç³ŠæŸ¥è¯¢ æ”¹ç”¨å• like% reverseå‡½æ•°å»ºç«‹åå‘ç´¢å¼•</li><li>èŒƒå›´æ¨¡ç³ŠæŸ¥è¯¢ è‡ªå¢idä¼˜äºuuid  ä½¿ç”¨count(1)ä¹Ÿæ˜¯è‡ªå¢idæ›´å¥½</li><li>åœ¨é€‚å½“çš„åœ°æ–¹æ·»åŠ ç´¢å¼•   ï¼ˆMySQLä»…èƒ½å¯¹ç´¢å¼•æœ€å·¦è¾¹çš„å‰ç¼€è¿›è¡Œæœ‰æ•ˆçš„æŸ¥æ‰¾ï¼‰</li><li>whereè¯­å¥åé¢çš„é¡ºåº ä»¥åŠ å»ºç«‹ ç´¢å¼•çš„é¡ºåº  ï¼ˆæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼‰</li><li>ï¼ˆå°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ã€‚ï¼‰( = å’Œ in å¯ä»¥ä¹±åº)</li><li>ï¼ˆå°½é‡æ‰©å±•ç´¢å¼•ï¼Œå°‘å»æ–°å»ºç´¢å¼•ï¼‰</li><li>ä¸ä»¥é€šé…ç¬¦å¼€å¤´çš„sqlè¯­å¥ like â€œ%aaaâ€ ALL å…¨è¡¨æ‰«æ like â€œaaaa%â€ range ç´¢å¼•</li><li>å°½é‡é¿å… nullå€¼åˆ¤æ–­ åº”è¯¥ä½¿ç”¨ 0 é»˜è®¤å€¼çš„ æ–¹æ³•</li><li>é¿å… select * </li><li>order byè¯­å¥åé¢è·Ÿç´¢å¼•   æ’åºçš„é¡ºåº å¾ˆé‡è¦ å¾ˆé‡è¦</li><li>æé«˜GROUP BY è¯­å¥çš„æ•ˆç‡, å¯ä»¥é€šè¿‡å°†ä¸éœ€è¦çš„è®°å½•åœ¨GROUP BY ä¹‹å‰è¿‡æ»¤æ‰</li><li>èƒ½ç”¨DISTINCTçš„å°±ä¸ç”¨GROUP BY</li></ol><h3 id="æŸ¥çœ‹ç¼–ç "><a href="#æŸ¥çœ‹ç¼–ç " class="headerlink" title="æŸ¥çœ‹ç¼–ç "></a>æŸ¥çœ‹ç¼–ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like <span class="string">'%char%'</span>;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹è¡¨ç¼–ç "><a href="#æŸ¥çœ‹è¡¨ç¼–ç " class="headerlink" title="æŸ¥çœ‹è¡¨ç¼–ç "></a>æŸ¥çœ‹è¡¨ç¼–ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show create table &lt;è¡¨å&gt;;</span><br><span class="line"></span><br><span class="line">ä¾‹ï¼šshow create table user;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å­—æ®µç¼–ç "><a href="#æŸ¥çœ‹å­—æ®µç¼–ç " class="headerlink" title="æŸ¥çœ‹å­—æ®µç¼–ç "></a>æŸ¥çœ‹å­—æ®µç¼–ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show full columns from &lt;è¡¨å&gt;;</span><br><span class="line"></span><br><span class="line">ä¾‹ï¼š show full column from user;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æ•°æ®åº“ç¼–ç æ ¼å¼"><a href="#ä¿®æ”¹æ•°æ®åº“ç¼–ç æ ¼å¼" class="headerlink" title="ä¿®æ”¹æ•°æ®åº“ç¼–ç æ ¼å¼"></a>ä¿®æ”¹æ•°æ®åº“ç¼–ç æ ¼å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter database &lt;æ•°æ®åº“å&gt; character set utf8mb4;</span><br><span class="line">ä¾‹ï¼šalter database db_user character set utf8mb4;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è¡¨ç¼–ç "><a href="#ä¿®æ”¹è¡¨ç¼–ç " class="headerlink" title="ä¿®æ”¹è¡¨ç¼–ç "></a>ä¿®æ”¹è¡¨ç¼–ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table &lt;è¡¨å&gt; character set utf8mb4;</span><br><span class="line">ä¾‹ï¼šalter table user character set utf8mb4;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å­—æ®µç¼–ç "><a href="#ä¿®æ”¹å­—æ®µç¼–ç " class="headerlink" title="ä¿®æ”¹å­—æ®µç¼–ç "></a>ä¿®æ”¹å­—æ®µç¼–ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE &lt;è¡¨å&gt; MODIFY COLUMN &lt;å­—æ®µå&gt; &lt;å­—æ®µç±»å‹&gt; CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</span><br><span class="line">ä¾‹ï¼š<span class="function">ALTER TABLE comment MODIFY COLUMN content <span class="title">VARCHAR</span><span class="params">(<span class="number">512</span>)</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</span>;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢sqlä¸èµ°ç¼“å­˜"><a href="#æŸ¥è¯¢sqlä¸èµ°ç¼“å­˜" class="headerlink" title="æŸ¥è¯¢sqlä¸èµ°ç¼“å­˜"></a>æŸ¥è¯¢sqlä¸èµ°ç¼“å­˜</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SQL_NO_CACHE * FROM users;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è¡¨å­—ç¬¦é›†å’Œæ ¡å¯¹é›†"><a href="#ä¿®æ”¹è¡¨å­—ç¬¦é›†å’Œæ ¡å¯¹é›†" class="headerlink" title="ä¿®æ”¹è¡¨å­—ç¬¦é›†å’Œæ ¡å¯¹é›†"></a>ä¿®æ”¹è¡¨å­—ç¬¦é›†å’Œæ ¡å¯¹é›†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER  TABLE user</span><br><span class="line">CHARACTER SET utf8mb4</span><br><span class="line">COLLATE utf8mb4_general_ci;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æ•°æ®åº“å­—ç¬¦é›†å’Œæ ¡å¯¹é›†"><a href="#ä¿®æ”¹æ•°æ®åº“å­—ç¬¦é›†å’Œæ ¡å¯¹é›†" class="headerlink" title="ä¿®æ”¹æ•°æ®åº“å­—ç¬¦é›†å’Œæ ¡å¯¹é›†"></a>ä¿®æ”¹æ•°æ®åº“å­—ç¬¦é›†å’Œæ ¡å¯¹é›†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE mydata</span><br><span class="line">CHARACTER SET utf8mb4</span><br><span class="line">COLLATE utf8mb4_general_ci;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è¡¨å­—æ®µç›¸å…³ä¿¡æ¯"><a href="#ä¿®æ”¹è¡¨å­—æ®µç›¸å…³ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹è¡¨å­—æ®µç›¸å…³ä¿¡æ¯"></a>ä¿®æ”¹è¡¨å­—æ®µç›¸å…³ä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE `job_auth_record` CHANGE `id` `id` VARCHAR(<span class="number">32</span>) CHARACTER SET utf8mb4 NOT NULL COMMENT <span class="string">'ä¸»é”®id'</span>;</span><br></pre></td></tr></table></figure><h3 id="Mysql-ASC-å’Œ-DESC-ç´¢å¼•-æ€ä¹ˆèµ°çš„-ï¼Ÿï¼Ÿï¼Ÿ"><a href="#Mysql-ASC-å’Œ-DESC-ç´¢å¼•-æ€ä¹ˆèµ°çš„-ï¼Ÿï¼Ÿï¼Ÿ" class="headerlink" title="Mysql ASC å’Œ DESC ç´¢å¼• æ€ä¹ˆèµ°çš„ ï¼Ÿï¼Ÿï¼Ÿ"></a>Mysql ASC å’Œ DESC ç´¢å¼• æ€ä¹ˆèµ°çš„ ï¼Ÿï¼Ÿï¼Ÿ</h3><h3 id="åˆ†ç»„å·®æŸ¥è¯¢æ•°é‡-è¶…çº§åŠ"><a href="#åˆ†ç»„å·®æŸ¥è¯¢æ•°é‡-è¶…çº§åŠ" class="headerlink" title="åˆ†ç»„å·®æŸ¥è¯¢æ•°é‡  è¶…çº§åŠ"></a>åˆ†ç»„å·®æŸ¥è¯¢æ•°é‡  è¶…çº§åŠ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  company_id,</span><br><span class="line">  count(*) AS counts</span><br><span class="line">FROM seeker_job</span><br><span class="line"><span class="function">WHERE company_id <span class="title">IN</span> <span class="params">(<span class="string">"8a9c889c5dcbe37c015dcf16e284001f"</span>, <span class="string">"04be17537c5e4b299c135eeaadb5e131"</span>)</span></span></span><br><span class="line"><span class="function">GROUP BY company_id</span>;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æ ¡éªŒé›†"><a href="#ä¿®æ”¹æ ¡éªŒé›†" class="headerlink" title="ä¿®æ”¹æ ¡éªŒé›†"></a>ä¿®æ”¹æ ¡éªŒé›†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE insurance_insured CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;</span><br><span class="line"></span><br><span class="line">ALTER  TABLE insurance_insured CHARACTER SET utf8mb4;</span><br><span class="line"></span><br><span class="line">ALTER TABLE `insurance_insured` CHANGE `name` `name`  varchar(<span class="number">64</span>) COLLATE utf8mb4_general_ci DEFAULT NULL;</span><br></pre></td></tr></table></figure><h3 id="å¿½ç•¥æŸä¸ªç´¢å¼•"><a href="#å¿½ç•¥æŸä¸ªç´¢å¼•" class="headerlink" title="å¿½ç•¥æŸä¸ªç´¢å¼•"></a>å¿½ç•¥æŸä¸ªç´¢å¼•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * <span class="function">FROM seeker_job IGNORE <span class="title">INDEX</span><span class="params">(idx_modify_time)</span></span></span><br></pre></td></tr></table></figure><h4 id="DISTINCT-COUNT"><a href="#DISTINCT-COUNT" class="headerlink" title="DISTINCT COUNT"></a>DISTINCT COUNT</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">SELECT  <span class="title">count</span><span class="params">(DISTINCT j1.job_id,j1.agent_company_id)</span></span></span><br><span class="line"><span class="function">FROM job_agent j1 INNER JOIN job_agent j2 ON j1.job_id </span>= j2.job_id AND j1.agent_company_id = j2.agent_company_id AND j1.id != j2.id ;</span><br></pre></td></tr></table></figure><h4 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT  DISTINCT j1.job_id,j1.agent_company_id</span><br><span class="line">FROM job_agent j1 INNER JOIN job_agent j2 ON j1.job_id = j2.job_id AND j1.agent_company_id = j2.agent_company_id AND j1.id != j2.id ;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥æ‰¾é‡å¤å­—æ®µè®°å½•"><a href="#æŸ¥æ‰¾é‡å¤å­—æ®µè®°å½•" class="headerlink" title="æŸ¥æ‰¾é‡å¤å­—æ®µè®°å½•"></a>æŸ¥æ‰¾é‡å¤å­—æ®µè®°å½•</h4><p><a href="https://www.cnblogs.com/jiangxiaobo/p/6589541.html" target="_blank" rel="noopener">https://www.cnblogs.com/jiangxiaobo/p/6589541.html</a></p><h3 id="ä¿®æ”¹è¡¨ç¼–ç ä¸ªå­—ç¬¦é›†"><a href="#ä¿®æ”¹è¡¨ç¼–ç ä¸ªå­—ç¬¦é›†" class="headerlink" title="ä¿®æ”¹è¡¨ç¼–ç ä¸ªå­—ç¬¦é›†"></a>ä¿®æ”¹è¡¨ç¼–ç ä¸ªå­—ç¬¦é›†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ALTER  TABLE apply_stencil CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="function">ALTER TABLE apply_stencil MODIFY COLUMN id <span class="title">VARCHAR</span><span class="params">(<span class="number">32</span>)</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">ALTER TABLE apply_stencil MODIFY COLUMN apply_id <span class="title">VARCHAR</span><span class="params">(<span class="number">32</span>)</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci</span>;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢ä¸€ä¸ªåº“é‡Œé¢æœ‰å¤šå°‘è¡¨"><a href="#æŸ¥è¯¢ä¸€ä¸ªåº“é‡Œé¢æœ‰å¤šå°‘è¡¨" class="headerlink" title="æŸ¥è¯¢ä¸€ä¸ªåº“é‡Œé¢æœ‰å¤šå°‘è¡¨"></a>æŸ¥è¯¢ä¸€ä¸ªåº“é‡Œé¢æœ‰å¤šå°‘è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">SELECT <span class="title">COUNT</span><span class="params">(*)</span> TABLES, table_schema FROM information_schema.TABLES  WHERE table_schema </span>= <span class="string">'goabroad'</span></span><br></pre></td></tr></table></figure><h3 id="æ—¶é—´ç›¸å…³æ ¼å¼åŒ–å‡½æ•°"><a href="#æ—¶é—´ç›¸å…³æ ¼å¼åŒ–å‡½æ•°" class="headerlink" title="æ—¶é—´ç›¸å…³æ ¼å¼åŒ–å‡½æ•°"></a>æ—¶é—´ç›¸å…³æ ¼å¼åŒ–å‡½æ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create_timeæ—¶é—´æ ¼å¼</span><br><span class="line"><span class="function">SELECT <span class="title">DATE_FORMAT</span><span class="params">(create_time,<span class="string">'%Y%u'</span>)</span> weeks,<span class="title">COUNT</span><span class="params">(id)</span> COUNT FROM role GROUP BY weeks</span>;</span><br><span class="line"><span class="function">SELECT <span class="title">DATE_FORMAT</span><span class="params">(create_time,<span class="string">'%Y%m%d'</span>)</span> days,<span class="title">COUNT</span><span class="params">(id)</span> COUNT FROM role GROUP BY days</span>;</span><br><span class="line"><span class="function">SELECT <span class="title">DATE_FORMAT</span><span class="params">(create_time,<span class="string">'%Y%m'</span>)</span> months,<span class="title">COUNT</span><span class="params">(id)</span> COUNT FROM role GROUP BY months</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">create_timeæ—¶é—´æˆ³æ ¼å¼</span></span><br><span class="line"><span class="function">SELECT <span class="title">FROM_UNIXTIME</span><span class="params">(create_time,<span class="string">'%Y%u'</span>)</span> weeks,<span class="title">COUNT</span><span class="params">(id)</span> COUNT FROM role GROUP BY weeks</span>;</span><br><span class="line"><span class="function">SELECT <span class="title">FROM_UNIXTIME</span><span class="params">(create_time,<span class="string">'%Y%m%d'</span>)</span> days,<span class="title">COUNT</span><span class="params">(id)</span> COUNT FROM role GROUP BY days</span>;</span><br><span class="line"><span class="function">SELECT <span class="title">FROM_UNIXTIME</span><span class="params">(create_time,<span class="string">'%Y%m'</span>)</span> months,<span class="title">COUNT</span><span class="params">(id)</span> COUNT FROM role GROUP BY months</span></span><br></pre></td></tr></table></figure><h3 id="å›æ”¶è¡¨"><a href="#å›æ”¶è¡¨" class="headerlink" title="å›æ”¶è¡¨"></a>å›æ”¶è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table name engine=innodb</span><br></pre></td></tr></table></figure><h3 id="left-å’Œ-length-å‡½æ•°"><a href="#left-å’Œ-length-å‡½æ•°" class="headerlink" title="left() å’Œ length()å‡½æ•°"></a>left() å’Œ length()å‡½æ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE seeker_job SET country_id = left(country_id,<span class="number">6</span>) <span class="function">WHERE <span class="title">length</span><span class="params">(country_id)</span> &gt; 6</span>;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹mysqlç‰ˆæœ¬å·"><a href="#æŸ¥çœ‹mysqlç‰ˆæœ¬å·" class="headerlink" title="æŸ¥çœ‹mysqlç‰ˆæœ¬å·"></a>æŸ¥çœ‹mysqlç‰ˆæœ¬å·</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">SELECT <span class="title">version</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜¶æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQLè¯­å¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vimå­¦ä¹ </title>
      <link href="/2019/04/15/vim/"/>
      <url>/2019/04/15/vim/</url>
      
        <content type="html"><![CDATA[<h4 id="Vimå­¦ä¹ ç¬”è®°"><a href="#Vimå­¦ä¹ ç¬”è®°" class="headerlink" title="Vimå­¦ä¹ ç¬”è®°"></a>Vimå­¦ä¹ ç¬”è®°</h4><h4 id="Vimä¸‰ç§æ¨¡å¼"><a href="#Vimä¸‰ç§æ¨¡å¼" class="headerlink" title="Vimä¸‰ç§æ¨¡å¼"></a>Vimä¸‰ç§æ¨¡å¼</h4><p>åŸºæœ¬ä¸Šviåˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ä¸€èˆ¬æ¨¡å¼ã€ç¼–è¾‘æ¨¡å¼ä¸å‘½ä»¤è¡Œæ¨¡å¼</p><h5 id="ä¸€èˆ¬æ¨¡å¼"><a href="#ä¸€èˆ¬æ¨¡å¼" class="headerlink" title="ä¸€èˆ¬æ¨¡å¼"></a>ä¸€èˆ¬æ¨¡å¼</h5><p>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶é»˜è®¤å°±è¿›å…¥åˆ°ä¸€èˆ¬æ¨¡å¼ï¼ˆè¿™æ˜¯é»˜è®¤çš„æ¨¡å¼ï¼‰ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸Šä¸‹å·¦å³äº†æ¥ç§»åŠ¨å…‰æ ‡ï¼Œä½ å¯ä»¥åˆ é™¤å­—ç¬¦æˆ–è€…åˆ é™¤æ•´è¡Œï¼Œä¹Ÿå¯ä»¥å¤åˆ¶ç²˜è´´ä½ çš„æ–‡ä»¶æ•°æ®ã€‚</p><h5 id="ç¼–è¾‘æ¨¡å¼"><a href="#ç¼–è¾‘æ¨¡å¼" class="headerlink" title="ç¼–è¾‘æ¨¡å¼"></a>ç¼–è¾‘æ¨¡å¼</h5><p>åœ¨viä¸€èˆ¬æ¨¡å¼ä¸‹ï¼Œä¸èƒ½è¿›è¡Œç¼–è¾‘ã€‚ç­‰åˆ°æŒ‰ä¸‹aã€sã€iã€oã€cä¹‹åï¼Œå°±ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚å·¦ä¸‹æ–¹ä¼šå‡ºç°INSERTæˆ–REPLACçš„å­—æ ·ï¼Œæ­¤æ—¶æ‰å¯ä»¥è¿›è¡Œç¼–è¾‘ã€‚è‹¥æƒ³è¦é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œéœ€è¦æŒ‰ESCã€‚</p><h5 id="å‘½ä»¤è¡Œæ¨¡å¼"><a href="#å‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="å‘½ä»¤è¡Œæ¨¡å¼"></a>å‘½ä»¤è¡Œæ¨¡å¼</h5><p>åœ¨ä¸€èˆ¬æ¨¡å¼ä¸­è¾“å…¥ï¼Œâ€œ:ã€/ã€ï¼Ÿâ€3ä¸ªä¸­çš„ä»»ä½•ä¸€ä¸ªæŒ‰é’®ï¼Œå°±å¯ä»¥å°†å…‰æ ‡ç§»åŠ¨åˆ°æœ€ä¸‹é¢é‚£ä¸€è¡Œã€‚</p><a id="more"></a><h4 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hjkl å·¦ä¸‹ä¸Šå³</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctrl+f  pagedown å‘ä¸‹ç¿»é¡µ</span><br><span class="line">ctrl+b  pageup å‘ä¸Šç¿»é¡µ</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>  home  ç§»åŠ¨åˆ°å½“å‰è¡Œæœ€å‰</span><br><span class="line">n ç©ºæ ¼  ç§»åŠ¨nä¸ªå­—ç¬¦</span><br><span class="line">$  end  ç§»åŠ¨åˆ°å½“å‰è¡Œæœ€å</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">G ç§»åŠ¨åˆ°æ–‡ä»¶æœ€æœ«è¡Œ</span><br><span class="line">nG ç§»åŠ¨åˆ°ç¬¬nè¡Œ</span><br><span class="line">gg é¦–è¡Œ</span><br><span class="line">n+enter  å‘ä¸‹ç§»åŠ¨nè¡Œ</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:n1,n2s/word1/word2/g     åœ¨n1åˆ°n2ä¹‹é—´æ‰¾åˆ°word1ï¼Œå¹¶å°†wor1æ›¿æ¢ä¸ºword2</span><br><span class="line">:<span class="number">1</span>,$s/word1/word2/g       åœ¨ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡ŒæŸ¥æ‰¾word1ï¼Œå¹¶æ›¿æ¢ä¸ºword2</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x,X     xå‘å‰åˆ é™¤   Xå‘ååˆ é™¤</span><br><span class="line">nx      nä¸ºæ•°å­—     è¿ç»­å‘ååˆ é™¤nä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dd åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„æ•´è¡Œ</span><br><span class="line">ndd åˆ é™¤æ‰€åœ¨çš„å‘ä¸‹çš„å‡ è¡Œ</span><br><span class="line">d1G åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</span><br><span class="line">dg  åˆ é™¤ä»å…‰æ ‡æ‰€åœ¨åˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</span><br><span class="line">d$  åˆ é™¤ä»å…‰æ ‡æ‰€åœ¨å¤„åˆ°è¯¥è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦</span><br><span class="line">d0  åˆ é™¤ä»å…‰æ ‡æ‰€åœ¨å‡ºåˆ°è¯¥è¡Œçš„æœ€å‰é¢ä¸€ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yy  å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œ</span><br><span class="line">nyy  å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹nè¡Œ</span><br><span class="line">p,P   på°†å·²å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡ä¸‹ä¸€è¡Œç²˜è´´ï¼ŒPå°†å·²å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡ä¸Šä¸€è¡Œç²˜è´´</span><br><span class="line">y1G   å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</span><br><span class="line">yG   å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</span><br><span class="line">y0   å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œé¦–çš„æ‰€æœ‰æ•°æ®</span><br><span class="line">y$   å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œå°¾çš„æ‰€æœ‰æ•°æ®</span><br></pre></td></tr></table></figure><h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">å¸¸è§„æ¨¡å¼  /   è¿›è¡Œæœç´¢</span><br><span class="line">uæ’¤é”€åˆšæ‰å¾—åˆ°åŠ¨ä½œ</span><br><span class="line">ctrl+ræ˜¯æ’¤é”€åˆšæ‰æ’¤é”€çš„åŠ¨ä½œ</span><br><span class="line">ctrl+u åˆ é™¤å½“å‰è¡Œ</span><br><span class="line">yyå¤åˆ¶å½“å‰è¡Œ</span><br><span class="line">ddåˆ é™¤å½“å‰è¡Œ</span><br><span class="line">pç²˜è´´</span><br><span class="line">uæ’¤é”€</span><br><span class="line">æŸ¥æ‰¾ </span><br><span class="line">/pattern  å¾€åæŸ¥æ‰¾</span><br><span class="line">?pattern  å‘å‰æŸ¥æ‰¾</span><br><span class="line">nä¸‹ä¸€ä¸ª</span><br><span class="line">Nä¸Šä¸€ä¸ª</span><br><span class="line">ggVG å…¨é€‰ ggåˆ°èµ·å§‹è¡Œ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜³å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CURLå·¥å…·å­¦ä¹ </title>
      <link href="/2019/04/08/curl/"/>
      <url>/2019/04/08/curl/</url>
      
        <content type="html"><![CDATA[<h3 id="CURLæ˜¯ä»€ä¹ˆ"><a href="#CURLæ˜¯ä»€ä¹ˆ" class="headerlink" title="CURLæ˜¯ä»€ä¹ˆ"></a>CURLæ˜¯ä»€ä¹ˆ</h3><p>CURL (Command Line URL viewer)æ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œä½œç”¨æ˜¯å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œç„¶åå¾—åˆ°å’Œæå–æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨â€œæ ‡å‡†è¾“å‡ºâ€ï¼ˆstdoutï¼‰ä¸Šé¢ã€‚</p><h4 id="æŸ¥çœ‹ç½‘é¡µæºç "><a href="#æŸ¥çœ‹ç½‘é¡µæºç " class="headerlink" title="æŸ¥çœ‹ç½‘é¡µæºç "></a>æŸ¥çœ‹ç½‘é¡µæºç </h4><p>ç›´æ¥åœ¨curlåé¢åŠ ä¸Šç½‘å€ï¼Œå°±å¯ä»¥çœ‹åˆ°ç½‘é¡µæºç ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl iisheng.cn</span><br></pre></td></tr></table></figure></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//IETF//DTD HTML 2.0//EN"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;301 Moved Permanently&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body bgcolor=<span class="string">"white"</span>&gt;</span><br><span class="line">&lt;h1&gt;301 Moved Permanently&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;The requested resource has been assigned a new permanent URI.&lt;/p&gt;</span><br><span class="line">&lt;hr/&gt;Powered by Tengine&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><p>å¦‚æœè¦ä¿å­˜è¿™ä¸ªç½‘é¡µï¼Œå¯ä»¥ä½¿ç”¨ -o å‚æ•°<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o fileName iisheng.cn</span><br></pre></td></tr></table></figure></p><h4 id="è‡ªåŠ¨è·³è½¬"><a href="#è‡ªåŠ¨è·³è½¬" class="headerlink" title="è‡ªåŠ¨è·³è½¬"></a>è‡ªåŠ¨è·³è½¬</h4><p>æœ‰çš„ç½‘é¡µæ˜¯è‡ªåŠ¨è·³è½¬çš„ã€‚ä½¿ç”¨ -L å‚æ•°ï¼Œcurlå°±ä¼šè·³è½¬åˆ°æ–°çš„ç½‘å€ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L iisheng.cn</span><br></pre></td></tr></table></figure></p><p>é”®å…¥ä¸Šé¢å‘½ä»¤ï¼Œå°±ä¼šç›´æ¥è·³è½¬åˆ°<a href="https://iisheng.cn">https://iisheng.cn</a></p><h4 id="æ˜¾ç¤ºå¤´ä¿¡æ¯"><a href="#æ˜¾ç¤ºå¤´ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºå¤´ä¿¡æ¯"></a>æ˜¾ç¤ºå¤´ä¿¡æ¯</h4><p>-i å‚æ•°å¯ä»¥æ˜¾ç¤ºhttp response çš„å¤´ä¿¡æ¯ï¼Œè¿åŒç½‘é¡µä»£ç ä¸€èµ·ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -i iisheng.cn</span><br></pre></td></tr></table></figure></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">301</span> Moved Permanently</span><br><span class="line">Server: Tengine</span><br><span class="line">Date: Sat, <span class="number">13</span> Apr <span class="number">2019</span> <span class="number">08</span>:<span class="number">55</span>:<span class="number">26</span> GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: <span class="number">278</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">Location: https:<span class="comment">//iisheng.cn/</span></span><br><span class="line">Via: kunlun8.cn314[,<span class="number">0</span>]</span><br><span class="line">Timing-Allow-Origin: *</span><br><span class="line">EagleId: ca6cf99c15551457264052744e</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//IETF//DTD HTML 2.0//EN"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;301 Moved Permanently&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body bgcolor=<span class="string">"white"</span>&gt;</span><br><span class="line">&lt;h1&gt;301 Moved Permanently&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;The requested resource has been assigned a new permanent URI.&lt;/p&gt;</span><br><span class="line">&lt;hr/&gt;Powered by Tengine&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºé€šä¿¡è¿‡ç¨‹"><a href="#æ˜¾ç¤ºé€šä¿¡è¿‡ç¨‹" class="headerlink" title="æ˜¾ç¤ºé€šä¿¡è¿‡ç¨‹"></a>æ˜¾ç¤ºé€šä¿¡è¿‡ç¨‹</h4><p>-v å‚æ•°å¯ä»¥æ˜¾ä¸€æ¬¡httpé€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç«¯å£è¿æ¥å’Œhttp request å¤´ä¿¡æ¯ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -v iisheng.cn</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">* Rebuilt URL to: iisheng.cn/</span><br><span class="line">*   Trying <span class="number">202.108</span>.249.197...</span><br><span class="line">* Connected to iisheng.cn (202.108.249.197) port 80 (#0)</span><br><span class="line">&gt; GET / HTTP/<span class="number">1.1</span></span><br><span class="line">&gt; Host: iisheng.cn</span><br><span class="line">&gt; User-Agent: curl/<span class="number">7.47</span>.0</span><br><span class="line">&gt; Accept: *<span class="comment">/*</span></span><br><span class="line"><span class="comment">&gt; </span></span><br><span class="line"><span class="comment">&lt; HTTP/1.1 301 Moved Permanently</span></span><br><span class="line"><span class="comment">&lt; Server: Tengine</span></span><br><span class="line"><span class="comment">&lt; Date: Sat, 13 Apr 2019 08:57:09 GMT</span></span><br><span class="line"><span class="comment">&lt; Content-Type: text/html</span></span><br><span class="line"><span class="comment">&lt; Content-Length: 278</span></span><br><span class="line"><span class="comment">&lt; Connection: keep-alive</span></span><br><span class="line"><span class="comment">&lt; Location: https://iisheng.cn/</span></span><br><span class="line"><span class="comment">&lt; Via: kunlun8.cn314[,0]</span></span><br><span class="line"><span class="comment">&lt; Timing-Allow-Origin: *</span></span><br><span class="line"><span class="comment">&lt; EagleId: ca6cf99c15551458295975589e</span></span><br><span class="line"><span class="comment">&lt; </span></span><br><span class="line"><span class="comment">&lt;!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;</span></span><br><span class="line"><span class="comment">&lt;html&gt;</span></span><br><span class="line"><span class="comment">&lt;head&gt;&lt;title&gt;301 Moved Permanently&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="comment">&lt;body bgcolor="white"&gt;</span></span><br><span class="line"><span class="comment">&lt;h1&gt;301 Moved Permanently&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">&lt;p&gt;The requested resource has been assigned a new permanent URI.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">&lt;hr/&gt;Powered by Tengine&lt;/body&gt;</span></span><br><span class="line"><span class="comment">&lt;/html&gt;</span></span><br><span class="line"><span class="comment">* Connection #0 to host iisheng.cn left intact</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è§‰å¾—ä¸Šé¢çš„ä¿¡æ¯è¿˜ä¸å¤Ÿï¼Œå¯ä»¥ä½¿ç”¨<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --trace output.txt</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œåï¼Œæ‰“å¼€output.txt æŸ¥çœ‹</p><h4 id="å‘é€è¡¨å•ä¿¡æ¯"><a href="#å‘é€è¡¨å•ä¿¡æ¯" class="headerlink" title="å‘é€è¡¨å•ä¿¡æ¯"></a>å‘é€è¡¨å•ä¿¡æ¯</h4><p>GETè¯·æ±‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl example.com/form.cgi?data=xxx</span><br></pre></td></tr></table></figure></p><p>POSTè¯·æ±‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST --data <span class="string">"data=xxx"</span> example.com/form.cgi</span><br></pre></td></tr></table></figure></p><h4 id="HTTP-åŠ¨è¯"><a href="#HTTP-åŠ¨è¯" class="headerlink" title="HTTP åŠ¨è¯"></a>HTTP åŠ¨è¯</h4><p>curlé»˜è®¤åŠ¨è¯æ˜¯GETï¼Œä½¿ç”¨ -X å‚æ•° å¯ä»¥æ”¯æŒå…¶ä»–å‚æ•°<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST iisheng.cn</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT iisheng.cn</span><br></pre></td></tr></table></figure><h4 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -T file.txt url</span><br></pre></td></tr></table></figure><h4 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --referer http:<span class="comment">//www.example.com http://www.example.com</span></span><br></pre></td></tr></table></figure><h3 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User Agent"></a>User Agent</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --user-agent <span class="string">"[User Agent]"</span> [URL]</span><br></pre></td></tr></table></figure><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --cookie <span class="string">"name=xxx"</span> www.example.com</span><br></pre></td></tr></table></figure><h3 id="å¢åŠ å¤´ä¿¡æ¯"><a href="#å¢åŠ å¤´ä¿¡æ¯" class="headerlink" title="å¢åŠ å¤´ä¿¡æ¯"></a>å¢åŠ å¤´ä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --header <span class="string">"Content-Type:application/json"</span> http:<span class="comment">//example.com</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜³å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CURL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RestFul APIè®¾è®¡æŒ‡å—</title>
      <link href="/2019/04/01/restful/"/>
      <url>/2019/04/01/restful/</url>
      
        <content type="html"><![CDATA[<h3 id="RESTfulæ˜¯ä»€ä¹ˆ"><a href="#RESTfulæ˜¯ä»€ä¹ˆ" class="headerlink" title="RESTfulæ˜¯ä»€ä¹ˆ"></a>RESTfulæ˜¯ä»€ä¹ˆ</h3><p>RESTï¼ˆRepresentational State Transfeï¼‰æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œéµå¾ªRESTåŸåˆ™çš„æ¶æ„æˆ‘ä»¬å°±ç§°ä¸ºRESTfulæ¶æ„ã€‚Representational State Transfe ç›´è¯‘è¿‡æ¥å°±æ˜¯ã€è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ã€‘ï¼Œå…¶å®å®ƒçœç•¥äº†ä¸»è¯­ï¼Œè¡¨ç°å±‚æŒ‡çš„æ˜¯ã€èµ„æºã€‘çš„è¡¨ç°å±‚ï¼Œé€šä¿—çš„è®²å°±æ˜¯ï¼šèµ„æºåœ¨ç½‘ç»œä¸­ä»¥æŸç§å½¢å¼è¿›è¡ŒçŠ¶æ€è½¬ç§»ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨RESTful"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨RESTful" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨RESTful"></a>ä¸ºä»€ä¹ˆè¦ç”¨RESTful</h3><p>RESTful ç»™äººçš„æ„Ÿè§‰æ˜¯ä¼˜é›…ã€è§„èŒƒã€æ˜“æ‡‚ï¼Œä¸€ä¸ªç»“æ„æ¸…æ™°ã€æ˜“äºç†è§£çš„APIå®Œå…¨å¯ä»¥çœç•¥è®¸å¤šæ— æ„ä¹‰çš„æ²Ÿé€šå’Œæ–‡æ¡£ã€‚å¤§å®¶éƒ½ä½¿ç”¨ç›¸åŒçš„æ ‡å‡†ï¼Œæœ‰åˆ©äºå›¢é˜Ÿçš„æ•´ä½“æ•ˆç‡ã€‚</p><h3 id="æ¥å£è®¾è®¡"><a href="#æ¥å£è®¾è®¡" class="headerlink" title="æ¥å£è®¾è®¡"></a>æ¥å£è®¾è®¡</h3><p>ä¸€èˆ¬æ¥å£å°±æ˜¯å¢åˆ æ”¹æŸ¥ï¼ŒRESTful APIå°±åƒé€šç”¨çš„æ¨¡æ¿ï¼Œæˆ‘ä»¬ä»¥æ–‡ç« ï¼ˆArticleï¼‰ä¸¾ä¾‹ï¼Œé‚£ä¹ˆåŸºç¡€çš„URLå°±æœ‰ä¸€ä¸‹å‡ ç§ï¼š</p><ul><li><code>GET /articles:</code> æ–‡ç« åˆ—è¡¨</li><li><code>GET /articles/id:</code> æ–‡ç« è¯¦æƒ…</li><li><code>POST /articles:</code> åˆ›å»ºæ–‡ç« </li><li><code>PUT /articles/id:</code> ä¿®æ”¹æ–‡ç« </li><li><code>DELETE /articles/id:</code> åˆ é™¤æ–‡ç« </li></ul><p>RESTful ä¸­ä½¿ç”¨GETã€POSTã€PUTå’ŒDELETEæ¥åˆ†åˆ«è¡¨ç¤ºèµ„æºçš„æŸ¥è¯¢ã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ï¼Œå¹¶ä¸”é™¤äº†POSTå…¶ä»–ä¸‰ç§éƒ½å…·å¤‡å¹‚ç­‰æ€§ï¼ˆå¤šæ¬¡è¯·æ±‚æ•ˆæœç›¸åŒï¼‰ï¼ŒPOSTå’ŒPUTæœ€å¤§çš„åŒºåˆ«å°±æ˜¯å¹‚ç­‰æ€§ï¼Œæ‰€ä»¥PUTä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºï¼Œåªè¦åœ¨åˆ›å»ºå‰å°±ç¡®å®šå¥½èµ„æºçš„idã€‚</p><a id="more"></a><p>å°†idæ”¾åˆ°URLä¸­è€Œä¸æ˜¯Query Paramçš„å…¶ä¸­ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥è¡¨ç¤ºèµ„æºä¹‹é—´çš„å±‚çº§å…³ç³»ï¼Œä¾‹å¦‚æ–‡ç« ä¸‹é¢ä¼šæœ‰è¯„è®ºï¼ˆCommentï¼‰å’Œç‚¹èµï¼ˆLikeï¼‰ï¼Œè¿™ä¸¤é¡¹èµ„æºå¿…ç„¶ä¼šå±äºä¸€ç¯‡æ–‡ç« ï¼Œæ‰€ä»¥å®ƒä»¬çš„URLåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><ul><li><code>GET /articles/aid/comments:</code> æŸç¯‡æ–‡ç« çš„è¯„è®ºåˆ—è¡¨</li><li><code>GET /comments/cid:</code> è·å–æŸæ–‡ç« çš„æŸè¯„è®ºè¯¦æƒ…</li><li><code>POST /articles/aid/comments:</code> åœ¨æŸç¯‡æ–‡ç« ä¸­åˆ›å»ºè¯„è®º</li><li><code>PUT /comments/cid:</code> ä¿®æ”¹è¯„è®º</li><li><code>PUT /comments/cid:</code> åˆ é™¤è¯„è®º</li></ul><p>è¿™é‡Œæœ‰ä¸€ç‚¹æ¯”è¾ƒç‰¹æ®Šï¼Œæ°¸è¿œå»ä½¿ç”¨å¯ä»¥æŒ‡å‘èµ„æºçš„æœ€çŸ­URLè·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´æ—¢ç„¶<code>/comments/cid:</code>å·²ç»å¯ä»¥æŒ‡å‘ä¸€æ¡è¯„è®ºäº†ï¼Œå°±ä¸éœ€è¦<code>/articles/id/comments/cid:</code>ç‰¹æ„çš„æŒ‡å‡ºæ‰€å±çš„æ–‡ç« äº†ã€‚</p><ul><li><code>GET /articles/id/like:</code> æŸ¥çœ‹æ–‡ç« æ˜¯å¦è¢«ç‚¹èµ</li><li><code>PUT /articles/id/like:</code> ç‚¹èµæ–‡ç« </li><li><code>DELETE /articles/id/like:</code> å–æ¶ˆç‚¹èµ</li></ul><h3 id="æ¥å£ç‰ˆæœ¬"><a href="#æ¥å£ç‰ˆæœ¬" class="headerlink" title="æ¥å£ç‰ˆæœ¬"></a>æ¥å£ç‰ˆæœ¬</h3><p>éšç€ä¸šåŠ¡çš„è°ƒæ•´ï¼Œå¯èƒ½è€æ¥å£ä¸èƒ½å†æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°½å¯èƒ½åŠ å­—æ®µï¼Œæˆ–è€…æ–°åŠ æ¥å£ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">api.github.com/v1/users</span><br></pre></td></tr></table></figure></p><h3 id="Tokenå’ŒSign"><a href="#Tokenå’ŒSign" class="headerlink" title="Tokenå’ŒSign"></a>Tokenå’ŒSign</h3><p>APIéœ€è¦è®¾è®¡æˆæ— çŠ¶æ€çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯åœ¨æŸäº›è¯·æ±‚ä¸­éœ€è¦å¸¦ä¸Štokenæˆ–è€…signã€‚</p><ul><li>Token ç”¨äºç›‘å¬è¯·æ±‚æ‰€å±ç”¨æˆ·ï¼Œä¸€èˆ¬éƒ½æ˜¯æœåŠ¡ç«¯åœ¨ç™»å½•åéšæœºç”Ÿæˆä¸€æ®µå­—ç¬¦ä¸²ï¼ˆUUIDï¼‰å’Œç™»å½•ç”¨æˆ·è¿›è¡Œç»‘å®šï¼Œå†å°†å…¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚Tokençš„çŠ¶æ€ä¿æŒä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼å®ç°ï¼šä¸€ç§æ˜¯åœ¨ç”¨æˆ·æ¯æ¬¡æ“ä½œéƒ½ä¼šå»¶é•¿æˆ–è€…é‡ç½®TOKENç”Ÿå­˜æ—¶é—´ï¼ˆç±»ä¼¼äºç¼“å­˜çš„æœºåˆ¶ï¼‰ï¼Œå¦ä¸€ç§æ˜¯TOKENçš„ç”Ÿå­˜æ—¶é•¿å›ºå®šä¸å˜ã€‚</li><li>Sign ç”¨äºè¯æ˜è¯¥æ¬¡è¯·æ±‚åˆç†ï¼Œæ‰€ä»¥ä¸€èˆ¬å®¢æˆ·ç«¯ä¼šæŠŠè¯·æ±‚å‚æ•°æ‹¼æ¥ååŠ å¯†ä½œä¸ºSignä¼ ç»™æœåŠ¡ç«¯ï¼Œè¿™æ ·å³ä½¿è¢«æŠ“åŒ…äº†ï¼Œå¯¹æ–¹ä¿®æ”¹å‚æ•°è€Œæ— æ³•ç”Ÿæˆå¯¹åº”Signä¹Ÿä¼šè¢«è¯†ç ´ã€‚</li></ul><h3 id="ä¸šåŠ¡å‚æ•°"><a href="#ä¸šåŠ¡å‚æ•°" class="headerlink" title="ä¸šåŠ¡å‚æ•°"></a>ä¸šåŠ¡å‚æ•°</h3><p>æœç´¢<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/users/?query=iisheng</span><br></pre></td></tr></table></figure></p><p>è¿‡æ»¤<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/users/?gender=<span class="number">1</span></span><br></pre></td></tr></table></figure></p><h3 id="ç»Ÿè®¡å‚æ•°"><a href="#ç»Ÿè®¡å‚æ•°" class="headerlink" title="ç»Ÿè®¡å‚æ•°"></a>ç»Ÿè®¡å‚æ•°</h3><p>è¿™ä¸ªä¸€èˆ¬å¯èƒ½çš„å®ç°æ–¹æ¡ˆï¼Œæ˜¯åœ¨è¡Œä¸ºæ¥å£åé¢æ·»åŠ å‚æ•°åƒï¼Œä¸šåŠ¡å‚æ•°ä¸€æ ·ï¼Œè¿˜æœ‰ä¸€ç§å®ç°æ–¹æ¡ˆæ˜¯å•ç‹¬å†™ä¸€ä¸ªæ¥å£ï¼Œåªåšç»Ÿè®¡ç”¨ï¼Œæˆ‘æ„Ÿè§‰è¿™ç§æ–¹å¼æ›´å¥½ä¸€äº›ã€‚</p><h3 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/users/?offset=<span class="number">10</span>&amp;limit=<span class="number">10</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/articles/?cursor=<span class="number">2015</span>-<span class="number">01</span>-<span class="number">01</span> <span class="number">15</span>:<span class="number">20</span>:<span class="number">30</span>&amp;limit=<span class="number">10</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/users/?page=<span class="number">2</span>&amp;pre_page=<span class="number">20</span></span><br></pre></td></tr></table></figure><h3 id="è¿”å›æ•°æ®"><a href="#è¿”å›æ•°æ®" class="headerlink" title="è¿”å›æ•°æ®"></a>è¿”å›æ•°æ®</h3><ol><li>Jsonæ¯”Xmlå¯è§†åŒ–æ›´å¥½ï¼Œä¹Ÿæ›´çœæµé‡æ‰€ä»¥å°½é‡ä½¿ç”¨Jsonã€‚</li><li>åˆ›å»ºå’Œä¿®æ”¹æˆåŠŸåéœ€è¦è¿”å›è¯¥èµ„æºçš„å…¨éƒ¨ä¿¡æ¯ã€‚</li><li>è¿”å›æ•°æ®ä¸éœ€è¦å’Œå®¢æˆ·ç«¯ç•Œé¢è€¦åˆã€‚ä¸è¦åœ¨APIè®¾è®¡çš„æ—¶å€™å°±è€ƒè™‘å°‘è¿”å›å‡ ä¸ªå­—æ®µï¼Œå°‘ä¸€æ¬¡æŸ¥è¯¢ï¼ˆæ¯”å¦‚ç”¨joinï¼‰èƒ½å¸¦æ¥å¤šå¤§æ€§èƒ½æå‡ã€‚ä¸€å®šè¦ä»¥èµ„æºä¸ºå•ä½ï¼Œå³ä½¿å®¢æˆ·ç«¯ä¸€ä¸ªé¡µé¢éœ€è¦å±•ç¤ºå¤šä¸ªèµ„æºï¼Œä¹Ÿä¸è¦åœ¨ä¸€ä¸ªæ¥å£ä¸­å…¨éƒ¨è¿”å›ã€‚è€Œæ˜¯è®©å®¢æˆ·ç«¯åˆ†åˆ«è¯·æ±‚å¤šä¸ªæ¥å£ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ï¼ˆAPIç½‘å…³ï¼‰ï¼Œå†…éƒ¨RPCè°ƒç”¨åŸºç¡€æœåŠ¡ï¼Œæ„é€ å®¢æˆ·ç«¯éœ€è¦çš„æ•°æ®ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·ï¼Œå®¢æˆ·ç«¯å¯ä»¥åªè°ƒç”¨å°‘é‡æ¥å£ï¼‰</li></ol>]]></content>
      
      
      <categories>
          
          <category> ğŸ™„è®¾è®¡æ€æƒ³ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RESTFul </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Servletæºç è§£æ</title>
      <link href="/2019/03/25/servlet/"/>
      <url>/2019/03/25/servlet/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ä¸ªç®€å•çš„Servletè¯·æ±‚"><a href="#ä¸€ä¸ªç®€å•çš„Servletè¯·æ±‚" class="headerlink" title="ä¸€ä¸ªç®€å•çš„Servletè¯·æ±‚"></a>ä¸€ä¸ªç®€å•çš„Servletè¯·æ±‚</h3><ol><li>æ–°å»ºHelloControllerç»§æ‰¿HttpServlet</li><li>åœ¨web.xmlä¸­ï¼Œæ³¨å†ŒHelloControllerï¼Œæˆ–è€…ä½¿ç”¨@WebServletæ³¨è§£æ³¨å†ŒHelloController</li><li>é‡å†™doGet()ï¼ŒdoPost()æˆ–è€…å…¶ä»–doXxx()æ–¹æ³•</li></ol><h3 id="Servletè¯·æ±‚å‚æ•°"><a href="#Servletè¯·æ±‚å‚æ•°" class="headerlink" title="Servletè¯·æ±‚å‚æ•°"></a>Servletè¯·æ±‚å‚æ•°</h3><p>HttpServletRequestå’ŒHttpServletResponseæ˜¯doXxx()æ–¹æ³•çš„é»˜è®¤å‚æ•°ã€‚</p><h3 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a>HttpServletRequest</h3><p>HttpServletRequestä»£è¡¨æµè§ˆå™¨å‘é€ç»™æœåŠ¡å™¨çš„è¯·æ±‚æŠ¥æ–‡ã€‚è¯¥å¯¹è±¡ç”±webæœåŠ¡å™¨åˆ›å»ºï¼ˆå¦‚Tomcatï¼‰ï¼Œæœ€ç»ˆä½œä¸ºå‚æ•°ä¼ é€’åˆ°doXxx()æˆ–è€…å…¶ä»–æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨doXxx()æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨</p><ol><li><p>è·å–ç”¨æˆ·å‘é€çš„è¯·æ±‚å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getParmater(<span class="string">"name"</span>);</span><br></pre></td></tr></table></figure></li><li><p>è·å–é¡¹ç›®çš„åå­—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getContextPath();</span><br></pre></td></tr></table></figure></li></ol><a id="more"></a><ol start="3"><li>ä½œä¸ºä¸€ä¸ªåŸŸå¯¹è±¡ï¼Œåœ¨ä¸åŒçš„webèµ„æºä¹‹é—´å…±äº«æ•°æ®ã€‚</li><li>è¯·æ±‚å’Œè½¬å‘<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getRequestDispatcher(<span class="string">"target.html"</span>).forward(request,response);</span><br></pre></td></tr></table></figure></li></ol><h3 id="HttpServletResponse"><a href="#HttpServletResponse" class="headerlink" title="HttpServletResponse"></a>HttpServletResponse</h3><p>HttpServletResponseä»£è¡¨æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„å“åº”æŠ¥æ–‡ã€‚è¯¥å¯¹è±¡ç”±webæœåŠ¡å™¨åˆ›å»ºï¼ˆå¦‚Tomcatï¼‰ï¼Œæœ€ç»ˆå°†ä½œä¸ºå‚æ•°ä¼ é€’åˆ°doXxx()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨doXxx()æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨ã€‚</p><ol><li><p>å“åº”ç»™æµè§ˆå™¨ä¸€ä¸ªç½‘é¡µæˆ–è€…Jsonæ•°æ®ç­‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PrintWriter printWriter = response.getWriter();</span><br><span class="line">printWriter.writer(Hello Servlet~);</span><br></pre></td></tr></table></figure></li><li><p>è¯·æ±‚çš„é‡å®šå‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(<span class="string">"target.html"</span>);</span><br></pre></td></tr></table></figure></li></ol><h3 id="è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«"><a href="#è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«" class="headerlink" title="è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«"></a>è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«</h3><table><thead><tr><th></th><th style="text-align:center">è½¬å‘</th><th style="text-align:right">é‡å®šå‘</th></tr></thead><tbody><tr><td>è¯·æ±‚çš„æ¬¡æ•°</td><td style="text-align:center">1</td><td style="text-align:right">2</td></tr><tr><td>å‘ç”Ÿçš„ä½ç½®</td><td style="text-align:center">æœåŠ¡å™¨å†…éƒ¨</td><td style="text-align:right">æµè§ˆå™¨</td></tr><tr><td>æµè§ˆå™¨åœ°å€</td><td style="text-align:center">ä¸æ”¹å˜</td><td style="text-align:right">æ”¹å˜</td></tr></tbody></table><h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><p>é€šè¿‡å®ç°Filteræ¥å£ï¼Œå®Œæˆæˆ‘ä»¬è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨åŠŸèƒ½ã€‚è¿‡æ»¤å™¨æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>HttpServletRequeståˆ°è¾¾Servletä¹‹å‰ï¼Œæ‹¦æˆªå®¢æˆ·çš„HttpServletRequest</li><li>æ ¹æ®éœ€è¦æ£€æŸ¥HttpServletRequestï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹HttpServletRequestçš„å¤´å’Œæ•°æ®</li><li>åœ¨HttpservletResponseåˆ°è¾¾å®¢æˆ·ç«¯ä¹‹å‰ï¼Œæ‹¦æˆªHttpServletResponse</li><li>æ ¹æ®éœ€è¦æ£€æŸ¥HttpServletResponseï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹HttpServletReponseçš„å¤´å’Œæ•°æ®</li></ol><h3 id="ç›‘å¬å™¨"><a href="#ç›‘å¬å™¨" class="headerlink" title="ç›‘å¬å™¨"></a>ç›‘å¬å™¨</h3><p>ç›‘å¬å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼ŒæœåŠ¡ç«¯çš„æ“ä½œï¼Œé€šè¿‡ç›‘å¬è‡ªåŠ¨æ¿€å‘ä¸€äº›æ“ä½œã€‚ç›‘å¬å™¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li>ServletContextListener:å¯¹åº”æ‰€æœ‰ç”¨æˆ·</li><li>ServletSessionListener:å¯¹åº”äºä¸€ä¸ªç”¨æˆ·</li><li>ServletRequestListener:å¯¹åº”ç”¨ä¸€ä¸ªè¯·æ±‚<br>æˆ‘ä»¬å¯ä»¥å®ç°ä¸Šé¢çš„æ¥å£ï¼Œå»å®Œæˆç›‘å¬äº‹ä»¶ã€‚</li></ol><h3 id="Servletç”Ÿå‘½å‘¨æœŸ"><a href="#Servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Servletç”Ÿå‘½å‘¨æœŸ"></a>Servletç”Ÿå‘½å‘¨æœŸ</h3><ol><li>é€šè¿‡è°ƒç”¨init()æ–¹æ³•åˆå§‹åŒ–Servletå®ä¾‹</li><li>è°ƒç”¨service()æ–¹æ³•å¤„ç†è¯·æ±‚</li><li>è°ƒç”¨ç›¸åº”çš„è¯·æ±‚æ–¹å¼çš„æ–¹æ³•æ¯”å¦‚postè¯·æ±‚ï¼Œè°ƒç”¨doPost()æ–¹æ³•</li><li>åœæ­¢æœåŠ¡çš„æ—¶å€™ï¼Œè°ƒç”¨destroy()æ–¹æ³•</li></ol><h3 id="HttpServletç±»å›¾å…³ç³»"><a href="#HttpServletç±»å›¾å…³ç³»" class="headerlink" title="HttpServletç±»å›¾å…³ç³»"></a>HttpServletç±»å›¾å…³ç³»</h3><p><img src="/images/servlet-class-diagram.png" alt="image"></p><h3 id="Servletå·¥ä½œæµç¨‹"><a href="#Servletå·¥ä½œæµç¨‹" class="headerlink" title="Servletå·¥ä½œæµç¨‹"></a>Servletå·¥ä½œæµç¨‹</h3><p><img src="/images/http-request-sequence-diagram.png" alt="image"></p><ol><li>æµè§ˆå™¨å‘å‡ºHttpè¯·æ±‚åˆ°Servletå®¹å™¨</li><li>Servletå®¹å™¨ç”ŸæˆHttpServletRequestå’ŒHttpServletResponse</li><li>Servletå°†HttpServletRequestå’ŒHttpServletResponseå‚æ•°ä¼ é€’ç»™Filter,Filterå¤„ç†è¿‡æ»¤è¯·æ±‚</li><li>Filterå°†HttpServletRequestå’ŒHttpServletResponseä¼ é€’ç»™Servlet,Servletå¤„ç†è¯·æ±‚</li><li>Servletå¤„ç†å®Œè¯·æ±‚å,å°†æ•°æ®è¿”å›ç»™Filter,Filterè¿”å›ç»™Servletå®¹å™¨,Servletå®¹å™¨å†è¿”å›ç»™æµè§ˆå™¨</li></ol>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜¤æºç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Elasticsearchå­¦ä¹ æ€»ç»“</title>
      <link href="/2019/03/11/elasticsearch/"/>
      <url>/2019/03/11/elasticsearch/</url>
      
        <content type="html"><![CDATA[<h3 id="ElasticSearch-åŸºæœ¬æ¦‚å¿µ"><a href="#ElasticSearch-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ElasticSearch åŸºæœ¬æ¦‚å¿µ"></a>ElasticSearch åŸºæœ¬æ¦‚å¿µ</h3><h4 id="èŠ‚ç‚¹ï¼ˆnodeï¼‰"><a href="#èŠ‚ç‚¹ï¼ˆnodeï¼‰" class="headerlink" title="èŠ‚ç‚¹ï¼ˆnodeï¼‰"></a>èŠ‚ç‚¹ï¼ˆnodeï¼‰</h4><p>ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä½ é›†ç¾¤ä¸­çš„ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä½œä¸ºé›†ç¾¤çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå­˜å‚¨ä½ çš„æ•°æ®ï¼Œå‚ä¸é›†ç¾¤çš„ç´¢å¼•å’Œæœç´¢åŠŸèƒ½ã€‚å’Œé›†ç¾¤ç±»ä¼¼ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªåå­—æ ‡è¯†ã€‚</p><h4 id="ç´¢å¼•ï¼ˆindexï¼‰"><a href="#ç´¢å¼•ï¼ˆindexï¼‰" class="headerlink" title="ç´¢å¼•ï¼ˆindexï¼‰"></a>ç´¢å¼•ï¼ˆindexï¼‰</h4><p>ä¸€ä¸ªç´¢å¼•å°±æ˜¯ä¸€ä¸ªæ‹¥æœ‰å‡ ä¸ªç›¸ä¼¼ç‰¹å¾çš„æ–‡æ¡£é›†åˆã€‚ç´¢å¼•ç”±ä¸€ä¸ªåå­—æ¥æ ‡è¯†ï¼ˆå¿…é¡»å…¨éƒ¨å°å†™å­—æ¯ï¼‰ã€‚</p><h4 id="ç±»å‹ï¼ˆtypeï¼‰"><a href="#ç±»å‹ï¼ˆtypeï¼‰" class="headerlink" title="ç±»å‹ï¼ˆtypeï¼‰"></a>ç±»å‹ï¼ˆtypeï¼‰</h4><p>åœ¨ä¸€ä¸ªç´¢å¼•ä¸­ä½ å¯ä»¥å®šä¹‰ä¸€ç§æˆ–å¤šç§ç±»å‹ã€‚ä¸€ä¸ªç±»å‹æ˜¯ä½ é€»è¾‘ä¸Šçš„åˆ†ç±»/åˆ†åŒºã€‚</p><h4 id="æ–‡æ¡£ï¼ˆdocumentï¼‰"><a href="#æ–‡æ¡£ï¼ˆdocumentï¼‰" class="headerlink" title="æ–‡æ¡£ï¼ˆdocumentï¼‰"></a>æ–‡æ¡£ï¼ˆdocumentï¼‰</h4><p>ä¸€ä¸ªæ–‡æ¡£æ˜¯å¯è¢«ç´¢å¼•çš„åŸºæœ¬ä¿¡æ¯å•å…ƒï¼Œæ–‡æ¡£ä»¥JSONæ ¼å¼æ¥è¡¨ç¤ºã€‚</p><a id="more"></a><h4 id="åˆ†ç‰‡å’Œå¤åˆ¶ï¼ˆshards-amp-replicasï¼‰"><a href="#åˆ†ç‰‡å’Œå¤åˆ¶ï¼ˆshards-amp-replicasï¼‰" class="headerlink" title="åˆ†ç‰‡å’Œå¤åˆ¶ï¼ˆshards &amp; replicasï¼‰"></a>åˆ†ç‰‡å’Œå¤åˆ¶ï¼ˆshards &amp; replicasï¼‰</h4><p>ä¸€ä¸ªç´¢å¼•å¯ä»¥å­˜å‚¨è¶…è¿‡å•ä¸ªèŠ‚ç‚¹ç¡¬ä»¶é™åˆ¶çš„å¤§é‡æ•°æ®ã€‚ElasticSearchæä¾›äº†å°†ç´¢å¼•åˆ’åˆ†æˆå¤šä»½çš„èƒ½åŠ›<br>ï¼Œè¿™äº›ä»½å°±å«åšåˆ†ç‰‡ã€‚å½“åˆ›å»ºä¸€ä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šåˆ†ç‰‡çš„æ•°é‡ã€‚æ¯ä¸ªåˆ†ç‰‡æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„ï¼Œå¹¶ä¸”ç‹¬ç«‹çš„ç´¢å¼•ï¼Œè¿™ä¸ªç´¢å¼•å¯ä»¥è¢«æ”¾ç½®åˆ°é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šã€‚</p><p>åˆ†ç‰‡ä¹‹æ‰€ä»¥é‡è¦ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼šï¼ˆ1ï¼‰å…è®¸æ°´å¹³åˆ†å‰²/æ‰©å±•å†…å®¹å®¹é‡ï¼ˆ2ï¼‰å…è®¸åœ¨åˆ†ç‰‡ä¹‹ä¸Šè¿›è¡Œåˆ†å¸ƒå¼çš„å¹¶è¡Œçš„æ“ä½œï¼Œè¿›è€Œæé«˜æ€§èƒ½ã€ååé‡ã€‚</p><p>åœ¨ä¸€ä¸ªç½‘ç»œç¯å¢ƒé‡Œå¤±è´¥éšæ—¶å¯èƒ½å‘ç”Ÿï¼Œåœ¨æŸä¸ªåˆ†ç‰‡æˆ–è€…èŠ‚ç‚¹ä¸çŸ¥é“æ€ä¹ˆå°±å¤„äºç¦»çº¿çŠ¶æ€ï¼Œæˆ–è€…ä»»ä½•åŸå› æ¶ˆå¤±äº†ï¼Œè¿™ç§æƒ…å†µä¸‹æœ‰ä¸€ç§æ•…éšœè½¬ç§»æœºåˆ¶æ˜¯éå¸¸æœ‰ç”¨å¹¶ä¸”å¼ºçƒˆæ¨èçš„ã€‚å› æ­¤ï¼ŒEleasticSearchå¯ä»¥åˆ›å»ºä¸€ä»½æˆ–è€…å¤šä»½æ‹·è´ï¼Œè¿™äº›æ‹·è´å«åšå¤åˆ¶åˆ†ç‰‡ï¼Œæˆ–è€…ç›´æ¥å«å¤åˆ¶ã€‚</p><p>å¤åˆ¶ä¹‹æ‰€ä»¥é‡è¦ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ol><li>åœ¨åˆ†ç‰‡/èŠ‚ç‚¹å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæä¾›äº†é«˜å¯ç”¨æ€§ã€‚å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæ³¨æ„åˆ°å¤åˆ¶åˆ†ç‰‡ä»ä¸ä¸åŸå§‹åˆ†ç‰‡ç½®äºåŒä¸€èŠ‚ç‚¹ä¸Šæ˜¯éå¸¸é‡è¦çš„</li><li>æ‰©å±•äº†æœç´¢é‡/ååé‡ï¼Œå› ä¸ºæœç´¢å¯ä»¥åœ¨æ‰€æœ‰çš„å¤åˆ¶ä¸Šå¹¶è¡Œã€‚</li></ol><h3 id="ElasticSearch-å¸¸ç”¨curl"><a href="#ElasticSearch-å¸¸ç”¨curl" class="headerlink" title="ElasticSearch å¸¸ç”¨curl"></a>ElasticSearch å¸¸ç”¨curl</h3><h5 id="å¢åŠ ç´¢å¼•mappingæ–°å­—æ®µ"><a href="#å¢åŠ ç´¢å¼•mappingæ–°å­—æ®µ" class="headerlink" title="å¢åŠ ç´¢å¼•mappingæ–°å­—æ®µ"></a>å¢åŠ ç´¢å¼•mappingæ–°å­—æ®µ</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT http:<span class="comment">//127.0.0.1:9201/job_index_v6/_mapping/b2b -d '&#123;"properties":&#123;"new_field_name":&#123;"type":"string"&#125;&#125;&#125;'</span></span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹é›†ç¾¤æ˜¯å¦å¥åº·"><a href="#æŸ¥çœ‹é›†ç¾¤æ˜¯å¦å¥åº·" class="headerlink" title="æŸ¥çœ‹é›†ç¾¤æ˜¯å¦å¥åº·"></a>æŸ¥çœ‹é›†ç¾¤æ˜¯å¦å¥åº·</h5> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">'localhost:9201/_cat/health?v'</span></span><br></pre></td></tr></table></figure><h5 id="åˆ—å‡ºæ‰€æœ‰ç´¢å¼•"><a href="#åˆ—å‡ºæ‰€æœ‰ç´¢å¼•" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰ç´¢å¼•"></a>åˆ—å‡ºæ‰€æœ‰ç´¢å¼•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">'localhost:9201/_cat/indices?v'</span></span><br></pre></td></tr></table></figure><h5 id="è·å–é›†ç¾¤çš„èŠ‚ç‚¹åˆ—è¡¨"><a href="#è·å–é›†ç¾¤çš„èŠ‚ç‚¹åˆ—è¡¨" class="headerlink" title="è·å–é›†ç¾¤çš„èŠ‚ç‚¹åˆ—è¡¨"></a>è·å–é›†ç¾¤çš„èŠ‚ç‚¹åˆ—è¡¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">'localhost:9201/_cat/nodes?v'</span></span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X DELETE <span class="number">127.0</span>.0.1:<span class="number">9201</span>/agent_job_index</span><br></pre></td></tr></table></figure><h5 id="ç»™ç´¢å¼•è®¾ç½®åˆ«å"><a href="#ç»™ç´¢å¼•è®¾ç½®åˆ«å" class="headerlink" title="ç»™ç´¢å¼•è®¾ç½®åˆ«å"></a>ç»™ç´¢å¼•è®¾ç½®åˆ«å</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT <span class="number">127.0</span>.0.1:<span class="number">9201</span>/job_index_v6/_alias/job_index</span><br></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹æŒ‡å®šç´¢å¼•çš„mapping"><a href="#æŸ¥çœ‹æŒ‡å®šç´¢å¼•çš„mapping" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šç´¢å¼•çš„mapping"></a>æŸ¥çœ‹æŒ‡å®šç´¢å¼•çš„mapping</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET <span class="string">"http://127.0.0.1:9201/job_index_v6/_mapping?pretty"</span></span><br></pre></td></tr></table></figure><h5 id="æ¸…é™¤æŒ‡å®šç´¢å¼•-æ•°æ®"><a href="#æ¸…é™¤æŒ‡å®šç´¢å¼•-æ•°æ®" class="headerlink" title="æ¸…é™¤æŒ‡å®šç´¢å¼• æ•°æ®"></a>æ¸…é™¤æŒ‡å®šç´¢å¼• æ•°æ®</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST <span class="string">'127.0.0.1:9201/job_index_v6/job/_delete_by_query?refresh&amp;slices=5&amp;pretty'</span> -H <span class="string">'Content-Type: application/json'</span> -d <span class="string">'&#123;"query":&#123;"match_all":&#123;&#125;&#125;&#125;'</span></span><br></pre></td></tr></table></figure><h5 id="æ ¹æ®æŸ¥è¯¢åˆ é™¤"><a href="#æ ¹æ®æŸ¥è¯¢åˆ é™¤" class="headerlink" title="æ ¹æ®æŸ¥è¯¢åˆ é™¤"></a>æ ¹æ®æŸ¥è¯¢åˆ é™¤</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST <span class="string">'127.0.0.1:9201/job_index_v6/job/_delete_by_query?refresh&amp;slices=5&amp;pretty'</span> -H <span class="string">'Content-Type: application/json'</span> -d <span class="string">'&#123;"query":&#123;"term":&#123;"userId":"1017"&#125;&#125;&#125;'</span></span><br></pre></td></tr></table></figure><h5 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http:<span class="comment">//127.0.0.1:9200/job_index_v6/job/_search -d '&#123;"query":&#123;"term":&#123;"indexStatus":"1"&#125;&#125;&#125;' | python -m json.tool</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http:<span class="comment">//127.0.0.1:9200/job_index_v6/job/_search -d '&#123;"query":&#123;"bool":&#123;"filter":[&#123;"match":&#123;"is2CJob":&#123;"query":true&#125;&#125;&#125;,&#123;"match":&#123;"isAgentJob":&#123;"query":true&#125;&#125;&#125;,&#123;"match":&#123;"switchStatus":&#123;"query":2&#125;&#125;&#125;]&#125;&#125;&#125;' | python -m json.tool</span></span><br></pre></td></tr></table></figure><h5 id="æœç´¢æœ€å¤§å€¼"><a href="#æœç´¢æœ€å¤§å€¼" class="headerlink" title="æœç´¢æœ€å¤§å€¼"></a>æœç´¢æœ€å¤§å€¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT http:<span class="comment">//127.0.0.1:9200/job_index_v6/_settings -d '&#123; "index" : &#123; "max_result_window" : 20000&#125;&#125;'</span></span><br></pre></td></tr></table></figure><h5 id="è®¾ç½®é»˜è®¤å€¼"><a href="#è®¾ç½®é»˜è®¤å€¼" class="headerlink" title="è®¾ç½®é»˜è®¤å€¼"></a>è®¾ç½®é»˜è®¤å€¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -POST <span class="number">127.0</span>.0.1:<span class="number">9201</span>/job_index_v6/job/_update_by_query -d <span class="string">'&#123;"script":&#123;"lang":"painless","inline":"if (ctx._source.is2CJob == null) &#123;ctx._source.is2CJob= '</span><span class="keyword">true</span><span class="string">'&#125;"&#125;&#125;'</span></span><br></pre></td></tr></table></figure><h5 id="æ·»åŠ ä¸€æ¡æ•°æ®"><a href="#æ·»åŠ ä¸€æ¡æ•°æ®" class="headerlink" title="æ·»åŠ ä¸€æ¡æ•°æ®"></a>æ·»åŠ ä¸€æ¡æ•°æ®</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST <span class="string">'localhost:9201/job_index_v6/job/22c3cade5f5a4f189f6145cb0b15b737?pretty'</span> -d<span class="string">'&#123;"id":"22c3cade5f5a4f189f6145cb0b15b737","sourceId":"22c3cade5f5a4f189f6145cb0b15b737","label":0,"userId":"8a1026775d16fbb2015d17a4771a0348","name":"1231231","operatorName":null,"refuseReason":null,"description":"2","workAddress":"éŸ©å›½","countryId":[513114,513100,510000],"countryNames":["éŸ©å›½"],"salary":3000,"salaryHigh":4000,"listPrice":2222,"channelPrice":0,"status":2,"indexStatus":2,"is2CJob":true,"deposit":500,"modifyTime":1546593027000,"createTime":1546593027000,"refreshTime":1546593027000,"companyId":"8a1026775981103b01598110cee70004","heat":0,"praise":0,"applyment":0,"comment":0,"browseNumber":0,"postName":["å»ºç­‘","ç”µå·¥"],"post":[111200,110000,111220],"tagName":[],"tag":[],"systemTag":[],"allTag":[2215],"businessLine":237,"score":63393027,"newOldFlag":1,"switchStatus":0,"agentQuantity":0,"company.name":"åŒ—äº¬èµ°å‡ºè¶£ç§‘æŠ€å‘å±•æœ‰é™å…¬å¸","company.shortName":"èµ°å‡ºè¶£","company.tag":[2215],"company.location":[110000,110100,110108],"company.status":1&#125;'</span></span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹-ç´¢å¼•-è®¾ç½®"><a href="#æŸ¥çœ‹-ç´¢å¼•-è®¾ç½®" class="headerlink" title="æŸ¥çœ‹ ç´¢å¼• è®¾ç½®"></a>æŸ¥çœ‹ ç´¢å¼• è®¾ç½®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET <span class="string">"http://zcq-product2:9200/job_index_v6/_settings?pretty"</span></span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ElasticSearchçŠ¶æ€"><a href="#æŸ¥çœ‹ElasticSearchçŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ElasticSearchçŠ¶æ€"></a>æŸ¥çœ‹ElasticSearchçŠ¶æ€</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">'localhost:9201'</span> | python -m json.tool</span><br></pre></td></tr></table></figure><h5 id="æŒ‰ç…§æ’åºæœç´¢"><a href="#æŒ‰ç…§æ’åºæœç´¢" class="headerlink" title="æŒ‰ç…§æ’åºæœç´¢"></a>æŒ‰ç…§æ’åºæœç´¢</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -POST http:<span class="comment">//test2.51zouchuqu.com:9201/job_rcmd_score_index/score/_search -d '&#123;"from":0,"size":1000,"query":&#123;"bool":&#123;"disable_coord":false,"adjust_pure_negative":true,"boost":1&#125;&#125;,"explain":false,"sort":[&#123;"score":&#123;"order":"desc"&#125;&#125;]&#125;'</span></span><br></pre></td></tr></table></figure><h3 id="ElasticSearch-å¤‡ä»½ã€å¯¼å…¥ã€å¯¼å‡º"><a href="#ElasticSearch-å¤‡ä»½ã€å¯¼å…¥ã€å¯¼å‡º" class="headerlink" title="ElasticSearch å¤‡ä»½ã€å¯¼å…¥ã€å¯¼å‡º"></a>ElasticSearch å¤‡ä»½ã€å¯¼å…¥ã€å¯¼å‡º</h3><h4 id="es-æ•°æ®å¯¼å…¥å¯¼å‡º"><a href="#es-æ•°æ®å¯¼å…¥å¯¼å‡º" class="headerlink" title="es æ•°æ®å¯¼å…¥å¯¼å‡º"></a>es æ•°æ®å¯¼å…¥å¯¼å‡º</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install elasticdump</span><br><span class="line">./bin/elasticdump</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">index-&gt;index:</span><br><span class="line">elasticdump --input=http:<span class="comment">//localhost:9200/test --output=http://localhost:9200/test</span></span><br><span class="line">index-&gt;file:</span><br><span class="line">elasticdump --input=http:<span class="comment">//localhost:9200/test --output=./json.log</span></span><br><span class="line">file-&gt;index:</span><br><span class="line">elasticdump --input=./json.log --output=http:<span class="comment">//localhost:9200/test</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå‘½ä»¤é€ŸæŸ¥ç¬”è®°</title>
      <link href="/2019/02/25/linux/"/>
      <url>/2019/02/25/linux/</url>
      
        <content type="html"><![CDATA[<h3 id="cd-è¿›å…¥æŒ‡å®šç›®å½•"><a href="#cd-è¿›å…¥æŒ‡å®šç›®å½•" class="headerlink" title="cd  è¿›å…¥æŒ‡å®šç›®å½•"></a>cd  è¿›å…¥æŒ‡å®šç›®å½•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd dir          <span class="comment">// è¿›å…¥å½“å‰ç›®å½•çš„å­ç›®å½•</span></span><br><span class="line">cd ..           <span class="comment">// è¿›å…¥å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•</span></span><br><span class="line">cd /            <span class="comment">// è¿›å…¥ç³»ç»Ÿæ ¹ç›®å½•</span></span><br><span class="line">cd ~            <span class="comment">// è¿›å…¥å½“å‰ç”¨æˆ·ä¸»ç›®å½•</span></span><br><span class="line">cd /usr/local   <span class="comment">// è¿›å…¥ç‰¹å®šç›®å½•</span></span><br></pre></td></tr></table></figure><h3 id="ls-åˆ—å‡ºå½“å‰ç›®å½•æ–‡ä»¶"><a href="#ls-åˆ—å‡ºå½“å‰ç›®å½•æ–‡ä»¶" class="headerlink" title="ls åˆ—å‡ºå½“å‰ç›®å½•æ–‡ä»¶"></a>ls åˆ—å‡ºå½“å‰ç›®å½•æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ls -a   <span class="comment">// åˆ—å‡ºå½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…å«éšè—æ–‡ä»¶</span></span><br><span class="line">ls -l   <span class="comment">// åˆ—å‡ºé•¿æ•°æ®ä¸²ï¼ŒåŒ…å«æ–‡ä»¶çš„æƒé™å’Œå±æ€§ ç›¸å½“äº ll</span></span><br><span class="line">ls -i   <span class="comment">// æ˜¾ç¤ºæ–‡ä»¶èŠ‚ç‚¹ç´¢å¼•å·</span></span><br><span class="line">ls -t   <span class="comment">// æŒ‰ç…§ä¿®æ”¹æ—¶é—´ï¼Œé™åºæ˜¾ç¤º</span></span><br><span class="line">ls -rt  <span class="comment">// æŒ‰ç…§ä¿®æ”¹æ—¶é—´ï¼Œå‡åºæ˜¾ç¤º</span></span><br><span class="line">ls -alht  <span class="comment">// æŒ‰ç…§ä¿®æ”¹æ—¶é—´ï¼Œé™åºæ˜¾ç¤º hæ˜¾ç¤ºæ–‡ä»¶å¤§å°</span></span><br></pre></td></tr></table></figure><font color="red" size="3" face="â€œConsolasâ€">ä¸ªäººæ„Ÿè§‰ ll -h æ¯”è¾ƒå¥½ç”¨</font><h3 id="mv-ä¿®æ”¹æ–‡ä»¶åå­—æˆ–ç§»åŠ¨ä½ç½®"><a href="#mv-ä¿®æ”¹æ–‡ä»¶åå­—æˆ–ç§»åŠ¨ä½ç½®" class="headerlink" title="mv  ä¿®æ”¹æ–‡ä»¶åå­—æˆ–ç§»åŠ¨ä½ç½®"></a>mv  ä¿®æ”¹æ–‡ä»¶åå­—æˆ–ç§»åŠ¨ä½ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv file newname         <span class="comment">// æ›´æ”¹æ–‡ä»¶åå­—</span></span><br><span class="line">mv /dir/file /otherdir  <span class="comment">// ç§»åŠ¨æ–‡ä»¶ä½ç½®</span></span><br></pre></td></tr></table></figure><h3 id="rm-åˆ é™¤"><a href="#rm-åˆ é™¤" class="headerlink" title="rm åˆ é™¤"></a>rm åˆ é™¤</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -rf dir  <span class="comment">// é€’å½’åˆ é™¤æŒ‡å®šç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">rm file     <span class="comment">// åˆ é™¤æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line">rm -rf *    <span class="comment">// é€’å½’åˆ é™¤å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="cp-å¤åˆ¶"><a href="#cp-å¤åˆ¶" class="headerlink" title="cp å¤åˆ¶"></a>cp å¤åˆ¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -r /dir /other-dir    <span class="comment">// å°†dirç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œç§»åŠ¨åˆ°other-dirç›®å½•ä¸­</span></span><br><span class="line">cp fileA fileB           <span class="comment">// å¤‡ä»½Aæ–‡ä»¶ï¼Œå¹¶æ”¹å</span></span><br></pre></td></tr></table></figure><h3 id="kill-æ€è¿›ç¨‹"><a href="#kill-æ€è¿›ç¨‹" class="headerlink" title="kill æ€è¿›ç¨‹"></a>kill æ€è¿›ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kill -<span class="number">9</span>  PID   <span class="comment">// å°†PIDè¿›ç¨‹ç»“æŸ</span></span><br><span class="line">kill -<span class="number">17</span> PID   <span class="comment">// å°†PIDè¿›ç¨‹æš‚åœ</span></span><br></pre></td></tr></table></figure><h3 id="chown-ä¿®æ”¹æ–‡ä»¶æ‰€å±ç”¨æˆ·æˆ–ç”¨æˆ·ç»„"><a href="#chown-ä¿®æ”¹æ–‡ä»¶æ‰€å±ç”¨æˆ·æˆ–ç”¨æˆ·ç»„" class="headerlink" title="chown ä¿®æ”¹æ–‡ä»¶æ‰€å±ç”¨æˆ·æˆ–ç”¨æˆ·ç»„"></a>chown ä¿®æ”¹æ–‡ä»¶æ‰€å±ç”¨æˆ·æˆ–ç”¨æˆ·ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R root:root /tmp    <span class="comment">// ä¿®æ”¹ tmp ç›®å½•æ‰€å±ç”¨æˆ·ä¸º rootï¼Œç”¨æˆ·ç»„ä¸º root</span></span><br><span class="line">chown iisheng file  <span class="comment">// å°†fileçš„æ‰€æœ‰è€…è®¾ç½®ä¸ºiisheng</span></span><br></pre></td></tr></table></figure><h3 id="chmod-ç»™æ–‡ä»¶è®¾ç½®åˆ«äººè®¿é—®æƒé™"><a href="#chmod-ç»™æ–‡ä»¶è®¾ç½®åˆ«äººè®¿é—®æƒé™" class="headerlink" title="chmod ç»™æ–‡ä»¶è®¾ç½®åˆ«äººè®¿é—®æƒé™"></a>chmod ç»™æ–‡ä»¶è®¾ç½®åˆ«äººè®¿é—®æƒé™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">766</span> file <span class="comment">// ç»™æŸä¸ªæ–‡ä»¶åˆ«äººè®¿é—®æƒé™</span></span><br><span class="line">chmod <span class="number">777</span> * <span class="comment">// å½“å‰æ–‡ä»¶å¤¹æ‰€æœ‰æ–‡ä»¶æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è¯»å†™</span></span><br></pre></td></tr></table></figure><h3 id="cat-æŸ¥çœ‹æ–‡ä»¶æˆ–å†™åˆ°æŒ‡å®šæ–‡ä»¶å†…å®¹"><a href="#cat-æŸ¥çœ‹æ–‡ä»¶æˆ–å†™åˆ°æŒ‡å®šæ–‡ä»¶å†…å®¹" class="headerlink" title="cat  æŸ¥çœ‹æ–‡ä»¶æˆ–å†™åˆ°æŒ‡å®šæ–‡ä»¶å†…å®¹"></a>cat  æŸ¥çœ‹æ–‡ä»¶æˆ–å†™åˆ°æŒ‡å®šæ–‡ä»¶å†…å®¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat file                                  <span class="comment">// æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶å†…å®¹</span></span><br><span class="line">cat -n file                               <span class="comment">// æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶å†…å®¹ï¼Œå¹¶ç”±1å¼€å§‹å¯¹è¡Œæ•°ç¼–å·</span></span><br><span class="line">cat file &gt; newFile                        <span class="comment">// å°†æ–‡ä»¶çš„å†…å®¹å†™åˆ°æ–°æ–‡ä»¶é‡Œé¢</span></span><br><span class="line">cat file | head -n <span class="number">3000</span> | tail -n +<span class="number">1000</span>   <span class="comment">// æŸ¥çœ‹æ–‡ä»¶çš„1000-3000è¡Œ</span></span><br><span class="line">cat /proc/PID/status                      <span class="comment">// æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="scp-ç»ˆç«¯è¿œç¨‹ä¸‹è½½ä¸Šä¼ æ–‡ä»¶"><a href="#scp-ç»ˆç«¯è¿œç¨‹ä¸‹è½½ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="scp ç»ˆç«¯è¿œç¨‹ä¸‹è½½ä¸Šä¼ æ–‡ä»¶"></a>scp ç»ˆç«¯è¿œç¨‹ä¸‹è½½ä¸Šä¼ æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp  root<span class="meta">@iisheng</span>.cn:/path/filename ./                              <span class="comment">// æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°å½“å‰ç›®å½•</span></span><br><span class="line">scp  -P  <span class="number">2222</span>  /home/jdk.tar.gz   root<span class="meta">@iisheng</span>.cn:/root/jdk.tar.gz  <span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">scp  -P  <span class="number">2222</span>  -r /home/jdk/ root<span class="meta">@isheng</span>.me                        <span class="comment">// ä¸Šä¼ æ–‡ä»¶ç›®å½•</span></span><br><span class="line">scp  -P  <span class="number">2222</span>  -r /home/jdk/ root<span class="meta">@isheng</span>.me                        <span class="comment">// ä½¿ç”¨IPV6å¯»å€ä¸Šä¼ æ–‡ä»¶ç›®å½•</span></span><br></pre></td></tr></table></figure><h3 id="netstat-æ‰“å°ç½‘ç»œä¿¡æ¯çŠ¶æ€"><a href="#netstat-æ‰“å°ç½‘ç»œä¿¡æ¯çŠ¶æ€" class="headerlink" title="netstat  æ‰“å°ç½‘ç»œä¿¡æ¯çŠ¶æ€"></a>netstat  æ‰“å°ç½‘ç»œä¿¡æ¯çŠ¶æ€</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">netstat -at                <span class="comment">// åˆ—å‡ºæ‰€æœ‰TCPç«¯å£</span></span><br><span class="line">netstat -au                <span class="comment">// åˆ—å‡ºæ‰€æœ‰UDPç«¯å£</span></span><br><span class="line">netstat -lt                <span class="comment">// åˆ—å‡ºæ‰€æœ‰ç›‘å¬TCPçš„ç«¯å£</span></span><br><span class="line">netstat -lu                <span class="comment">// åˆ—å‡ºæ‰€æœ‰ç›‘å¬UDPçš„ç«¯å£</span></span><br><span class="line">netstat -r                 <span class="comment">// æ˜¾ç¤ºæ ¸å¿ƒè·¯ç”±ä¿¡æ¯</span></span><br><span class="line">netstat -anl | grep <span class="number">8888</span>   <span class="comment">// æŸ¥çœ‹ç›¸å…³ç«¯å£å·ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="top-å®æ—¶ç³»ç»Ÿçš„æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæƒ…å†µ"><a href="#top-å®æ—¶ç³»ç»Ÿçš„æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæƒ…å†µ" class="headerlink" title="top  å®æ—¶ç³»ç»Ÿçš„æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæƒ…å†µ"></a>top  å®æ—¶ç³»ç»Ÿçš„æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæƒ…å†µ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top              <span class="comment">// åŠ¨æ€æŸ¥çœ‹ç³»ç»Ÿçš„æ•´ä½“è¿è¡Œæƒ…å†µ</span></span><br><span class="line">top -p PID       <span class="comment">// æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„è¿è¡Œæƒ…å†µ</span></span><br><span class="line">top -u user      <span class="comment">// æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„ç›¸å…³è¿›ç¨‹çš„è¿è¡Œæƒ…å†µ</span></span><br></pre></td></tr></table></figure><font color="red" size="3" face="â€œConsolasâ€">htop å’Œtopç±»ä¼¼åŠŸèƒ½</font><h3 id="sed-å¤„ç†æ–‡ä»¶å¹¶åœ¨æ§åˆ¶å°æ‰“å°"><a href="#sed-å¤„ç†æ–‡ä»¶å¹¶åœ¨æ§åˆ¶å°æ‰“å°" class="headerlink" title="sed  å¤„ç†æ–‡ä»¶å¹¶åœ¨æ§åˆ¶å°æ‰“å°"></a>sed  å¤„ç†æ–‡ä»¶å¹¶åœ¨æ§åˆ¶å°æ‰“å°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s/book/books/'</span> file   <span class="comment">// s æ›¿æ¢æŒ‡å®š å­—ç¬¦ï¼Œå°†bookæ›¿æ¢ä¸ºbooks</span></span><br><span class="line">sed -i <span class="string">'s/book/books/g'</span> file  <span class="comment">// g æ›¿æ¢æ–‡æœ¬ä¸­å†…å®¹ -i ç›´æ¥ç¼–è¾‘æ–‡æœ¬é€‰é¡¹ åŒ¹é…æ–‡ä»¶ä¸­ç¬¬ä¸€ä¸ªbookæ›¿æ¢ä¸ºbooks</span></span><br></pre></td></tr></table></figure><font color="red" size="3" face="â€œConsolasâ€">è¿™ä¸ªä¸œè¥¿å¾ˆå¤šåŠŸèƒ½çš„ï¼Œæš‚æ—¶ä¸è¯¦ç»†å­¦ä¹ </font><h3 id="less-ä»å¤´æŸ¥çœ‹æ—¥å¿—"><a href="#less-ä»å¤´æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="less ä»å¤´æŸ¥çœ‹æ—¥å¿—"></a>less ä»å¤´æŸ¥çœ‹æ—¥å¿—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shift+g è·³è½¬åˆ°æ–‡ä»¶åº•éƒ¨</span><br><span class="line">æŒ‰fé”®,æ˜¯å‘å‰(ä¸‹)æŸ¥çœ‹  forword</span><br><span class="line">æŒ‰bé”®,æ˜¯å‘å(ä¸Š)æŸ¥çœ‹  backword</span><br><span class="line">q  é€€å‡º</span><br></pre></td></tr></table></figure><h3 id="more-ä»å¤´æŸ¥çœ‹æ—¥å¿—"><a href="#more-ä»å¤´æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="more ä»å¤´æŸ¥çœ‹æ—¥å¿—"></a>more ä»å¤´æŸ¥çœ‹æ—¥å¿—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">more file</span><br><span class="line">æŒ‰ctrl+fé”®,æ˜¯å‘å‰(ä¸‹)æŸ¥çœ‹  forword</span><br><span class="line">æŒ‰ctrl+bé”®,æ˜¯å‘å(ä¸Š)æŸ¥çœ‹ backword</span><br></pre></td></tr></table></figure><h3 id="tail-åŠ¨æ€æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹"><a href="#tail-åŠ¨æ€æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹" class="headerlink" title="tail åŠ¨æ€æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹"></a>tail åŠ¨æ€æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -<span class="number">500f</span> file  <span class="comment">// åŠ¨æ€æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨500è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="head-æ˜¾ç¤ºæ–‡ä»¶å¼€å¤´å†…å®¹"><a href="#head-æ˜¾ç¤ºæ–‡ä»¶å¼€å¤´å†…å®¹" class="headerlink" title="head æ˜¾ç¤ºæ–‡ä»¶å¼€å¤´å†…å®¹"></a>head æ˜¾ç¤ºæ–‡ä»¶å¼€å¤´å†…å®¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head -<span class="number">100f</span> file  <span class="comment">// æŸ¥çœ‹æ–‡ä»¶å‰100è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="rar-è§£å‹raræ–‡ä»¶æˆ–å‹ç¼©ä¸ºraræ–‡ä»¶"><a href="#rar-è§£å‹raræ–‡ä»¶æˆ–å‹ç¼©ä¸ºraræ–‡ä»¶" class="headerlink" title="rar è§£å‹raræ–‡ä»¶æˆ–å‹ç¼©ä¸ºraræ–‡ä»¶"></a>rar è§£å‹raræ–‡ä»¶æˆ–å‹ç¼©ä¸ºraræ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rar x -ep2 filename    <span class="comment">// å°†Windows raræ–‡ä»¶ è§£å‹ utf-8ç¼–ç çš„æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h3 id="unzip-è§£å‹zipæ–‡ä»¶æˆ–å‹ç¼©ä¸ºzipæ–‡ä»¶"><a href="#unzip-è§£å‹zipæ–‡ä»¶æˆ–å‹ç¼©ä¸ºzipæ–‡ä»¶" class="headerlink" title="unzip è§£å‹zipæ–‡ä»¶æˆ–å‹ç¼©ä¸ºzipæ–‡ä»¶"></a>unzip è§£å‹zipæ–‡ä»¶æˆ–å‹ç¼©ä¸ºzipæ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unzip -d fileDir file.zip   <span class="comment">// zip æ–‡ä»¶ è§£å‹</span></span><br><span class="line">unzip fileName <span class="comment">// æ–‡ä»¶è§£å‹ç¼©åˆ°å½“å‰ç›®å½•</span></span><br><span class="line">unzip -O cp936 file.zip <span class="comment">//å°†Windowsæ–‡ä»¶ä»¥utf-8ç¼–ç è§£å‹ç¼©</span></span><br></pre></td></tr></table></figure><h3 id="service-å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€"><a href="#service-å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€" class="headerlink" title="service å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€"></a>service å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service sshd status        <span class="comment">// æŸ¥çœ‹sshdçš„è¿è¡ŒçŠ¶æ€</span></span><br><span class="line">service sshd start        <span class="comment">// å¯åŠ¨æœåŠ¡</span></span><br></pre></td></tr></table></figure><h3 id="systemctl-å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€"><a href="#systemctl-å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€" class="headerlink" title="systemctl å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€"></a>systemctl å¯åŠ¨æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl status httpd.service <span class="comment">// æŸ¥çœ‹httpdæœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl enable httpd.service <span class="comment">// å¯åŠ¨æœåŠ¡</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…ã€å¸è½½è½¯ä»¶"><a href="#å®‰è£…ã€å¸è½½è½¯ä»¶" class="headerlink" title="å®‰è£…ã€å¸è½½è½¯ä»¶"></a>å®‰è£…ã€å¸è½½è½¯ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo agt-get install git  <span class="comment">// å®‰è£…git</span></span><br><span class="line">sudo apt-get --purge remove git  <span class="comment">// å¸è½½git</span></span><br></pre></td></tr></table></figure><h3 id="dpkg"><a href="#dpkg" class="headerlink" title="dpkg"></a>dpkg</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i *.deb    <span class="comment">// å®‰è£….debæ–‡ä»¶çš„è½¯ä»¶</span></span><br><span class="line">sudo dpkg -P *.deb    <span class="comment">// å¸è½½.debæ–‡ä»¶çš„è½¯ä»¶</span></span><br></pre></td></tr></table></figure><h3 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutdown -h now    <span class="comment">// å…³æœº</span></span><br><span class="line">shutdown -r now    <span class="comment">// é‡å¯</span></span><br></pre></td></tr></table></figure><h3 id="df"><a href="#df" class="headerlink" title="df"></a>df</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -lh   <span class="comment">// æŸ¥çœ‹ç³»ç»Ÿç¡¬ç›˜ä½¿ç”¨æƒ…å†µ</span></span><br></pre></td></tr></table></figure><h3 id="du"><a href="#du" class="headerlink" title="du"></a>du</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du -sh     <span class="comment">// æŸ¥çœ‹æ–‡ä»¶ç›®å½•å¤§å°</span></span><br><span class="line">du -ah     <span class="comment">// æŸ¥çœ‹æ–‡ä»¶ç›®å½•ä¸‹é¢å„ä¸ªæ–‡ä»¶å¤§å°</span></span><br><span class="line">du -h --max-depth=<span class="number">1</span> ./  <span class="comment">// æŸ¥çœ‹å½“å‰ç›®å½•å¤§å°</span></span><br></pre></td></tr></table></figure><h3 id="find-æŸ¥æ‰¾"><a href="#find-æŸ¥æ‰¾" class="headerlink" title="find æŸ¥æ‰¾"></a>find æŸ¥æ‰¾</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">"*.c"</span> | xargs grep -H <span class="string">"intern("</span>  <span class="comment">// æŸ¥æ‰¾å½“å‰ç›®å½•æŒ‡å®šæ–‡ä»¶åç¼€åŒ…å«æŒ‡å®šå­—ç¬¦çš„ç»“æœ</span></span><br><span class="line">find /home -name <span class="string">'*.md'</span> <span class="comment">// æŸ¥æ‰¾æŒ‡å®šç›®å½•åŒ…å«æŒ‡å®šå­—ç¬¦ä¸² çš„æ–‡ä»¶åè·¯å¾„</span></span><br></pre></td></tr></table></figure><h3 id="grep-å…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥"><a href="#grep-å…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥" class="headerlink" title="grep å…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥"></a>grep å…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -rn <span class="string">"hello,world!"</span> *  <span class="comment">// åœ¨å½“å‰ç›®å½•æŸ¥æ‰¾ hello,world å­—ç¬¦ä¸²</span></span><br><span class="line">grep <span class="string">'model name'</span> /proc/cpuinfo | wc -l  <span class="comment">// æŸ¥çœ‹ç³»ç»Ÿæœ‰å‡ ä¸ªCPU</span></span><br></pre></td></tr></table></figure><font color="red" size="3" face="â€œConsolasâ€">ä¸€èˆ¬é…åˆåˆ«çš„å‘½ä»¤ä¸€èµ·ä½¿ç”¨æ•ˆæœå¾ˆå¼ºå¤§</font><h3 id="ps-æ˜¾ç¤ºå½“å‰è¿›ç¨‹çŠ¶æ€"><a href="#ps-æ˜¾ç¤ºå½“å‰è¿›ç¨‹çŠ¶æ€" class="headerlink" title="ps  æ˜¾ç¤ºå½“å‰è¿›ç¨‹çŠ¶æ€"></a>ps  æ˜¾ç¤ºå½“å‰è¿›ç¨‹çŠ¶æ€</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep nginx     <span class="comment">// æ ¹æ®åå­—æŸ¥æ‰¾è¿›ç¨‹</span></span><br><span class="line">ps -ef | grep elastic   <span class="comment">// æ ¹æ®åå­—æŸ¥æ‰¾è¿›ç¨‹</span></span><br></pre></td></tr></table></figure><h3 id="lsof-æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„ç«¯å£ï¼ŒæŸ¥çœ‹æ‰“å¼€æ–‡ä»¶çš„è¿›ç¨‹"><a href="#lsof-æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„ç«¯å£ï¼ŒæŸ¥çœ‹æ‰“å¼€æ–‡ä»¶çš„è¿›ç¨‹" class="headerlink" title="lsof  æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„ç«¯å£ï¼ŒæŸ¥çœ‹æ‰“å¼€æ–‡ä»¶çš„è¿›ç¨‹"></a>lsof  æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„ç«¯å£ï¼ŒæŸ¥çœ‹æ‰“å¼€æ–‡ä»¶çš„è¿›ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:<span class="number">8888</span>      <span class="comment">// æ ¹æ®ç«¯å£å·æŸ¥çœ‹ç›¸å…³è¿›ç¨‹ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="iconv-è½¬æ¢æ–‡ä»¶ç¼–ç "><a href="#iconv-è½¬æ¢æ–‡ä»¶ç¼–ç " class="headerlink" title="iconv  è½¬æ¢æ–‡ä»¶ç¼–ç "></a>iconv  è½¬æ¢æ–‡ä»¶ç¼–ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iconv -f gb2312 file -o newFile  <span class="comment">// å°†Windowsæ–‡ä»¶è½¬æ¢ä¸ºLinuxè¯†åˆ«çš„æ–‡ä»¶</span></span><br><span class="line">iconv -f gbk -t utf8 file &gt; bewFile  <span class="comment">// å°†Windowsæ–‡ä»¶è½¬æ¢ä¸ºLinuxè¯†åˆ«çš„æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h3 id="curl-æ–‡æœ¬ä¼ è¾“å·¥å…·"><a href="#curl-æ–‡æœ¬ä¼ è¾“å·¥å…·" class="headerlink" title="curl æ–‡æœ¬ä¼ è¾“å·¥å…·"></a>curl æ–‡æœ¬ä¼ è¾“å·¥å…·</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">'Content-Type:application/json'</span> https:<span class="comment">//api.github.com -s | python -m json.tool  // GETè¯·æ±‚</span></span><br><span class="line">curl -X PUT <span class="number">127.0</span>.0.1:<span class="number">9200</span>/job_index/_mapping/job -d <span class="string">'&#123;"properties":&#123;"new_field":&#123;"type":"integer"&#125;&#125;&#125;'</span>  <span class="comment">// PUTè¯·æ±‚</span></span><br><span class="line">curl -X DELETE <span class="number">127.0</span>.0.1:<span class="number">9200</span>/agent_job_index  <span class="comment">// DELETEè¯·æ±‚</span></span><br><span class="line">curl -X POST <span class="number">127.0</span>.0.1:<span class="number">9200</span>/job_index/job/_search -d <span class="string">'&#123;"query":&#123;"term":&#123;"id":"1"&#125;&#125;&#125;'</span> <span class="comment">// POSTè¯·æ±‚</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ğŸ˜³å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linuxå‘½ä»¤ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
